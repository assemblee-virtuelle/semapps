import*as e from"react";import t,{useEffect as r,useState as n,useCallback as o,useMemo as a,forwardRef as i}from"react";import{useGetIdentity as c,usePermissionsOptimized as s,useNotify as u,useRedirect as l,Create as d,CreateActions as p,useTranslate as f,useGetList as m,useDataProvider as h,Loading as v,Error as g,useTheme as y,useAuthProvider as b,Button as w,useResourceDefinition as _,TopToolbar as E,ListButton as x,ShowButton as j,useRecordContext as k,DeleteButton as O,Toolbar as P,SaveButton as S,Edit as C,CreateButton as A,ExportButton as T,List as I,EditButton as L,Show as R,useLogin as U,Notification as N,useLocale as z,useSafeSetState as W,LoginForm as D,useLogout as F,Resource as V,UserMenu as B,MenuItemLink as q,useGetPermissions as G}from"react-admin";import{useCreateContainer as M}from"@semapps/semantic-data-provider";import Y from"@mui/icons-material/Share";import{TextField as $,List as H,ListItem as J,ListItemAvatar as K,Avatar as Q,ListItemText as X,ListItemSecondaryAction as Z,IconButton as ee,Menu as te,MenuItem as re,ListItemIcon as ne,Dialog as oe,DialogTitle as ae,DialogContent as ie,DialogActions as ce,useMediaQuery as se,DialogContentText as ue,Button as le,Card as de,StyledEngineProvider as pe,Typography as fe,CardActions as me,CircularProgress as he,useTheme as ve,adaptV4Theme as ge}from"@mui/material";import ye from"@mui/styles/makeStyles";import be from"@mui/material/Autocomplete";import we from"@mui/icons-material/Person";import _e from"@mui/icons-material/Edit";import Ee from"@mui/icons-material/Check";import xe from"@mui/icons-material/Public";import je from"@mui/icons-material/VpnLock";import ke from"@mui/icons-material/Group";import{styled as Oe,ThemeProvider as Pe}from"@mui/system";import Se from"@mui/icons-material/Lock";import{useNavigate as Ce,useLocation as Ae,redirect as Te,Link as Ie}from"react-router-dom";import{makeStyles as Le,Box as Re,Card as Ue,Avatar as Ne,Typography as ze,List as We,Divider as De,ListItem as Fe,ListItemAvatar as Ve,ListItemText as Be,createTheme as qe,ThemeProvider as Ge}from"@material-ui/core";import Me from"@material-ui/icons/Lock";import Ye from"@material-ui/icons/Storage";import{createTheme as $e,ThemeProvider as He}from"@mui/material/styles";import{Form as Je,Field as Ke}from"react-final-form";import Qe from"@mui/icons-material/PowerSettingsNew";import Xe from"@mui/icons-material/AccountCircle";function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
tt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new x(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function p(){}function f(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&r.call(v,o)&&(m=v);var g=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,c){var s=u(e[o],e,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,c(g,"constructor",f),c(f,"constructor",p),p.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new b(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function rt(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function nt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){rt(a,n,o,i,c,"next",e)}function c(e){rt(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(){return(at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function it(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){if(e){if("string"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dt(e){this.message=e}dt.prototype=new Error,dt.prototype.name="InvalidCharacterError";var pt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new dt("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,a=0,i="";n=t.charAt(a++);~n&&(r=o%4?64*r+n:n,o++%4)?i+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function ft(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(pt(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return pt(t)}}function mt(e){this.message=e}function ht(e,t){if("string"!=typeof e)throw new mt("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(ft(e.split(".")[r]))}catch(e){throw new mt("Invalid token specified: "+e.message)}}mt.prototype=new Error,mt.prototype.name="InvalidTokenError";var vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function gt(e,t){return e(t={exports:{}},t.exports),t.exports}var yt,bt,wt=gt((function(e){var t,r;t=vt,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(n>0&&(o=o.replace(/^[\/]+/,"")),o=n<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var a=t.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),_t=function(e){return e?Array.isArray(e)?e:[e]:void 0},Et=function(e){var t=new URL(e);return wt(t.origin,"_acl",t.pathname)},xt=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},jt=function(){var e=nt(tt().mark((function e(t){var r,n;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataServers();case 2:if(r=e.sent,n=Object.values(r).find((function(e){return!0===e.authServer}))){e.next=6;break}throw new Error("Could not find a server with authServer: true. Check your dataServers config.");case 6:return e.abrupt("return",n.pod?new URL(n.baseUrl).origin:n.baseUrl);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=["username","email","password","domain"],Ot=function(e){var t,r,n,o,a,i,c,s,u,l,d,p,f=e.dataProvider,m=e.allowAnonymous,h=void 0===m||m,v=e.localAccounts,g=void 0!==v&&v,y=e.checkUser,b=e.checkPermissions,w=void 0!==b&&b;return{login:(p=nt(tt().mark((function e(t){var r,n,o,a,i,c,s;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(f);case 2:if(r=e.sent,!g){e.next=20;break}return n=t.username,o=t.password,e.prev=5,e.next=8,f.fetch(wt(r,"auth/login"),{method:"POST",body:JSON.stringify({username:n.trim(),password:o.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 8:a=e.sent,i=a.json,c=i.token,localStorage.setItem("token",c),window.location.reload(),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),new Error("ra.auth.sign_in_error");case 18:e.next=23;break;case 20:s=new URL(window.location.href).origin+"/login?login=true",t.redirect&&(s+="&redirect="+encodeURIComponent(t.redirect)),window.location.href=wt(r,"auth?redirectUrl="+encodeURIComponent(s));case 23:case"end":return e.stop()}}),e,null,[[5,15]])}))),function(e){return p.apply(this,arguments)}),signup:(d=nt(tt().mark((function e(t){var r,n,o,a,i,c,s,u,l,d,p;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(f);case 2:if(r=e.sent,!g){e.next=33;break}return n=t.username,o=t.email,a=t.password,t.domain,i=it(t,kt),e.prev=5,e.next=8,f.fetch(wt(r,"auth/signup"),{method:"POST",body:JSON.stringify(et({username:n.trim(),email:o.trim(),password:a.trim()},i)),headers:new Headers({"Content-Type":"application/json"})});case 8:return c=e.sent,s=c.json,u=s.token,localStorage.setItem("token",u),l=ht(u),d=l.webId,e.abrupt("return",d);case 16:if(e.prev=16,e.t0=e.catch(5),"email.already.exists"!==e.t0.message){e.next=22;break}throw new Error("auth.message.user_email_exist");case 22:if("username.already.exists"!==e.t0.message){e.next=26;break}throw new Error("auth.message.username_exist");case 26:if("username.invalid"!==e.t0.message){e.next=30;break}throw new Error("auth.message.username_invalid");case 30:throw new Error(e.t0.message||"ra.auth.sign_in_error");case 31:e.next=35;break;case 33:p=new URL(window.location.href).origin+"/login?login=true",window.location.href=wt(r,"auth?redirectUrl="+encodeURIComponent(p));case 35:case"end":return e.stop()}}),e,null,[[5,16]])}))),function(e){return d.apply(this,arguments)}),logout:(l=nt(tt().mark((function e(){var t,r;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(f);case 2:return t=e.sent,localStorage.clear(),g?(window.location.reload(),window.location.href="/"):(r=new URL(window.location.href).origin,window.location.href=wt(t,h?"auth/logout?redirectUrl="+encodeURIComponent(r+"/login?logout=true"):"auth/logout?redirectUrl="+encodeURIComponent(r+"/login"))),e.abrupt("return","/");case 6:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkAuth:(u=nt(tt().mark((function e(){return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")||h){e.next=3;break}throw new Error;case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),checkUser:function(e){return!y||y(e)},checkError:function(e){return Promise.resolve()},getPermissions:(s=nt(tt().mark((function e(t){var r,n,o;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=2;break}return e.abrupt("return",!0);case 2:if(t&&t.startsWith("http")){e.next=4;break}throw new Error("The first parameter passed to getPermissions must be an URL");case 4:return r=Et(t),e.prev=5,e.next=8,f.fetch(r);case 8:return n=e.sent,o=n.json,e.abrupt("return",o["@graph"]);case 13:return e.prev=13,e.t0=e.catch(5),console.warn("Could not fetch ACL URI ".concat(t)),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,13]])}))),function(e){return s.apply(this,arguments)}),addPermission:(c=nt(tt().mark((function e(t,r,n,o){var a,i,c;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to addPermission must be an URL");case 2:return i=Et(t),ot(a={"@id":"#"+o.replace("acl:",""),"@type":"acl:Authorization"},n,r),ot(a,"acl:accessTo",t),ot(a,"acl:mode",o),c=a,e.next=6,f.fetch(i,{method:"PATCH",body:JSON.stringify({"@context":xt(i),"@graph":[c]})});case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return c.apply(this,arguments)}),removePermission:(i=nt(tt().mark((function e(t,r,n,o){var a,i,c,s;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to removePermission must be an URL");case 2:return a=Et(t),e.next=5,f.fetch(a);case 5:return i=e.sent,c=i.json,s=c["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=_t(e["acl:mode"]),a=_t(e[n]);return o&&t.includes(o)&&a&&a.includes(r)&&(a=a.filter((function(e){return e!==r}))),et(et({},e),{},ot({},n,a))})),e.next=10,f.fetch(a,{method:"PUT",body:JSON.stringify({"@context":xt(a),"@graph":s})});case 10:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return i.apply(this,arguments)}),getIdentity:(a=nt(tt().mark((function e(){var t,r,n,o,a,i,c;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=17;break}return r=ht(t),n=r.webId,e.next=5,f.fetch(n);case 5:if(o=e.sent,!(a=o.json).url){e.next=13;break}return e.next=10,f.fetch(a.url);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:return i=e.t0,c=i.json,e.abrupt("return",{id:n,fullName:(null==c?void 0:c["vcard:given-name"])||(null==c?void 0:c["pair:label"])||a["foaf:name"],profileData:c,webIdData:a});case 17:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resetPassword:(o=nt(tt().mark((function e(t){var r,n;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,jt(f);case 3:return n=e.sent,e.prev=4,e.next=7,f.fetch(wt(n,"auth/reset_password"),{method:"POST",body:JSON.stringify({email:r.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("app.notification.reset_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return o.apply(this,arguments)}),setNewPassword:(n=nt(tt().mark((function e(t){var r,n,o,a;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.token,o=t.password,e.next=3,jt(f);case 3:return a=e.sent,e.prev=4,e.next=7,f.fetch(wt(a,"auth/new_password"),{method:"POST",body:JSON.stringify({email:r.trim(),token:n,password:o}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("app.notification.new_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),getAccountSettings:(r=nt(tt().mark((function e(t){var r,n,o;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(f);case 2:return r=e.sent,e.prev=3,e.next=6,f.fetch(wt(r,"auth/account"));case 6:return n=e.sent,o=n.json,e.abrupt("return",o);case 11:throw e.prev=11,e.t0=e.catch(3),new Error("app.notification.get_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e){return r.apply(this,arguments)}),updateAccountSettings:(t=nt(tt().mark((function e(t){var r,n,o,a;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(f);case 2:return r=e.sent,e.prev=3,n=t.email,o=t.currentPassword,a=t.newPassword,e.next=7,f.fetch(wt(r,"auth/account"),{method:"POST",body:JSON.stringify({currentPassword:o,email:n.trim(),newPassword:a}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"auth.account.invalid_password"!==e.t0.message){e.next=13;break}throw new Error("app.notification.invalid_password");case 13:throw new Error("app.notification.update_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}},Pt="acl:agentClass",St=["acl:Append","acl:Write","acl:Control"],Ct=["acl:Append","acl:Write","acl:Control"],At=["acl:Write","acl:Control"],Tt=["acl:Control"],It={show:["acl:Read","acl:Append","acl:Write","acl:Control"],list:["acl:Read","acl:Append","acl:Write","acl:Control"],create:St,edit:Ct,delete:At,control:Tt},Lt={show:"auth.message.resource_show_forbidden",edit:"auth.message.resource_edit_forbidden",delete:"auth.message.resource_delete_forbidden",control:"auth.message.resource_control_forbidden",list:"auth.message.container_list_forbidden",create:"auth.message.container_create_forbidden"},Rt=(ot(yt={},"acl:Read","auth.right.resource.read"),ot(yt,"acl:Append","auth.right.resource.append"),ot(yt,"acl:Write","auth.right.resource.write"),ot(yt,"acl:Control","auth.right.resource.control"),yt),Ut=(ot(bt={},"acl:Read","auth.right.container.read"),ot(bt,"acl:Write","auth.right.container.write"),ot(bt,"acl:Control","auth.right.container.control"),bt),Nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",o=c(),a=o.identity,i=o.isLoading,d=s(e),p=d.permissions,f=u(),m=l();return r((function(){!i&&a&&p&&!p.some((function(e){return It[t].includes(e["acl:mode"])}))&&(f(Lt[t],{type:"error"}),m(n))}),[p,a,m,f,i]),p},zt=function(e){var r=M(e.resource);return Nt(r,"create"),t.createElement(d,e)};zt.defaultProps={actions:t.createElement(p,null)};var Wt=ye((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),Dt=function(e){var o=e.agents,a=e.addPermission,i=Wt(),c=f(),s=ct(n(null),2),u=s[0],l=s[1],d=ct(n(""),2),p=d[0],h=d[1],v=ct(n([]),2),g=v[0],y=v[1],b=m("Person",{page:1,perPage:100},{field:"pair:label",order:"ASC"},{q:p},{enabled:p.length>0}).data;return r((function(){y((null==b?void 0:b.length)>0?Object.values(b):[])}),[b]),t.createElement(be,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(o).includes(e.id)}))},options:g,noOptionsText:c("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:u,onChange:function(e,t){a(t.id||t["@id"],"acl:agent","acl:Read"),l(null),h(""),y([])},onInputChange:function(e,t){h(t)},renderInput:function(e){return t.createElement($,at({},e,{label:c("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(e){return t.createElement(H,{dense:!0,className:i.list},t.createElement(J,{button:!0},t.createElement(K,null,t.createElement(Q,{src:e.image},t.createElement(we,null))),t.createElement(X,{primary:e["pair:label"]})))}})},Ft=function(e){var r=e.agent;switch(r.predicate){case Pt:return"foaf:Agent"===r.id?t.createElement(xe,null):t.createElement(je,null);case"acl:agent":return t.createElement(we,null);case"acl:agentGroup":return t.createElement(ke,null);default:throw new Error("Unknown agent predicate: "+r.predicate)}},Vt=ye((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),Bt=function(e){var o=e.isContainer,a=e.agent,i=e.addPermission,c=e.removePermission,s=Vt(),u=f(),l=h(),d=ct(t.useState(null),2),p=d[0],m=d[1],y=ct(n(),2),b=y[0],w=y[1],_=ct(n(!0),2),E=_[0],x=_[1],j=ct(n(),2),k=j[0],O=j[1];if(r((function(){"acl:agent"===a.predicate?l.getOne("Person",{id:a.id}).then((function(e){var t=e.data;w(t),x(!1)})).catch((function(e){O(e),x(!1)})):x(!1)}),[a.id,a.predicate]),"acl:agentGroup"===a.predicate)return null;var P=function(){return m(null)},S=o?Ut:Rt;return E?t.createElement(v,null):k?t.createElement(g,null):t.createElement(J,{className:s.listItem},t.createElement(K,null,t.createElement(Q,{src:null==b?void 0:b.image},t.createElement(Ft,{agent:a}))),t.createElement(X,{className:s.primaryText,primary:b?b["pair:label"]:u("foaf:Agent"===a.id?"auth.agent.anonymous":"auth.agent.authenticated")}),t.createElement(X,{className:s.secondaryText,primary:a.permissions&&a.permissions.map((function(e){return u(S[e])})).join(", ")}),t.createElement(Z,null,t.createElement(ee,{onClick:function(e){return m(e.currentTarget)},size:"large"},t.createElement(_e,null)),t.createElement(te,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:P},Object.entries(S).map((function(e){var r=ct(e,2),n=r[0],o=r[1],s=a.permissions&&a.permissions.includes(n);return t.createElement(re,{key:n,onClick:function(){s?c(a.id,a.predicate,n):i(a.id,a.predicate,n),P()}},t.createElement(ne,null,s?t.createElement(Ee,null):null),t.createElement(X,{primary:u(o)}))})))))},qt=Oe(H)((function(){return{width:"100%",maxWidth:"100%",backgroundColor:ct(y(),1)[0].palette.background.paper}})),Gt=function(e){var r=e.isContainer,n=e.agents,o=e.addPermission,a=e.removePermission;return t.createElement(qt,{dense:!0},Object.entries(n).map((function(e){var n=ct(e,2),i=n[0],c=n[1];return t.createElement(Bt,{key:i,isContainer:r,agent:c,addPermission:o,removePermission:a})})))},Mt=function(e){var t=s(e).permissions,a=b(),i=ct(n({}),2),c=i[0],u=i[1];r((function(){var e,r=(ot(e={},"foaf:Agent",{id:"foaf:Agent",predicate:Pt,permissions:[]}),ot(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:Pt,permissions:[]}),e),n=function(e,t,n){r[e]?r[e].permissions.push(n):r[e]={id:e,predicate:t,permissions:[n]}};if(t){var o,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ut(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{var i=function(){var e=o.value;e[Pt]&&_t(e[Pt]).forEach((function(t){return n(t,Pt,e["acl:mode"])})),e["acl:agent"]&&_t(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&_t(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(a.s();!(o=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}u(r)}}),[t]);var l=o((function(t,r,n){var o,i=et({},c);u(et(et({},c),{},ot({},t,{id:t,predicate:r,permissions:c[t]?[].concat(st(null===(o=c[t])||void 0===o?void 0:o.permissions),[n]):[n]}))),a.addPermission(e,t,r,n).catch((function(e){u(i)}))}),[c,u,e,a]),d=o((function(t,r,n){var o=et({},c);u(Object.fromEntries(Object.entries(c).map((function(e){var r=ct(e,2),o=r[0],a=r[1];return a.id===t&&(a.permissions=a.permissions.filter((function(e){return e!==n}))),[o,a]})).filter((function(e){var t=ct(e,2);t[0];var r=t[1];return r.predicate===Pt||r.permissions.length>0})))),a.removePermission(e,t,r,n).catch((function(e){u(o)}))}),[c,u,e,a]);return{agents:c,addPermission:l,removePermission:d}},Yt=ye((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),$t=function(e){var r=e.open,n=e.onClose,o=e.uri,a=e.isContainer,i=Yt(),c=f(),s=Mt(o),u=s.agents,l=s.addPermission,d=s.removePermission;return t.createElement(oe,{fullWidth:!0,open:r,onClose:n},t.createElement(ae,{className:i.title},c(a?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),t.createElement(ie,{className:i.addForm},t.createElement(Dt,{agents:u,addPermission:l})),t.createElement(ie,{className:i.listForm},t.createElement(Gt,{isContainer:a,agents:u,addPermission:l,removePermission:d})),t.createElement(ce,{className:i.actions},t.createElement(w,{label:"ra.action.close",variant:"text",onClick:n})))},Ht=function(e){var r=e.record,o=e.resource,a=ct(n(!1),2),i=a[0],c=a[1],s=M(o),u=!!o,l=u?s:r.id||r["@id"];return t.createElement(t.Fragment,null,t.createElement(w,{label:"auth.action.permissions",onClick:function(){return c(!0)}},t.createElement(Y,null)),t.createElement($t,{uri:l,isContainer:!!u,open:i,onClose:function(){return c(!1)}}))},Jt=function(e){var r=e.record,n=_(),o=n.hasList,a=n.hasShow,i=s(null==r?void 0:r.id).permissions;return t.createElement(E,null,o&&t.createElement(x,{record:r}),a&&t.createElement(j,{record:r}),!!i&&i.some((function(e){return Tt.includes(e["acl:mode"])}))&&t.createElement(Ht,{record:r}))},Kt=function(e){var r=k(),n=s(null==r?void 0:r.id).permissions;return n&&n.some((function(e){return At.includes(e["acl:mode"])}))?t.createElement(O,e):null},Qt=ye((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),Xt=function(e){var r=Qt();return t.createElement(P,at({},e,{className:r.toolbar}),t.createElement(S,null),t.createElement(Kt,{mutationMode:"undoable"}))},Zt=function(e){return Nt(e.id,"edit"),t.createElement(C,e,t.cloneElement(e.children,et({toolbar:t.createElement(Xt,null)},e.children.props)))};Zt.defaultProps={actions:t.createElement(Jt,null)};var er=["bulkActions","basePath","sort","displayedFilters","exporter","filters","filterValues","onUnselectItems","resource","selectedIds","showFilter","total"],tr=function(e){var r=e.bulkActions,n=e.basePath,o=e.sort,a=e.displayedFilters,i=e.exporter,c=e.filters,u=e.filterValues,l=e.onUnselectItems,d=e.resource,p=e.selectedIds,f=e.showFilter,m=e.total,h=it(e,er),v=ct(y(),1)[0],g=se((function(){return v.breakpoints.down("sm")})),b=_(h),w=M(d),x=s(w).permissions;return t.createElement(E,null,c&&t.cloneElement(c,{resource:d,showFilter:f,displayedFilters:a,filterValues:u,context:"button"}),b.hasCreate&&x&&x.some((function(e){return St.includes(e["acl:mode"])}))&&t.createElement(A,{basePath:n}),x&&x.some((function(e){return Tt.includes(e["acl:mode"])}))&&t.createElement(Ht,{basePath:n,record:w}),!g&&!1!==i&&t.createElement(T,{disabled:0===m,resource:d,sort:o,filter:u,exporter:i}),r&&t.cloneElement(r,{basePath:n,filterValues:u,resource:d,selectedIds:p,onUnselectItems:l}))},rr=function(e){return t.createElement(I,e)};rr.defaultProps={actions:t.createElement(tr,null)};var nr=function(e){var r=e.record,n=_(),o=n.hasList,a=n.hasEdit,i=s(null==r?void 0:r.id).permissions;return t.createElement(E,null,o&&t.createElement(x,{record:r}),a&&i&&i.some((function(e){return Ct.includes(e["acl:mode"])}))&&t.createElement(L,{record:r}),i&&i.some((function(e){return Tt.includes(e["acl:mode"])}))&&t.createElement(Ht,{record:r}))},or=function(e){return Nt(e.id,"edit"),t.createElement(R,e)};or.defaultProps={actions:t.createElement(nr,null)};var ar=["open","onClose","title","message","redirect"],ir=function(e){var r=e.open,n=e.onClose,o=e.title,a=e.message,i=e.redirect,c=it(e,ar),s=U(),u=f();return t.createElement(oe,at({open:r,onClose:n},c),t.createElement(ae,null,u(o)),t.createElement(ie,null,t.createElement(ue,null,u(a))),t.createElement(ce,null,t.createElement(le,{onClick:n},u("ra.action.cancel")),t.createElement(le,{onClick:function(){return s({redirect:i||window.location.pathname+window.location.search})},color:"primary",variant:"contained"},u("auth.action.login"))))};ir.defaultProps={title:"auth.dialog.login_required",message:"auth.message.login_to_continue"};var cr=function(e){return new Promise((function(t){return setTimeout(t,e)}))},sr=Oe("main")((function(e){return{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",backgroundColor:e.theme.palette.grey[300]}}));Oe("main")((function(e){return e.theme,{maxWidth:300,textAlign:"center",padding:"4px 8px 8px"}}));var ur=Oe(de)((function(e){return e.theme,{minWidth:300,marginTop:"6em"}})),lr=Oe("div")((function(e){return e.theme,{margin:"1em",display:"flex",justifyContent:"center"}})),dr=Oe(Q)((function(e){return{backgroundColor:e.theme.palette.grey[500]}})),pr=function(e){var n=e.buttons,o=e.userResource,a=e.propertiesExist,i=e.text,c=u(),s=U(),l=h(),d=b(),p=ct(y(),1)[0],f=Ce(),m=Ae();return r((function(){nt(tt().mark((function e(){var t;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=new URLSearchParams(m.search)).has("login")){e.next=8;break}if(!t.has("error")){e.next=6;break}"registration.not-allowed"===t.get("error")?c("auth.message.user_email_not_found",{type:"error"}):c("auth.message.bad_request",{type:"error",error:t.get("error")}),e.next=8;break;case 6:if(!t.has("token")){e.next=8;break}return e.delegateYield(tt().mark((function e(){var r,n,i,s,u,p,m;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get("token"),n=ht(r),i=n.webId,localStorage.setItem("token",r),e.next=5,l.getOne(o,{id:i});case 5:if(u=e.sent,s=u.data,!(a.length>0)){e.next=20;break}p=a.every((function(e){return s[e]}));case 9:if(p){e.next=20;break}return console.log("Waiting for all properties to have been created",a),e.next=13,cr(500);case 13:return e.next=15,l.getOne(o,{id:i});case 15:m=e.sent,s=m.data,p=a.every((function(e){return s[e]})),e.next=9;break;case 20:d.checkUser(s)?t.has("redirect")?(c("auth.message.user_connected",{type:"info"}),f(t.get("redirect"))):t.has("new")&&"true"===t.get("new")?(c("auth.message.new_user_created",{type:"info"}),f("/"+o+"/"+encodeURIComponent(i)+"/edit")):(c("auth.message.user_connected",{type:"info"}),f("/")):(localStorage.removeItem("token"),c("auth.message.user_not_allowed_to_login",{type:"error"}),f.replace("/login"));case 21:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:t.has("logout")&&(localStorage.clear(),c("auth.message.user_disconnected",{type:"info"}),f("/"));case 9:case"end":return e.stop()}}),e)})))()}),[m.search]),t.createElement(pe,{injectFirst:!0},t.createElement(Pe,{theme:p},t.createElement(sr,null,t.createElement(ur,null,t.createElement(lr,null,t.createElement(dr,null,t.createElement(Se,null))),i&&t.createElement(fe,{variant:"body2"},i),n&&n.map((function(e,r){return t.createElement(me,{key:r},t.cloneElement(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return s({},"/login")}}))})))),t.createElement(N,null)))};pr.defaultProps={propertiesExist:[],buttons:[t.createElement(le,{startIcon:t.createElement(Q,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var fr=Le((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.main}},text:{textAlign:"center",padding:"4px 8px 8px"},card:ot({minWidth:300,maxWidth:350,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]},list:{paddingTop:0,paddingBottom:0},listItem:{paddingTop:5,paddingBottom:5}}})),mr=function(e){var o=e.history,a=e.location,i=e.text,c=e.customPodProviders,s=fr(),l=u(),d=z(),p=f(),m=b(),v=h(),g=ct(n(c||[]),2),y=g[0],w=g[1],_=new URLSearchParams(a.search);return r((function(){nt(tt().mark((function e(){var t,r,n;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==y.length){e.next=13;break}return e.next=3,fetch("https://data.activitypods.org/pod-providers",{headers:{Accept:"application/ld+json"}});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,n=r["ldp:contains"].filter((function(e){return Array.isArray(e["apods:locales"])?e["apods:locales"].includes(d):e["apods:locales"]===d})),w(n),e.next=13;break;case 12:l("auth.message.pod_providers_not_loaded","error");case 13:case"end":return e.stop()}}),e)})))()}),[y,w,l,d]),r((function(){nt(tt().mark((function e(){var t,r,n,a,i;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.has("token")){e.next=16;break}return t=_.get("token"),r=ht(t),n=r.webId,e.next=5,fetch(n,{headers:{Accept:"application/json"}});case 5:if((a=e.sent).ok){e.next=10;break}l("auth.message.unable_to_fetch_user_data","error"),e.next=14;break;case 10:return e.next=12,a.json();case 12:i=e.sent,m.checkUser(i)?(localStorage.setItem("token",t),l("auth.message.user_connected","info"),window.location.reload(),window.location.href="/?addUser=true"):(l("auth.message.user_not_allowed_to_login","error"),o.replace("/login"));case 14:e.next=17;break;case 16:_.has("logout")&&(localStorage.clear(),l("auth.message.user_disconnected","info"),o.push("/"));case 17:case"end":return e.stop()}}),e)})))()}),[_,v]),_.has("token")||_.has("addUser")||_.has("logout")?null:t.createElement(Re,{display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(Ue,{className:s.card},t.createElement("div",{className:s.lockIconAvatar},t.createElement(Ne,{className:s.lockIcon},t.createElement(Me,null))),t.createElement(Re,{pl:2,pr:2},t.createElement(ze,{variant:"body2",className:s.text},i||p("auth.message.choose_pod_provider"))),t.createElement(Re,{m:2},t.createElement(We,{className:s.list},y.map((function(e,r){var n=new URL("/auth",(e["apods:domainName"].includes(":")?"http://":"https://")+e["apods:domainName"]);return _.has("signup")&&n.searchParams.set("signup","true"),n.searchParams.set("redirect",window.location.href),t.createElement(t.Fragment,{key:r},t.createElement(De,null),t.createElement(Fe,{key:r,button:!0,onClick:function(){return window.location.href=n.toString()},className:s.listItem},t.createElement(Ve,null,t.createElement(Ne,null,t.createElement(Ye,null))),t.createElement(Be,{primary:e["apods:domainName"],secondary:e["apods:area"]})))}))))))},hr=function(e){var r=a((function(){return qe(e.theme)}),[e.theme]);return t.createElement(Ge,{theme:r},t.createElement(mr,e),t.createElement(N,null))};function vr(){}function gr(){}gr.resetWarningCache=vr;var yr=function(){function e(e,t,r,n,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gr,resetWarningCache:vr};return r.PropTypes=r,r},br=gt((function(e){e.exports=yr()})),wr=gt((function(e){
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
!function(){var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)){if(o.length){var i=r.apply(null,o);i&&e.push(i)}}else if("object"===a){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var c in o)t.call(o,c)&&o[c]&&e.push(c)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r}()})),_r=function(){var e=b();return o((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signup(t)}),[e])},Er=["meta","input"],xr=ye((function(){return{form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},button:{width:"100%"},icon:{marginRight:ct(y(),1)[0].spacing(1)}}})),jr=function(t){var r=t.meta,n=r.isTouched,o=r.error,a=t.input,i=it(t,Er);return e.createElement($,at({error:!(!n||!o),helperText:n&&o},a,i,{fullWidth:!0}))},kr=function(t){var r=t.redirectTo,n=t.delayBeforeRedirect,o=ct(W(!1),2),a=o[0],i=o[1],c=_r(),s=f(),l=u(),d=xr(),p=Ae(),m=new URLSearchParams(p.search);return e.createElement(Je,{onSubmit:function(e){i(!0),c(e).then((function(e){n?setTimeout((function(){window.location.reload(),window.location.href=r||"/",i(!1)}),n):(window.location.reload(),window.location.href=r||"/",i(!1)),l("auth.message.new_user_created",{type:"info"})})).catch((function(e){i(!1),l("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},validate:function(e){var t={email:void 0,password:void 0};return e.email||(t.email=s("ra.validation.required")),e.password||(t.password=s("ra.validation.required")),t},initialValues:{email:m.get("email")},render:function(t){var r=t.handleSubmit;return e.createElement("form",{onSubmit:r,noValidate:!0},e.createElement("div",{className:d.form},e.createElement("div",{className:d.input},e.createElement(Ke,{id:"username",name:"username",component:jr,label:s("auth.input.username"),disabled:a})),e.createElement("div",{className:d.input},e.createElement(Ke,{id:"email",name:"email",component:jr,label:s("auth.input.email"),disabled:a||m.has("email")&&m.has("force-email")})),e.createElement("div",{className:d.input},e.createElement(Ke,{id:"password",name:"password",component:jr,label:s("ra.auth.password"),type:"password",disabled:a}))),e.createElement(me,null,e.createElement(le,{variant:"contained",type:"submit",color:"primary",disabled:a,className:d.button},a&&e.createElement(he,{className:d.icon,size:18,thickness:2}),s("auth.action.signup"))))}})};kr.propTypes={redirectTo:br.string};var Or=["theme","title","classes","className"],Pr=ye((function(){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},card:{minWidth:300,marginTop:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:ct(ve(),1)[0].palette.secondary[500]},switch:{margin:"1em",display:"flex",justifyContent:"center"}}})),Sr=function(e){var r=e.theme;e.title,e.classes;var n=e.className,o=it(e,Or),i=Pr(e),s=Ae(),u=f(),l=a((function(){return $e(ge(r))}),[r]),d=new URLSearchParams(s.search),p=d.has("signup"),m=d.get("redirect"),h=c(),v=h.identity,g=h.isLoading;return console.log("LocalLoginPage"),g?null:null!=v&&v.id?Te(m||"/"):(console.log("muiTheme-localloginpage",l),t.createElement(pe,{injectFirst:!0},t.createElement(He,{theme:l},t.createElement("div",at({className:wr(i.main,n)},o),t.createElement(de,{className:i.card},t.createElement("div",{className:i.avatar},t.createElement(Q,{className:i.icon},t.createElement(Se,null))),p?t.createElement(kr,{redirectTo:m,delayBeforeRedirect:3e3}):t.createElement(D,{redirectTo:m}),t.createElement("div",{className:i.switch},p?t.createElement(Ie,{to:"/login"},t.createElement(fe,{variant:"body2"},u("auth.action.login"))):t.createElement(Ie,{to:"/login?signup=true"},t.createElement(fe,{variant:"body2"},u("auth.action.signup"))))),t.createElement(N,null)))))};Sr.propTypes={children:br.node,classes:br.object,className:br.string,theme:br.object};var Cr=Oe("div")((function(e){return{minWidth:e.theme.spacing(5)}})),Ar=Oe("div")((function(e){var t=e.theme;return{color:t.palette.text?t.palette.text.secondary:"unset","&:active":{color:t.palette.text?t.palette.text.primary:"unset"}}})),Tr=i((function(e,r){var n=F(),o=f();return t.createElement(Ar,null,t.createElement(re,{onClick:function(){return n()},ref:r},t.createElement(Cr,null,t.createElement(ne,null,t.createElement(Qe,null))),o("auth.action.logout")))})),Ir=["name","create"],Lr=function(e){var r=e.name,n=e.create,o=it(e,Ir),a=M(r),i=s(a).permissions;return t.createElement(V,at({},o,{name:r,create:i&&i.some((function(e){return St.includes(e["acl:mode"])}))?n:void 0}))},Rr=["logout","profileResource"],Ur=i((function(e,r){var n=e.onClick,o=e.profileResource,a=e.label,i=e.webId;return t.createElement(q,{ref:r,to:"/".concat(o,"/").concat(encodeURIComponent(i),"/show"),primaryText:a,leftIcon:t.createElement(Xe,null),onClick:n})})),Nr=i((function(e,r){var n=e.onClick,o=e.profileResource,a=e.label,i=e.webId;return t.createElement(q,{ref:r,to:"/".concat(o,"/").concat(encodeURIComponent(i)),primaryText:a,leftIcon:t.createElement(_e,null),onClick:n})})),zr=i((function(e,r){var n=e.onClick,o=e.label;return t.createElement(q,{ref:r,to:"/login",primaryText:o,onClick:n})})),Wr=i((function(e,r){var n=e.onClick,o=e.label;return t.createElement(q,{ref:r,to:"/login?signup=true",primaryText:o,onClick:n})})),Dr=function(e){var r,n,o=e.logout,a=e.profileResource,i=it(e,Rr),s=c().identity,u=f();return t.createElement(B,i,s&&""!==s.id?[t.createElement(Ur,{webId:(null==s||null===(r=s.profileData)||void 0===r?void 0:r.id)||s.id,label:u("auth.action.view_my_profile"),profileResource:a,key:"view"}),t.createElement(Nr,{webId:(null==s||null===(n=s.profileData)||void 0===n?void 0:n.id)||s.id,label:u("auth.action.edit_my_profile"),profileResource:a,key:"edit"}),t.cloneElement(o,{key:"logout"})]:[t.createElement(Wr,{label:u("auth.action.signup"),key:"signup"}),t.createElement(zr,{label:u("auth.action.login"),key:"login"})])};Dr.defaultProps={logout:t.createElement(Tr,null),profileResource:"Person"};var Fr=function(e){var t=c(),n=t.identity,o=t.isLoading,a=u(),i=l(),s=Ae();return r((function(){o||null!=n&&n.id||(a(e||"ra.auth.auth_check_error",{type:"error"}),i("/login?redirect="+encodeURIComponent(s.pathname+s.search)))}),[o,n,i,a,s]),{identity:n,isLoading:o}};var Vr=function(){this.__data__=[],this.size=0};var Br=function(e,t){return e===t||e!=e&&t!=t};var qr=function(e,t){for(var r=e.length;r--;)if(Br(e[r][0],t))return r;return-1},Gr=Array.prototype.splice;var Mr=function(e){var t=this.__data__,r=qr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Gr.call(t,r,1),--this.size,!0)};var Yr=function(e){var t=this.__data__,r=qr(t,e);return r<0?void 0:t[r][1]};var $r=function(e){return qr(this.__data__,e)>-1};var Hr=function(e,t){var r=this.__data__,n=qr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jr.prototype.clear=Vr,Jr.prototype.delete=Mr,Jr.prototype.get=Yr,Jr.prototype.has=$r,Jr.prototype.set=Hr;var Kr=Jr;var Qr=function(){this.__data__=new Kr,this.size=0};var Xr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Zr=function(e){return this.__data__.get(e)};var en=function(e){return this.__data__.has(e)},tn="object"==typeof vt&&vt&&vt.Object===Object&&vt,rn="object"==typeof self&&self&&self.Object===Object&&self,nn=tn||rn||Function("return this")(),on=nn.Symbol,an=Object.prototype,cn=an.hasOwnProperty,sn=an.toString,un=on?on.toStringTag:void 0;var ln=function(e){var t=cn.call(e,un),r=e[un];try{e[un]=void 0;var n=!0}catch(e){}var o=sn.call(e);return n&&(t?e[un]=r:delete e[un]),o},dn=Object.prototype.toString;var pn=function(e){return dn.call(e)},fn=on?on.toStringTag:void 0;var mn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":fn&&fn in Object(e)?ln(e):pn(e)};var hn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var vn,gn=function(e){if(!hn(e))return!1;var t=mn(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},yn=nn["__core-js_shared__"],bn=(vn=/[^.]+$/.exec(yn&&yn.keys&&yn.keys.IE_PROTO||""))?"Symbol(src)_1."+vn:"";var wn=function(e){return!!bn&&bn in e},_n=Function.prototype.toString;var En=function(e){if(null!=e){try{return _n.call(e)}catch(e){}try{return e+""}catch(e){}}return""},xn=/^\[object .+?Constructor\]$/,jn=Function.prototype,kn=Object.prototype,On=jn.toString,Pn=kn.hasOwnProperty,Sn=RegExp("^"+On.call(Pn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Cn=function(e){return!(!hn(e)||wn(e))&&(gn(e)?Sn:xn).test(En(e))};var An=function(e,t){return null==e?void 0:e[t]};var Tn=function(e,t){var r=An(e,t);return Cn(r)?r:void 0},In=Tn(nn,"Map"),Ln=Tn(Object,"create");var Rn=function(){this.__data__=Ln?Ln(null):{},this.size=0};var Un=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nn=Object.prototype.hasOwnProperty;var zn=function(e){var t=this.__data__;if(Ln){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Nn.call(t,e)?t[e]:void 0},Wn=Object.prototype.hasOwnProperty;var Dn=function(e){var t=this.__data__;return Ln?void 0!==t[e]:Wn.call(t,e)};var Fn=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ln&&void 0===t?"__lodash_hash_undefined__":t,this};function Vn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vn.prototype.clear=Rn,Vn.prototype.delete=Un,Vn.prototype.get=zn,Vn.prototype.has=Dn,Vn.prototype.set=Fn;var Bn=Vn;var qn=function(){this.size=0,this.__data__={hash:new Bn,map:new(In||Kr),string:new Bn}};var Gn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Mn=function(e,t){var r=e.__data__;return Gn(t)?r["string"==typeof t?"string":"hash"]:r.map};var Yn=function(e){var t=Mn(this,e).delete(e);return this.size-=t?1:0,t};var $n=function(e){return Mn(this,e).get(e)};var Hn=function(e){return Mn(this,e).has(e)};var Jn=function(e,t){var r=Mn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Kn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kn.prototype.clear=qn,Kn.prototype.delete=Yn,Kn.prototype.get=$n,Kn.prototype.has=Hn,Kn.prototype.set=Jn;var Qn=Kn;var Xn=function(e,t){var r=this.__data__;if(r instanceof Kr){var n=r.__data__;if(!In||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Qn(n)}return r.set(e,t),this.size=r.size,this};function Zn(e){var t=this.__data__=new Kr(e);this.size=t.size}Zn.prototype.clear=Qr,Zn.prototype.delete=Xr,Zn.prototype.get=Zr,Zn.prototype.has=en,Zn.prototype.set=Xn;var eo=Zn;var to=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var ro=function(e){return this.__data__.has(e)};function no(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Qn;++t<r;)this.add(e[t])}no.prototype.add=no.prototype.push=to,no.prototype.has=ro;var oo=no;var ao=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var io=function(e,t){return e.has(t)};var co=function(e,t,r,n,o,a){var i=1&r,c=e.length,s=t.length;if(c!=s&&!(i&&s>c))return!1;var u=a.get(e),l=a.get(t);if(u&&l)return u==t&&l==e;var d=-1,p=!0,f=2&r?new oo:void 0;for(a.set(e,t),a.set(t,e);++d<c;){var m=e[d],h=t[d];if(n)var v=i?n(h,m,d,t,e,a):n(m,h,d,e,t,a);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!ao(t,(function(e,t){if(!io(f,t)&&(m===e||o(m,e,r,n,a)))return f.push(t)}))){p=!1;break}}else if(m!==h&&!o(m,h,r,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p},so=nn.Uint8Array;var uo=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var lo=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},po=on?on.prototype:void 0,fo=po?po.valueOf:void 0;var mo=function(e,t,r,n,o,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new so(e),new so(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Br(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=uo;case"[object Set]":var s=1&n;if(c||(c=lo),e.size!=t.size&&!s)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=co(c(e),c(t),n,o,a,i);return i.delete(e),l;case"[object Symbol]":if(fo)return fo.call(e)==fo.call(t)}return!1};var ho=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},vo=Array.isArray;var go=function(e,t,r){var n=t(e);return vo(e)?n:ho(n,r(e))};var yo=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a};var bo=function(){return[]},wo=Object.prototype.propertyIsEnumerable,_o=Object.getOwnPropertySymbols,Eo=_o?function(e){return null==e?[]:(e=Object(e),yo(_o(e),(function(t){return wo.call(e,t)})))}:bo;var xo=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var jo=function(e){return null!=e&&"object"==typeof e};var ko=function(e){return jo(e)&&"[object Arguments]"==mn(e)},Oo=Object.prototype,Po=Oo.hasOwnProperty,So=Oo.propertyIsEnumerable,Co=ko(function(){return arguments}())?ko:function(e){return jo(e)&&Po.call(e,"callee")&&!So.call(e,"callee")};var Ao=function(){return!1},To=gt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?nn.Buffer:void 0,a=(o?o.isBuffer:void 0)||Ao;e.exports=a})),Io=/^(?:0|[1-9]\d*)$/;var Lo=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Io.test(e))&&e>-1&&e%1==0&&e<t};var Ro=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Uo={};Uo["[object Float32Array]"]=Uo["[object Float64Array]"]=Uo["[object Int8Array]"]=Uo["[object Int16Array]"]=Uo["[object Int32Array]"]=Uo["[object Uint8Array]"]=Uo["[object Uint8ClampedArray]"]=Uo["[object Uint16Array]"]=Uo["[object Uint32Array]"]=!0,Uo["[object Arguments]"]=Uo["[object Array]"]=Uo["[object ArrayBuffer]"]=Uo["[object Boolean]"]=Uo["[object DataView]"]=Uo["[object Date]"]=Uo["[object Error]"]=Uo["[object Function]"]=Uo["[object Map]"]=Uo["[object Number]"]=Uo["[object Object]"]=Uo["[object RegExp]"]=Uo["[object Set]"]=Uo["[object String]"]=Uo["[object WeakMap]"]=!1;var No=function(e){return jo(e)&&Ro(e.length)&&!!Uo[mn(e)]};var zo=function(e){return function(t){return e(t)}},Wo=gt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&tn.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a})),Do=Wo&&Wo.isTypedArray,Fo=Do?zo(Do):No,Vo=Object.prototype.hasOwnProperty;var Bo=function(e,t){var r=vo(e),n=!r&&Co(e),o=!r&&!n&&To(e),a=!r&&!n&&!o&&Fo(e),i=r||n||o||a,c=i?xo(e.length,String):[],s=c.length;for(var u in e)!t&&!Vo.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Lo(u,s))||c.push(u);return c},qo=Object.prototype;var Go=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qo)};var Mo=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Yo=Object.prototype.hasOwnProperty;var $o=function(e){if(!Go(e))return Mo(e);var t=[];for(var r in Object(e))Yo.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Ho=function(e){return null!=e&&Ro(e.length)&&!gn(e)};var Jo=function(e){return Ho(e)?Bo(e):$o(e)};var Ko=function(e){return go(e,Jo,Eo)},Qo=Object.prototype.hasOwnProperty;var Xo=function(e,t,r,n,o,a){var i=1&r,c=Ko(e),s=c.length;if(s!=Ko(t).length&&!i)return!1;for(var u=s;u--;){var l=c[u];if(!(i?l in t:Qo.call(t,l)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var f=!0;a.set(e,t),a.set(t,e);for(var m=i;++u<s;){var h=e[l=c[u]],v=t[l];if(n)var g=i?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===g?h===v||o(h,v,r,n,a):g)){f=!1;break}m||(m="constructor"==l)}if(f&&!m){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return a.delete(e),a.delete(t),f},Zo=Tn(nn,"DataView"),ea=Tn(nn,"Promise"),ta=Tn(nn,"Set"),ra=Tn(nn,"WeakMap"),na=En(Zo),oa=En(In),aa=En(ea),ia=En(ta),ca=En(ra),sa=mn;(Zo&&"[object DataView]"!=sa(new Zo(new ArrayBuffer(1)))||In&&"[object Map]"!=sa(new In)||ea&&"[object Promise]"!=sa(ea.resolve())||ta&&"[object Set]"!=sa(new ta)||ra&&"[object WeakMap]"!=sa(new ra))&&(sa=function(e){var t=mn(e),r="[object Object]"==t?e.constructor:void 0,n=r?En(r):"";if(n)switch(n){case na:return"[object DataView]";case oa:return"[object Map]";case aa:return"[object Promise]";case ia:return"[object Set]";case ca:return"[object WeakMap]"}return t});var ua=sa,la="[object Object]",da=Object.prototype.hasOwnProperty;var pa=function(e,t,r,n,o,a){var i=vo(e),c=vo(t),s=i?"[object Array]":ua(e),u=c?"[object Array]":ua(t),l=(s="[object Arguments]"==s?la:s)==la,d=(u="[object Arguments]"==u?la:u)==la,p=s==u;if(p&&To(e)){if(!To(t))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new eo),i||Fo(e)?co(e,t,r,n,o,a):mo(e,t,s,r,n,o,a);if(!(1&r)){var f=l&&da.call(e,"__wrapped__"),m=d&&da.call(t,"__wrapped__");if(f||m){var h=f?e.value():e,v=m?t.value():t;return a||(a=new eo),o(h,v,r,n,a)}}return!!p&&(a||(a=new eo),Xo(e,t,r,n,o,a))};var fa=function e(t,r,n,o,a){return t===r||(null==t||null==r||!jo(t)&&!jo(r)?t!=t&&r!=r:pa(t,r,n,o,e,a))};var ma=function(e,t){return fa(e,t)},ha={},va={"{}":void 0},ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha,t=JSON.stringify(e),n=W({permissions:va[t]}),a=ct(n,2),i=a[0],c=a[1],s=G(),u=o((function(){return s(e).then((function(e){ma(e,i.permissions)||(va[t]=e,c({permissions:e}))})).catch((function(e){c({error:e})}))}),[t,e,s]);return r((function(){u()}),[t]),et(et({},i),{},{refetch:u})},ya={auth:{dialog:{container_permissions:"Container permissions",resource_permissions:"Resource permissions",login_required:"Login required"},action:{permissions:"Permissions",signup:"Signup",logout:"Logout",login:"Login",view_my_profile:"View my profile",edit_my_profile:"Edit my profile"},right:{resource:{read:"Read",append:"Append",write:"Write",control:"Control"},container:{read:"List",append:"Add",write:"Add",control:"Control"}},agent:{anonymous:"All users",authenticated:"Connected users"},input:{agent_select:"Add an user...",name:"Surname",username:"User ID",email:"Email address",username_or_email:"User ID or email address"},message:{resource_show_forbidden:"You are not allowed to view this resource",resource_edit_forbidden:"You are not allowed to edit this resource",resource_delete_forbidden:"You are not allowed to delete this resource",resource_control_forbidden:"You are not allowed to control this resource",container_create_forbidden:"You are not allowed to create new resource",container_list_forbidden:"You are not allowed to list these resources",user_not_allowed_to_login:"You are not allowed to login with this account",user_email_not_found:"No account found with this email address",user_email_exist:"An account already exist with this email address",username_exist:"An account already exist with this user ID",username_invalid:"This username is invalid. Only lowercase characters, numbers, dots and hyphens are authorized",new_user_created:"Your account has been successfully created",user_connected:"You are now connected",user_disconnected:"You are now disconnected",bad_request:"Bad request (Error message returned by the server: %{error})",account_settings_updated:"Your account settings have been successfully updated",login_to_continue:"Please login to continue",choose_pod_provider:"Please choose a POD provider in the list below. All application data will be saved on your POD."}}},ba={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la ressource",login_required:"Connexion requise"},action:{permissions:"Permissions",signup:"S'inscrire",logout:"Se dconnecter",login:"Se connecter",view_my_profile:"Voir mon profil",edit_my_profile:"diter mon profil"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connects"},input:{agent_select:"Ajouter un utilisateur...",name:"Prnom",username:"Identifiant unique",email:"Adresse e-mail",username_or_email:"Identifiant ou adresse e-mail"},message:{resource_show_forbidden:"Vous n'avez pas la permission de voir cette ressource",resource_edit_forbidden:"Vous n'avez pas la permission d'diter cette ressource",resource_delete_forbidden:"Vous n'avez pas la permission d'effacer cette ressource",resource_control_forbidden:"Vous n'avez pas la permission d'administrer cette ressource",container_create_forbidden:"Vous n'avez pas la permission de crer des ressources",container_list_forbidden:"Vous n'avez pas la permission de voir ces ressources",user_not_allowed_to_login:"Vous n'avez pas le droit de vous connecter avec ce compte",user_email_not_found:"Aucun compte trouv avec cette adresse mail",user_email_exist:"Un compte existe dj avec cette adresse mail",username_exist:"Un compte existe dj avec cet identifiant",username_invalid:"Cet identifiant n'est pas valide. Seuls les lettres minuscules, les chiffres, les points et les tirets sont autoriss",new_user_created:"Votre compte a t cr avec succs",user_connected:"Vous tes maintenant connect",user_disconnected:"Vous tes maintenant dconnect",bad_request:"Requte errone (Message d'erreur renvoy par le serveur: %{error})",account_settings_updated:"Les paramtres de votre compte ont t mis  jour avec succs",login_to_continue:"Veuillez vous connecter pour continuer",choose_pod_provider:"Veuillez choisir un fournisseur de PODs dans la liste ci-dessous. Toutes les donnes de l'application seront enregistres sur votre POD."}}};export{ir as AuthDialog,zt as CreateWithPermissions,Kt as DeleteButtonWithPermissions,Jt as EditActionsWithPermissions,Xt as EditToolbarWithPermissions,Zt as EditWithPermissions,tr as ListActionsWithPermissions,rr as ListWithPermissions,Sr as LocalLoginPage,pr as LoginPage,Tr as LogoutButton,Ht as PermissionsButton,hr as PodLoginPage,Lr as ResourceWithPermissions,nr as ShowActionsWithPermissions,or as ShowWithPermissions,pr as SsoLoginPage,Dr as UserMenu,Ot as authProvider,ya as englishMessages,ba as frenchMessages,Mt as useAgents,Fr as useCheckAuthenticated,Nt as useCheckPermissions,ga as usePermissionsWithRefetch,_r as useSignup};
//# sourceMappingURL=index.es.js.map
