import*as e from"react";import t,{useEffect as r,useState as n,useCallback as a,useMemo as o,forwardRef as i}from"react";import{useGetIdentity as c,usePermissionsOptimized as s,useNotify as u,useRedirect as l,Create as d,CreateActions as p,useTranslate as f,useGetList as m,useDataProvider as h,Loading as v,Error as g,useAuthProvider as y,Button as b,TopToolbar as w,ListButton as _,ShowButton as E,useRecordContext as x,DeleteButton as k,Toolbar as j,SaveButton as O,Edit as P,useResourceDefinition as S,CreateButton as C,ExportButton as A,List as I,EditButton as T,Show as N,useLogin as L,Notification as R,useLocale as U,useSafeSetState as z,LoginForm as W,useLogout as D,Resource as F,UserMenu as V,MenuItemLink as B,useGetPermissions as q}from"react-admin";import{useCreateContainer as G}from"@semapps/semantic-data-provider";import Y from"@material-ui/icons/Share";import{makeStyles as M,TextField as $,List as H,ListItem as J,ListItemAvatar as K,Avatar as Q,ListItemText as X,ListItemSecondaryAction as Z,IconButton as ee,Menu as te,MenuItem as re,ListItemIcon as ne,Dialog as ae,DialogTitle as oe,DialogContent as ie,DialogActions as ce,useMediaQuery as se,DialogContentText as ue,Button as le,Card as de,Typography as pe,CardActions as fe,Box as me,Divider as he,createTheme as ve,ThemeProvider as ge,CircularProgress as ye}from"@material-ui/core";import be from"@material-ui/lab/Autocomplete";import we from"@material-ui/icons/Person";import _e from"@material-ui/icons/Edit";import Ee from"@material-ui/icons/Check";import xe from"@material-ui/icons/Public";import ke from"@material-ui/icons/VpnLock";import je from"@material-ui/icons/Group";import{ThemeProvider as Oe}from"@material-ui/styles";import{makeStyles as Pe,createTheme as Se}from"@material-ui/core/styles";import Ce from"@material-ui/icons/Lock";import Ae from"@material-ui/icons/Storage";import Ie from"classnames";import{useLocation as Te,Redirect as Ne,Link as Le}from"react-router-dom";import{Form as Re,Field as Ue}from"react-final-form";import ze from"@material-ui/icons/PowerSettingsNew";import We from"@material-ui/icons/AccountCircle";function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Ve=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new x(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function p(){}function f(){}var m={};c(m,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var s=u(e[a],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=f,c(g,"constructor",f),c(f,"constructor",p),p.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Be(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Be(o,n,a,i,c,"next",e)}function c(e){Be(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(){return(Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Me(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qe(e){this.message=e}Qe.prototype=new Error,Qe.prototype.name="InvalidCharacterError";var Xe="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Qe("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,a=0,o=0,i="";n=t.charAt(o++);~n&&(r=a%4?64*r+n:n,a++%4)?i+=String.fromCharCode(255&r>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function Ze(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Xe(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return Xe(t)}}function et(e){this.message=e}function tt(e,t){if("string"!=typeof e)throw new et("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(Ze(e.split(".")[r]))}catch(e){throw new et("Invalid token specified: "+e.message)}}et.prototype=new Error,et.prototype.name="InvalidTokenError";var rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function nt(e,t){return e(t={exports:{}},t.exports),t.exports}var at,ot,it=nt((function(e){var t,r;t=rt,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var a=e[n];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(n>0&&(a=a.replace(/^[\/]+/,"")),a=n<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var o=t.join("/"),i=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),ct=function(e){return e?Array.isArray(e)?e:[e]:void 0},st=function(e){var t=new URL(e);return it(t.origin,"_acl",t.pathname)},ut=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},lt=function(){var e=qe(Ve().mark((function e(t){var r,n;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataServers();case 2:if(r=e.sent,n=Object.values(r).find((function(e){return!0===e.authServer}))){e.next=6;break}throw new Error("Could not find a server with authServer: true. Check your dataServers config.");case 6:return e.abrupt("return",n.pod?new URL(n.baseUrl).origin:n.baseUrl);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=["username","email","password","domain"],pt="sso",ft="local",mt="pod",ht=function(e){var t,r,n,a,o,i,c,s,u,l,d,p,f=e.dataProvider,m=e.authType,h=e.allowAnonymous,v=void 0===h||h,g=e.checkUser,y=e.checkPermissions,b=void 0!==y&&y;if(![pt,ft,mt].includes(m))throw new Error("The authType parameter is missing from the auth provider");return{login:(p=qe(Ve().mark((function e(t){var r,n,a,o,i,c,s;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(f);case 2:if(r=e.sent,m!==ft){e.next=20;break}return n=t.username,a=t.password,e.prev=5,e.next=8,f.fetch(it(r,"auth/login"),{method:"POST",body:JSON.stringify({username:n.trim(),password:a.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 8:o=e.sent,i=o.json,c=i.token,localStorage.setItem("token",c),window.location.reload(),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),new Error("ra.auth.sign_in_error");case 18:e.next=23;break;case 20:s=new URL(window.location.href).origin+"/login?login=true",t.redirect&&(s+="&redirect="+encodeURIComponent(t.redirect)),window.location.href=it(r,"auth?redirectUrl="+encodeURIComponent(s));case 23:case"end":return e.stop()}}),e,null,[[5,15]])}))),function(e){return p.apply(this,arguments)}),signup:(d=qe(Ve().mark((function e(t){var r,n,a,o,i,c,s,u,l,d,p;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(f);case 2:if(r=e.sent,m!==ft){e.next=33;break}return n=t.username,a=t.email,o=t.password,t.domain,i=Me(t,dt),e.prev=5,e.next=8,f.fetch(it(r,"auth/signup"),{method:"POST",body:JSON.stringify(Fe({username:n.trim(),email:a.trim(),password:o.trim()},i)),headers:new Headers({"Content-Type":"application/json"})});case 8:return c=e.sent,s=c.json,u=s.token,localStorage.setItem("token",u),l=tt(u),d=l.webId,e.abrupt("return",d);case 16:if(e.prev=16,e.t0=e.catch(5),"email.already.exists"!==e.t0.message){e.next=22;break}throw new Error("auth.message.user_email_exist");case 22:if("username.already.exists"!==e.t0.message){e.next=26;break}throw new Error("auth.message.username_exist");case 26:if("username.invalid"!==e.t0.message){e.next=30;break}throw new Error("auth.message.username_invalid");case 30:throw new Error(e.t0.message||"ra.auth.sign_in_error");case 31:e.next=35;break;case 33:p=new URL(window.location.href).origin+"/login?login=true",window.location.href=it(r,"auth?redirectUrl="+encodeURIComponent(p));case 35:case"end":return e.stop()}}),e,null,[[5,16]])}))),function(e){return d.apply(this,arguments)}),logout:(l=qe(Ve().mark((function e(){var t,r,n,a,o;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=m,e.next=e.t0===ft?3:e.t0===pt?7:e.t0===mt?13:18;break;case 3:return localStorage.clear(),window.location.reload(),window.location.href="/",e.abrupt("break",18);case 7:return e.next=9,lt(f);case 9:return t=e.sent,r=new URL(window.location.href).origin,window.location.href=it(t,v?"auth/logout?redirectUrl="+encodeURIComponent(it(r,"login")+"?logout=true"):"auth/logout?redirectUrl="+encodeURIComponent(it(r,"login"))),e.abrupt("break",18);case 13:return n=localStorage.getItem("token"),a=tt(n),o=a.webId,localStorage.clear(),window.location.href=it(o,"openApp")+"?type="+encodeURIComponent("http://activitypods.org/ns/core#FrontAppRegistration"),e.abrupt("break",18);case 18:return e.abrupt("return","/");case 19:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkAuth:(u=qe(Ve().mark((function e(){return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")||v){e.next=3;break}throw new Error;case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),checkUser:function(e){return!g||g(e)},checkError:function(e){return Promise.resolve()},getPermissions:(s=qe(Ve().mark((function e(t){var r,n,a;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return",!0);case 2:if(t&&t.startsWith("http")){e.next=4;break}throw new Error("The first parameter passed to getPermissions must be an URL");case 4:return r=st(t),e.prev=5,e.next=8,f.fetch(r);case 8:return n=e.sent,a=n.json,e.abrupt("return",a["@graph"]);case 13:return e.prev=13,e.t0=e.catch(5),console.warn("Could not fetch ACL URI ".concat(t)),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,13]])}))),function(e){return s.apply(this,arguments)}),addPermission:(c=qe(Ve().mark((function e(t,r,n,a){var o,i,c;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to addPermission must be an URL");case 2:return i=st(t),Ge(o={"@id":"#"+a.replace("acl:",""),"@type":"acl:Authorization"},n,r),Ge(o,"acl:accessTo",t),Ge(o,"acl:mode",a),c=o,e.next=6,f.fetch(i,{method:"PATCH",body:JSON.stringify({"@context":ut(i),"@graph":[c]})});case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return c.apply(this,arguments)}),removePermission:(i=qe(Ve().mark((function e(t,r,n,a){var o,i,c,s;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to removePermission must be an URL");case 2:return o=st(t),e.next=5,f.fetch(o);case 5:return i=e.sent,c=i.json,s=c["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=ct(e["acl:mode"]),o=ct(e[n]);return a&&t.includes(a)&&o&&o.includes(r)&&(o=o.filter((function(e){return e!==r}))),Fe(Fe({},e),{},Ge({},n,o))})),e.next=10,f.fetch(o,{method:"PUT",body:JSON.stringify({"@context":ut(o),"@graph":s})});case 10:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return i.apply(this,arguments)}),getIdentity:(o=qe(Ve().mark((function e(){var t,r,n,a,o,i,c;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=17;break}return r=tt(t),n=r.webId,e.next=5,f.fetch(n);case 5:if(a=e.sent,!(o=a.json).url){e.next=13;break}return e.next=10,f.fetch(o.url);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:return i=e.t0,c=i.json,e.abrupt("return",{id:n,fullName:(null==c?void 0:c["vcard:given-name"])||(null==c?void 0:c["pair:label"])||o["foaf:name"],profileData:c,webIdData:o});case 17:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),resetPassword:(a=qe(Ve().mark((function e(t){var r,n;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,lt(f);case 3:return n=e.sent,e.prev=4,e.next=7,f.fetch(it(n,"auth/reset_password"),{method:"POST",body:JSON.stringify({email:r.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("app.notification.reset_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return a.apply(this,arguments)}),setNewPassword:(n=qe(Ve().mark((function e(t){var r,n,a,o;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.token,a=t.password,e.next=3,lt(f);case 3:return o=e.sent,e.prev=4,e.next=7,f.fetch(it(o,"auth/new_password"),{method:"POST",body:JSON.stringify({email:r.trim(),token:n,password:a}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("app.notification.new_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),getAccountSettings:(r=qe(Ve().mark((function e(t){var r,n,a;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(f);case 2:return r=e.sent,e.prev=3,e.next=6,f.fetch(it(r,"auth/account"));case 6:return n=e.sent,a=n.json,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(3),new Error("app.notification.get_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e){return r.apply(this,arguments)}),updateAccountSettings:(t=qe(Ve().mark((function e(t){var r,n,a,o;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(f);case 2:return r=e.sent,e.prev=3,n=t.email,a=t.currentPassword,o=t.newPassword,e.next=7,f.fetch(it(r,"auth/account"),{method:"POST",body:JSON.stringify({currentPassword:a,email:n.trim(),newPassword:o}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"auth.account.invalid_password"!==e.t0.message){e.next=13;break}throw new Error("app.notification.invalid_password");case 13:throw new Error("app.notification.update_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}},vt="acl:agentClass",gt=["acl:Append","acl:Write","acl:Control"],yt=["acl:Append","acl:Write","acl:Control"],bt=["acl:Write","acl:Control"],wt=["acl:Control"],_t={show:["acl:Read","acl:Append","acl:Write","acl:Control"],list:["acl:Read","acl:Append","acl:Write","acl:Control"],create:gt,edit:yt,delete:bt,control:wt},Et={show:"auth.message.resource_show_forbidden",edit:"auth.message.resource_edit_forbidden",delete:"auth.message.resource_delete_forbidden",control:"auth.message.resource_control_forbidden",list:"auth.message.container_list_forbidden",create:"auth.message.container_create_forbidden"},xt=(Ge(at={},"acl:Read","auth.right.resource.read"),Ge(at,"acl:Append","auth.right.resource.append"),Ge(at,"acl:Write","auth.right.resource.write"),Ge(at,"acl:Control","auth.right.resource.control"),at),kt=(Ge(ot={},"acl:Read","auth.right.container.read"),Ge(ot,"acl:Write","auth.right.container.write"),Ge(ot,"acl:Control","auth.right.container.control"),ot),jt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",a=c(),o=a.identity,i=a.loading,d=s(e),p=d.permissions,f=u(),m=l();return r((function(){!i&&o&&p&&!p.some((function(e){return _t[t].includes(e["acl:mode"])}))&&(f(Et[t],"error"),m(n))}),[p,o,m,f,i]),p},Ot=function(e){var r=G(e.resource);return jt(r,"create"),t.createElement(d,e)};Ot.defaultProps={actions:t.createElement(p,null)};var Pt=M((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),St=function(e){var a=e.agents,o=e.addPermission,i=Pt(),c=f(),s=$e(n(null),2),u=s[0],l=s[1],d=$e(n(""),2),p=d[0],h=d[1],v=$e(n([]),2),g=v[0],y=v[1],b=m("Person",{page:1,perPage:100},{field:"pair:label",order:"ASC"},{q:p},{enabled:p.length>0}),w=b.ids,_=b.data;return r((function(){y(w.length>0?Object.values(_):[])}),[w,_]),t.createElement(be,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(a).includes(e.id)}))},options:g,noOptionsText:c("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:u,onChange:function(e,t){o(t.id||t["@id"],"acl:agent","acl:Read"),l(null),h(""),y([])},onInputChange:function(e,t){h(t)},renderInput:function(e){return t.createElement($,Ye({},e,{label:c("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(e){return t.createElement(H,{dense:!0,className:i.list},t.createElement(J,{button:!0},t.createElement(K,null,t.createElement(Q,{src:e.image},t.createElement(we,null))),t.createElement(X,{primary:e["pair:label"]})))}})},Ct=function(e){var r=e.agent;switch(r.predicate){case vt:return"foaf:Agent"===r.id?t.createElement(xe,null):t.createElement(ke,null);case"acl:agent":return t.createElement(we,null);case"acl:agentGroup":return t.createElement(je,null);default:throw new Error("Unknown agent predicate: "+r.predicate)}},At=M((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),It=function(e){var a=e.isContainer,o=e.agent,i=e.addPermission,c=e.removePermission,s=At(),u=f(),l=h(),d=$e(t.useState(null),2),p=d[0],m=d[1],y=$e(n(),2),b=y[0],w=y[1],_=$e(n(!0),2),E=_[0],x=_[1],k=$e(n(),2),j=k[0],O=k[1];if(r((function(){"acl:agent"===o.predicate?l.getOne("Person",{id:o.id}).then((function(e){var t=e.data;w(t),x(!1)})).catch((function(e){O(e),x(!1)})):x(!1)}),[o.id,o.predicate]),"acl:agentGroup"===o.predicate)return null;var P=function(){return m(null)},S=a?kt:xt;return E?t.createElement(v,null):j?t.createElement(g,null):t.createElement(J,{className:s.listItem},t.createElement(K,null,t.createElement(Q,{src:null==b?void 0:b.image},t.createElement(Ct,{agent:o}))),t.createElement(X,{className:s.primaryText,primary:b?b["pair:label"]:u("foaf:Agent"===o.id?"auth.agent.anonymous":"auth.agent.authenticated")}),t.createElement(X,{className:s.secondaryText,primary:o.permissions&&o.permissions.map((function(e){return u(S[e])})).join(", ")}),t.createElement(Z,null,t.createElement(ee,{onClick:function(e){return m(e.currentTarget)}},t.createElement(_e,null)),t.createElement(te,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:P},Object.entries(S).map((function(e){var r=$e(e,2),n=r[0],a=r[1],s=o.permissions&&o.permissions.includes(n);return t.createElement(re,{key:n,onClick:function(){s?c(o.id,o.predicate,n):i(o.id,o.predicate,n),P()}},t.createElement(ne,null,s?t.createElement(Ee,null):null),t.createElement(X,{primary:u(a)}))})))))},Tt=M((function(e){return{list:{width:"100%",maxWidth:"100%",backgroundColor:e.palette.background.paper}}})),Nt=function(e){var r=e.isContainer,n=e.agents,a=e.addPermission,o=e.removePermission,i=Tt();return t.createElement(H,{dense:!0,className:i.list},Object.entries(n).map((function(e){var n=$e(e,2),i=n[0],c=n[1];return t.createElement(It,{key:i,isContainer:r,agent:c,addPermission:a,removePermission:o})})))},Lt=function(e){var t=s(e).permissions,o=y(),i=$e(n({}),2),c=i[0],u=i[1];r((function(){var e,r=(Ge(e={},"foaf:Agent",{id:"foaf:Agent",predicate:vt,permissions:[]}),Ge(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:vt,permissions:[]}),e),n=function(e,t,n){r[e]?r[e].permissions.push(n):r[e]={id:e,predicate:t,permissions:[n]}};if(t){var a,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Je(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}(t);try{var i=function(){var e=a.value;e[vt]&&ct(e[vt]).forEach((function(t){return n(t,vt,e["acl:mode"])})),e["acl:agent"]&&ct(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&ct(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(o.s();!(a=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}u(r)}}),[t]);var l=a((function(t,r,n){var a,i=Fe({},c);u(Fe(Fe({},c),{},Ge({},t,{id:t,predicate:r,permissions:c[t]?[].concat(He(null===(a=c[t])||void 0===a?void 0:a.permissions),[n]):[n]}))),o.addPermission(e,t,r,n).catch((function(e){u(i)}))}),[c,u,e,o]),d=a((function(t,r,n){var a=Fe({},c);u(Object.fromEntries(Object.entries(c).map((function(e){var r=$e(e,2),a=r[0],o=r[1];return o.id===t&&(o.permissions=o.permissions.filter((function(e){return e!==n}))),[a,o]})).filter((function(e){var t=$e(e,2);t[0];var r=t[1];return r.predicate===vt||r.permissions.length>0})))),o.removePermission(e,t,r,n).catch((function(e){u(a)}))}),[c,u,e,o]);return{agents:c,addPermission:l,removePermission:d}},Rt=M((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Ut=function(e){var r=e.open,n=e.onClose,a=e.uri,o=e.isContainer,i=Rt(),c=f(),s=Lt(a),u=s.agents,l=s.addPermission,d=s.removePermission;return t.createElement(ae,{fullWidth:!0,open:r,onClose:n},t.createElement(oe,{className:i.title},c(o?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),t.createElement(ie,{className:i.addForm},t.createElement(St,{agents:u,addPermission:l})),t.createElement(ie,{className:i.listForm},t.createElement(Nt,{isContainer:o,agents:u,addPermission:l,removePermission:d})),t.createElement(ce,{className:i.actions},t.createElement(b,{label:"ra.action.close",variant:"text",onClick:n})))},zt=function(e){var r=e.record,a=e.resource,o=$e(n(!1),2),i=o[0],c=o[1],s=G(a),u=!!a,l=u?s:r.id||r["@id"];return t.createElement(t.Fragment,null,t.createElement(b,{label:"auth.action.permissions",onClick:function(){return c(!0)}},t.createElement(Y,null)),t.createElement(Ut,{uri:l,isContainer:!!u,open:i,onClose:function(){return c(!1)}}))},Wt=function(e){var r=e.basePath,n=e.record,a=e.hasList,o=e.hasShow,i=s(null==n?void 0:n.id).permissions;return t.createElement(w,null,a&&t.createElement(_,{basePath:r,record:n}),o&&t.createElement(E,{basePath:r,record:n}),!!i&&i.some((function(e){return wt.includes(e["acl:mode"])}))&&t.createElement(zt,{basePath:r,record:n}))},Dt=function(e){var r=x(),n=s(null==r?void 0:r.id).permissions;return n&&n.some((function(e){return bt.includes(e["acl:mode"])}))?t.createElement(k,e):null},Ft=M((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),Vt=function(e){var r=Ft();return t.createElement(j,Ye({},e,{className:r.toolbar}),t.createElement(O,null),t.createElement(Dt,{undoable:!1}),"}")},Bt=function(e){return jt(e.id,"edit"),t.createElement(P,e,t.cloneElement(e.children,Fe({toolbar:t.createElement(Vt,null)},e.children.props)))};Bt.defaultProps={actions:t.createElement(Wt,null)};var qt=["bulkActions","basePath","currentSort","displayedFilters","exporter","filters","filterValues","onUnselectItems","resource","selectedIds","showFilter","total"],Gt=function(e){var r=e.bulkActions,n=e.basePath,a=e.currentSort,o=e.displayedFilters,i=e.exporter,c=e.filters,u=e.filterValues,l=e.onUnselectItems,d=e.resource,p=e.selectedIds,f=e.showFilter,m=e.total,h=Me(e,qt),v=se((function(e){return e.breakpoints.down("xs")})),g=S(h),y=G(d),b=s(y).permissions;return t.createElement(w,null,c&&t.cloneElement(c,{resource:d,showFilter:f,displayedFilters:o,filterValues:u,context:"button"}),g.hasCreate&&b&&b.some((function(e){return gt.includes(e["acl:mode"])}))&&t.createElement(C,{basePath:n}),b&&b.some((function(e){return wt.includes(e["acl:mode"])}))&&t.createElement(zt,{basePath:n,record:y}),!v&&!1!==i&&t.createElement(A,{disabled:0===m,resource:d,sort:a,filter:u,exporter:i}),r&&t.cloneElement(r,{basePath:n,filterValues:u,resource:d,selectedIds:p,onUnselectItems:l}))},Yt=function(e){return t.createElement(I,e)};Yt.defaultProps={actions:t.createElement(Gt,null)};var Mt=function(e){var r=e.basePath,n=e.record,a=e.hasList,o=e.hasEdit,i=s(null==n?void 0:n.id).permissions;return t.createElement(w,null,a&&t.createElement(_,{basePath:r,record:n}),o&&i&&i.some((function(e){return yt.includes(e["acl:mode"])}))&&t.createElement(T,{basePath:r,record:n}),i&&i.some((function(e){return wt.includes(e["acl:mode"])}))&&t.createElement(zt,{basePath:r,record:n}))},$t=function(e){return jt(e.id,"edit"),t.createElement(N,e)};$t.defaultProps={actions:t.createElement(Mt,null)};var Ht=["open","onClose","title","message","redirect"],Jt=function(e){var r=e.open,n=e.onClose,a=e.title,o=e.message,i=e.redirect,c=Me(e,Ht),s=L(),u=f();return t.createElement(ae,Ye({open:r,onClose:n},c),t.createElement(oe,null,u(a)),t.createElement(ie,null,t.createElement(ue,null,u(o))),t.createElement(ce,null,t.createElement(le,{onClick:n},u("ra.action.cancel")),t.createElement(le,{onClick:function(){return s({redirect:i||window.location.pathname+window.location.search})},color:"primary",variant:"contained"},u("auth.action.login"))))};Jt.defaultProps={title:"auth.dialog.login_required",message:"auth.message.login_to_continue"};var Kt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Qt=Pe((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",backgroundColor:e.palette.grey[300]},text:{maxWidth:300,textAlign:"center",padding:"4px 8px 8px"},card:{minWidth:300,marginTop:"6em"},lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]}}})),Xt=function(e){var n=e.theme,a=e.history,o=e.location,i=e.buttons,c=e.userResource,s=e.propertiesExist,l=e.text,d=Qt(),p=u(),f=L(),m=h(),v=y();return r((function(){qe(Ve().mark((function e(){var t;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=new URLSearchParams(o.search)).has("login")){e.next=8;break}if(!t.has("error")){e.next=6;break}"registration.not-allowed"===t.get("error")?p("auth.message.user_email_not_found","error"):p("auth.message.bad_request","error",{error:t.get("error")}),e.next=8;break;case 6:if(!t.has("token")){e.next=8;break}return e.delegateYield(Ve().mark((function e(){var r,n,o,i,u,l,d;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get("token"),n=tt(r),o=n.webId,localStorage.setItem("token",r),e.next=5,m.getOne(c,{id:o});case 5:if(u=e.sent,i=u.data,!(s.length>0)){e.next=20;break}l=s.every((function(e){return i[e]}));case 9:if(l){e.next=20;break}return console.log("Waiting for all properties to have been created",s),e.next=13,Kt(500);case 13:return e.next=15,m.getOne(c,{id:o});case 15:d=e.sent,i=d.data,l=s.every((function(e){return i[e]})),e.next=9;break;case 20:v.checkUser(i)?t.has("redirect")?(p("auth.message.user_connected","info"),a.push(t.get("redirect"))):t.has("new")&&"true"===t.get("new")?(p("auth.message.new_user_created","info"),a.push("/"+c+"/"+encodeURIComponent(o)+"/edit")):(p("auth.message.user_connected","info"),a.push("/")):(localStorage.removeItem("token"),p("auth.message.user_not_allowed_to_login","error"),a.replace("/login"));case 21:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:t.has("logout")&&(localStorage.clear(),p("auth.message.user_disconnected","info"),a.push("/"));case 9:case"end":return e.stop()}}),e)})))()}),[o.search]),t.createElement(Oe,{theme:Se(n)},t.createElement("div",{className:d.main},t.createElement(de,{className:d.card},t.createElement("div",{className:d.lockIconAvatar},t.createElement(Q,{className:d.lockIcon},t.createElement(Ce,null))),l&&t.createElement(pe,{variant:"body2",className:d.text},l),i&&i.map((function(e,r){return t.createElement(fe,{key:r},t.cloneElement(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return f({},"/login")}}))})))),t.createElement(R,null))};Xt.defaultProps={propertiesExist:[],buttons:[t.createElement(le,{startIcon:t.createElement(Q,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var Zt=M((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.main}},text:{textAlign:"center",padding:"4px 8px 8px"},card:Ge({minWidth:300,maxWidth:350,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]},list:{paddingTop:0,paddingBottom:0},listItem:{paddingTop:5,paddingBottom:5}}})),er=function(e){var a=e.history,o=e.location,i=e.text,c=e.customPodProviders,s=Zt(),l=u(),d=U(),p=f(),m=y(),v=h(),g=$e(n(c||[]),2),b=g[0],w=g[1],_=new URLSearchParams(o.search);return r((function(){qe(Ve().mark((function e(){var t,r,n;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==b.length){e.next=13;break}return e.next=3,fetch("https://data.activitypods.org/pod-providers",{headers:{Accept:"application/ld+json"}});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,n=r["ldp:contains"].filter((function(e){return Array.isArray(e["apods:locales"])?e["apods:locales"].includes(d):e["apods:locales"]===d})),w(n),e.next=13;break;case 12:l("auth.message.pod_providers_not_loaded","error");case 13:case"end":return e.stop()}}),e)})))()}),[b,w,l,d]),r((function(){qe(Ve().mark((function e(){var t,r,n,o,i;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.has("token")){e.next=16;break}return t=_.get("token"),r=tt(t),n=r.webId,e.next=5,fetch(n,{headers:{Accept:"application/json"}});case 5:if((o=e.sent).ok){e.next=10;break}l("auth.message.unable_to_fetch_user_data","error"),e.next=14;break;case 10:return e.next=12,o.json();case 12:i=e.sent,m.checkUser(i)?(localStorage.setItem("token",t),l("auth.message.user_connected","info"),window.location.reload(),window.location.href="/?addUser=true"):(l("auth.message.user_not_allowed_to_login","error"),a.replace("/login"));case 14:e.next=17;break;case 16:_.has("logout")&&(localStorage.clear(),l("auth.message.user_disconnected","info"),a.push("/"));case 17:case"end":return e.stop()}}),e)})))()}),[_,v]),_.has("token")||_.has("addUser")||_.has("logout")?null:t.createElement(me,{display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(de,{className:s.card},t.createElement("div",{className:s.lockIconAvatar},t.createElement(Q,{className:s.lockIcon},t.createElement(Ce,null))),t.createElement(me,{pl:2,pr:2},t.createElement(pe,{variant:"body2",className:s.text},i||p("auth.message.choose_pod_provider"))),t.createElement(me,{m:2},t.createElement(H,{className:s.list},b.map((function(e,r){var n=new URL("/auth",(e["apods:domainName"].includes(":")?"http://":"https://")+e["apods:domainName"]);return _.has("signup")&&n.searchParams.set("signup","true"),n.searchParams.set("redirect",window.location.href),t.createElement(t.Fragment,{key:r},t.createElement(he,null),t.createElement(J,{key:r,button:!0,onClick:function(){return window.location.href=n.toString()},className:s.listItem},t.createElement(K,null,t.createElement(Q,null,t.createElement(Ae,null))),t.createElement(X,{primary:e["apods:domainName"],secondary:e["apods:area"]})))}))))))},tr=function(e){var r=o((function(){return ve(e.theme)}),[e.theme]);return t.createElement(ge,{theme:r},t.createElement(er,e),t.createElement(R,null))};function rr(){}function nr(){}nr.resetWarningCache=rr;var ar=function(){function e(e,t,r,n,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:nr,resetWarningCache:rr};return r.PropTypes=r,r},or=nt((function(e){e.exports=ar()})),ir=function(){var e=y();return a((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signup(t)}),[e])},cr=["meta","input"],sr=M((function(e){return{form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},button:{width:"100%"},icon:{marginRight:e.spacing(1)}}})),ur=function(t){var r=t.meta,n=r.touched,a=r.error,o=t.input,i=Me(t,cr);return e.createElement($,Ye({error:!(!n||!a),helperText:n&&a},o,i,{fullWidth:!0}))},lr=function(t){var r=t.redirectTo,n=t.delayBeforeRedirect,a=$e(z(!1),2),o=a[0],i=a[1],c=ir(),s=f(),l=u(),d=sr(),p=Te(),m=new URLSearchParams(p.search);return e.createElement(Re,{onSubmit:function(e){i(!0),c(e).then((function(e){n?setTimeout((function(){window.location.reload(),window.location.href=r||"/",i(!1)}),n):(window.location.reload(),window.location.href=r||"/",i(!1)),l("auth.message.new_user_created","info")})).catch((function(e){i(!1),l("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error","warning",{_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},validate:function(e){var t={email:void 0,password:void 0};return e.email||(t.email=s("ra.validation.required")),e.password||(t.password=s("ra.validation.required")),t},initialValues:{email:m.get("email")},render:function(t){var r=t.handleSubmit;return e.createElement("form",{onSubmit:r,noValidate:!0},e.createElement("div",{className:d.form},e.createElement("div",{className:d.input},e.createElement(Ue,{id:"username",name:"username",component:ur,label:s("auth.input.username"),disabled:o})),e.createElement("div",{className:d.input},e.createElement(Ue,{id:"email",name:"email",component:ur,label:s("auth.input.email"),disabled:o||m.has("email")&&m.has("force-email")})),e.createElement("div",{className:d.input},e.createElement(Ue,{id:"password",name:"password",component:ur,label:s("ra.auth.password"),type:"password",disabled:o}))),e.createElement(fe,null,e.createElement(le,{variant:"contained",type:"submit",color:"primary",disabled:o,className:d.button},o&&e.createElement(ye,{className:d.icon,size:18,thickness:2}),s("auth.action.signup"))))}})};lr.propTypes={redirectTo:or.string};var dr=["theme","title","classes","className"],pr=M((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},card:{minWidth:300,marginTop:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary[500]},switch:{margin:"1em",display:"flex",justifyContent:"center"}}})),fr=function(e){var r=e.theme;e.title,e.classes;var n=e.className,a=Me(e,dr),i=pr(e),s=Te(),u=f(),l=o((function(){return ve(r)}),[r]),d=new URLSearchParams(s.search),p=d.has("signup"),m=d.get("redirect"),h=c(),v=h.identity;return h.loading?null:null!=v&&v.id?t.createElement(Ne,{to:m||"/"}):t.createElement(ge,{theme:l},t.createElement("div",Ye({className:Ie(i.main,n)},a),t.createElement(de,{className:i.card},t.createElement("div",{className:i.avatar},t.createElement(Q,{className:i.icon},t.createElement(Ce,null))),p?t.createElement(lr,{redirectTo:m,delayBeforeRedirect:3e3}):t.createElement(W,{redirectTo:m}),t.createElement("div",{className:i.switch},p?t.createElement(Le,{to:"/login"},t.createElement(pe,{variant:"body2"},u("auth.action.login"))):t.createElement(Le,{to:"/login?signup=true"},t.createElement(pe,{variant:"body2"},u("auth.action.signup"))))),t.createElement(R,null)))};fr.propTypes={children:or.node,classes:or.object,className:or.string,theme:or.object};var mr=M((function(e){return{root:{color:e.palette.text.secondary},active:{color:e.palette.text.primary},icon:{minWidth:e.spacing(5)}}})),hr=i((function(e,r){var n=mr(),a=D(),o=f();return t.createElement(re,{onClick:function(){return a()},ref:r,className:n.root,activeClassName:n.active},t.createElement(ne,{className:n.icon},t.createElement(ze,null)),o("auth.action.logout"))})),vr=["name","create"],gr=function(e){var r=e.name,n=e.create,a=Me(e,vr),o=G(r),i=s(o).permissions;return t.createElement(F,Ye({},a,{name:r,create:i&&i.some((function(e){return gt.includes(e["acl:mode"])}))?n:void 0}))},yr=["logout","profileResource"],br=i((function(e,r){var n=e.onClick,a=e.profileResource,o=e.label,i=e.webId;return t.createElement(B,{ref:r,to:"/".concat(a,"/").concat(encodeURIComponent(i),"/show"),primaryText:o,leftIcon:t.createElement(We,null),onClick:n})})),wr=i((function(e,r){var n=e.onClick,a=e.profileResource,o=e.label,i=e.webId;return t.createElement(B,{ref:r,to:"/".concat(a,"/").concat(encodeURIComponent(i)),primaryText:o,leftIcon:t.createElement(_e,null),onClick:n})})),_r=i((function(e,r){var n=e.onClick,a=e.label;return t.createElement(B,{ref:r,to:"/login",primaryText:a,onClick:n})})),Er=i((function(e,r){var n=e.onClick,a=e.label;return t.createElement(B,{ref:r,to:"/login?signup=true",primaryText:a,onClick:n})})),xr=function(e){var r,n,a=e.logout,o=e.profileResource,i=Me(e,yr),s=c().identity,u=f();return t.createElement(V,i,s&&""!==s.id?[t.createElement(br,{webId:(null==s||null===(r=s.profileData)||void 0===r?void 0:r.id)||s.id,label:u("auth.action.view_my_profile"),profileResource:o,key:"view"}),t.createElement(wr,{webId:(null==s||null===(n=s.profileData)||void 0===n?void 0:n.id)||s.id,label:u("auth.action.edit_my_profile"),profileResource:o,key:"edit"}),t.cloneElement(a,{key:"logout"})]:[t.createElement(Er,{label:u("auth.action.signup"),key:"signup"}),t.createElement(_r,{label:u("auth.action.login"),key:"login"})])};xr.defaultProps={profileResource:"Person"};var kr=function(e){var t=c(),n=t.identity,a=t.loading,o=u(),i=l(),s=Te();return r((function(){a||null!=n&&n.id||(o(e||"ra.auth.auth_check_error","error"),i("/login?redirect="+encodeURIComponent(s.pathname+s.search)))}),[a,n,i,o,s]),{identity:n,loading:a}};var jr=function(){this.__data__=[],this.size=0};var Or=function(e,t){return e===t||e!=e&&t!=t};var Pr=function(e,t){for(var r=e.length;r--;)if(Or(e[r][0],t))return r;return-1},Sr=Array.prototype.splice;var Cr=function(e){var t=this.__data__,r=Pr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Sr.call(t,r,1),--this.size,!0)};var Ar=function(e){var t=this.__data__,r=Pr(t,e);return r<0?void 0:t[r][1]};var Ir=function(e){return Pr(this.__data__,e)>-1};var Tr=function(e,t){var r=this.__data__,n=Pr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Nr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nr.prototype.clear=jr,Nr.prototype.delete=Cr,Nr.prototype.get=Ar,Nr.prototype.has=Ir,Nr.prototype.set=Tr;var Lr=Nr;var Rr=function(){this.__data__=new Lr,this.size=0};var Ur=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var zr=function(e){return this.__data__.get(e)};var Wr=function(e){return this.__data__.has(e)},Dr="object"==typeof rt&&rt&&rt.Object===Object&&rt,Fr="object"==typeof self&&self&&self.Object===Object&&self,Vr=Dr||Fr||Function("return this")(),Br=Vr.Symbol,qr=Object.prototype,Gr=qr.hasOwnProperty,Yr=qr.toString,Mr=Br?Br.toStringTag:void 0;var $r=function(e){var t=Gr.call(e,Mr),r=e[Mr];try{e[Mr]=void 0;var n=!0}catch(e){}var a=Yr.call(e);return n&&(t?e[Mr]=r:delete e[Mr]),a},Hr=Object.prototype.toString;var Jr=function(e){return Hr.call(e)},Kr=Br?Br.toStringTag:void 0;var Qr=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Kr&&Kr in Object(e)?$r(e):Jr(e)};var Xr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Zr,en=function(e){if(!Xr(e))return!1;var t=Qr(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},tn=Vr["__core-js_shared__"],rn=(Zr=/[^.]+$/.exec(tn&&tn.keys&&tn.keys.IE_PROTO||""))?"Symbol(src)_1."+Zr:"";var nn=function(e){return!!rn&&rn in e},an=Function.prototype.toString;var on=function(e){if(null!=e){try{return an.call(e)}catch(e){}try{return e+""}catch(e){}}return""},cn=/^\[object .+?Constructor\]$/,sn=Function.prototype,un=Object.prototype,ln=sn.toString,dn=un.hasOwnProperty,pn=RegExp("^"+ln.call(dn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var fn=function(e){return!(!Xr(e)||nn(e))&&(en(e)?pn:cn).test(on(e))};var mn=function(e,t){return null==e?void 0:e[t]};var hn=function(e,t){var r=mn(e,t);return fn(r)?r:void 0},vn=hn(Vr,"Map"),gn=hn(Object,"create");var yn=function(){this.__data__=gn?gn(null):{},this.size=0};var bn=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wn=Object.prototype.hasOwnProperty;var _n=function(e){var t=this.__data__;if(gn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return wn.call(t,e)?t[e]:void 0},En=Object.prototype.hasOwnProperty;var xn=function(e){var t=this.__data__;return gn?void 0!==t[e]:En.call(t,e)};var kn=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this};function jn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}jn.prototype.clear=yn,jn.prototype.delete=bn,jn.prototype.get=_n,jn.prototype.has=xn,jn.prototype.set=kn;var On=jn;var Pn=function(){this.size=0,this.__data__={hash:new On,map:new(vn||Lr),string:new On}};var Sn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Cn=function(e,t){var r=e.__data__;return Sn(t)?r["string"==typeof t?"string":"hash"]:r.map};var An=function(e){var t=Cn(this,e).delete(e);return this.size-=t?1:0,t};var In=function(e){return Cn(this,e).get(e)};var Tn=function(e){return Cn(this,e).has(e)};var Nn=function(e,t){var r=Cn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Ln(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ln.prototype.clear=Pn,Ln.prototype.delete=An,Ln.prototype.get=In,Ln.prototype.has=Tn,Ln.prototype.set=Nn;var Rn=Ln;var Un=function(e,t){var r=this.__data__;if(r instanceof Lr){var n=r.__data__;if(!vn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Rn(n)}return r.set(e,t),this.size=r.size,this};function zn(e){var t=this.__data__=new Lr(e);this.size=t.size}zn.prototype.clear=Rr,zn.prototype.delete=Ur,zn.prototype.get=zr,zn.prototype.has=Wr,zn.prototype.set=Un;var Wn=zn;var Dn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Fn=function(e){return this.__data__.has(e)};function Vn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Rn;++t<r;)this.add(e[t])}Vn.prototype.add=Vn.prototype.push=Dn,Vn.prototype.has=Fn;var Bn=Vn;var qn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var Gn=function(e,t){return e.has(t)};var Yn=function(e,t,r,n,a,o){var i=1&r,c=e.length,s=t.length;if(c!=s&&!(i&&s>c))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var d=-1,p=!0,f=2&r?new Bn:void 0;for(o.set(e,t),o.set(t,e);++d<c;){var m=e[d],h=t[d];if(n)var v=i?n(h,m,d,t,e,o):n(m,h,d,e,t,o);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!qn(t,(function(e,t){if(!Gn(f,t)&&(m===e||a(m,e,r,n,o)))return f.push(t)}))){p=!1;break}}else if(m!==h&&!a(m,h,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p},Mn=Vr.Uint8Array;var $n=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var Hn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},Jn=Br?Br.prototype:void 0,Kn=Jn?Jn.valueOf:void 0;var Qn=function(e,t,r,n,a,o,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Mn(e),new Mn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Or(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=$n;case"[object Set]":var s=1&n;if(c||(c=Hn),e.size!=t.size&&!s)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=Yn(c(e),c(t),n,a,o,i);return i.delete(e),l;case"[object Symbol]":if(Kn)return Kn.call(e)==Kn.call(t)}return!1};var Xn=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},Zn=Array.isArray;var ea=function(e,t,r){var n=t(e);return Zn(e)?n:Xn(n,r(e))};var ta=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o};var ra=function(){return[]},na=Object.prototype.propertyIsEnumerable,aa=Object.getOwnPropertySymbols,oa=aa?function(e){return null==e?[]:(e=Object(e),ta(aa(e),(function(t){return na.call(e,t)})))}:ra;var ia=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var ca=function(e){return null!=e&&"object"==typeof e};var sa=function(e){return ca(e)&&"[object Arguments]"==Qr(e)},ua=Object.prototype,la=ua.hasOwnProperty,da=ua.propertyIsEnumerable,pa=sa(function(){return arguments}())?sa:function(e){return ca(e)&&la.call(e,"callee")&&!da.call(e,"callee")};var fa=function(){return!1},ma=nt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r?Vr.Buffer:void 0,o=(a?a.isBuffer:void 0)||fa;e.exports=o})),ha=/^(?:0|[1-9]\d*)$/;var va=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ha.test(e))&&e>-1&&e%1==0&&e<t};var ga=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ya={};ya["[object Float32Array]"]=ya["[object Float64Array]"]=ya["[object Int8Array]"]=ya["[object Int16Array]"]=ya["[object Int32Array]"]=ya["[object Uint8Array]"]=ya["[object Uint8ClampedArray]"]=ya["[object Uint16Array]"]=ya["[object Uint32Array]"]=!0,ya["[object Arguments]"]=ya["[object Array]"]=ya["[object ArrayBuffer]"]=ya["[object Boolean]"]=ya["[object DataView]"]=ya["[object Date]"]=ya["[object Error]"]=ya["[object Function]"]=ya["[object Map]"]=ya["[object Number]"]=ya["[object Object]"]=ya["[object RegExp]"]=ya["[object Set]"]=ya["[object String]"]=ya["[object WeakMap]"]=!1;var ba=function(e){return ca(e)&&ga(e.length)&&!!ya[Qr(e)]};var wa=function(e){return function(t){return e(t)}},_a=nt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r&&Dr.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o})),Ea=_a&&_a.isTypedArray,xa=Ea?wa(Ea):ba,ka=Object.prototype.hasOwnProperty;var ja=function(e,t){var r=Zn(e),n=!r&&pa(e),a=!r&&!n&&ma(e),o=!r&&!n&&!a&&xa(e),i=r||n||a||o,c=i?ia(e.length,String):[],s=c.length;for(var u in e)!t&&!ka.call(e,u)||i&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||va(u,s))||c.push(u);return c},Oa=Object.prototype;var Pa=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oa)};var Sa=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Ca=Object.prototype.hasOwnProperty;var Aa=function(e){if(!Pa(e))return Sa(e);var t=[];for(var r in Object(e))Ca.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Ia=function(e){return null!=e&&ga(e.length)&&!en(e)};var Ta=function(e){return Ia(e)?ja(e):Aa(e)};var Na=function(e){return ea(e,Ta,oa)},La=Object.prototype.hasOwnProperty;var Ra=function(e,t,r,n,a,o){var i=1&r,c=Na(e),s=c.length;if(s!=Na(t).length&&!i)return!1;for(var u=s;u--;){var l=c[u];if(!(i?l in t:La.call(t,l)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var f=!0;o.set(e,t),o.set(t,e);for(var m=i;++u<s;){var h=e[l=c[u]],v=t[l];if(n)var g=i?n(v,h,l,t,e,o):n(h,v,l,e,t,o);if(!(void 0===g?h===v||a(h,v,r,n,o):g)){f=!1;break}m||(m="constructor"==l)}if(f&&!m){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f},Ua=hn(Vr,"DataView"),za=hn(Vr,"Promise"),Wa=hn(Vr,"Set"),Da=hn(Vr,"WeakMap"),Fa=on(Ua),Va=on(vn),Ba=on(za),qa=on(Wa),Ga=on(Da),Ya=Qr;(Ua&&"[object DataView]"!=Ya(new Ua(new ArrayBuffer(1)))||vn&&"[object Map]"!=Ya(new vn)||za&&"[object Promise]"!=Ya(za.resolve())||Wa&&"[object Set]"!=Ya(new Wa)||Da&&"[object WeakMap]"!=Ya(new Da))&&(Ya=function(e){var t=Qr(e),r="[object Object]"==t?e.constructor:void 0,n=r?on(r):"";if(n)switch(n){case Fa:return"[object DataView]";case Va:return"[object Map]";case Ba:return"[object Promise]";case qa:return"[object Set]";case Ga:return"[object WeakMap]"}return t});var Ma=Ya,$a="[object Object]",Ha=Object.prototype.hasOwnProperty;var Ja=function(e,t,r,n,a,o){var i=Zn(e),c=Zn(t),s=i?"[object Array]":Ma(e),u=c?"[object Array]":Ma(t),l=(s="[object Arguments]"==s?$a:s)==$a,d=(u="[object Arguments]"==u?$a:u)==$a,p=s==u;if(p&&ma(e)){if(!ma(t))return!1;i=!0,l=!1}if(p&&!l)return o||(o=new Wn),i||xa(e)?Yn(e,t,r,n,a,o):Qn(e,t,s,r,n,a,o);if(!(1&r)){var f=l&&Ha.call(e,"__wrapped__"),m=d&&Ha.call(t,"__wrapped__");if(f||m){var h=f?e.value():e,v=m?t.value():t;return o||(o=new Wn),a(h,v,r,n,o)}}return!!p&&(o||(o=new Wn),Ra(e,t,r,n,a,o))};var Ka=function e(t,r,n,a,o){return t===r||(null==t||null==r||!ca(t)&&!ca(r)?t!=t&&r!=r:Ja(t,r,n,a,e,o))};var Qa=function(e,t){return Ka(e,t)},Xa={},Za={"{}":void 0},eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa,t=JSON.stringify(e),n=z({permissions:Za[t]}),o=$e(n,2),i=o[0],c=o[1],s=q(),u=a((function(){return s(e).then((function(e){Qa(e,i.permissions)||(Za[t]=e,c({permissions:e}))})).catch((function(e){c({error:e})}))}),[t,e,s]);return r((function(){u()}),[t]),Fe(Fe({},i),{},{refetch:u})},to={auth:{dialog:{container_permissions:"Container permissions",resource_permissions:"Resource permissions",login_required:"Login required"},action:{permissions:"Permissions",signup:"Signup",logout:"Logout",login:"Login",view_my_profile:"View my profile",edit_my_profile:"Edit my profile"},right:{resource:{read:"Read",append:"Append",write:"Write",control:"Control"},container:{read:"List",append:"Add",write:"Add",control:"Control"}},agent:{anonymous:"All users",authenticated:"Connected users"},input:{agent_select:"Add an user...",name:"Surname",username:"User ID",email:"Email address",username_or_email:"User ID or email address"},message:{resource_show_forbidden:"You are not allowed to view this resource",resource_edit_forbidden:"You are not allowed to edit this resource",resource_delete_forbidden:"You are not allowed to delete this resource",resource_control_forbidden:"You are not allowed to control this resource",container_create_forbidden:"You are not allowed to create new resource",container_list_forbidden:"You are not allowed to list these resources",user_not_allowed_to_login:"You are not allowed to login with this account",user_email_not_found:"No account found with this email address",user_email_exist:"An account already exist with this email address",username_exist:"An account already exist with this user ID",username_invalid:"This username is invalid. Only lowercase characters, numbers, dots and hyphens are authorized",new_user_created:"Your account has been successfully created",user_connected:"You are now connected",user_disconnected:"You are now disconnected",bad_request:"Bad request (Error message returned by the server: %{error})",account_settings_updated:"Your account settings have been successfully updated",login_to_continue:"Please login to continue",choose_pod_provider:"Please choose a POD provider in the list below. All application data will be saved on your POD."}}},ro={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la ressource",login_required:"Connexion requise"},action:{permissions:"Permissions",signup:"S'inscrire",logout:"Se déconnecter",login:"Se connecter",view_my_profile:"Voir mon profil",edit_my_profile:"Éditer mon profil"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connectés"},input:{agent_select:"Ajouter un utilisateur...",name:"Prénom",username:"Identifiant unique",email:"Adresse e-mail",username_or_email:"Identifiant ou adresse e-mail"},message:{resource_show_forbidden:"Vous n'avez pas la permission de voir cette ressource",resource_edit_forbidden:"Vous n'avez pas la permission d'éditer cette ressource",resource_delete_forbidden:"Vous n'avez pas la permission d'effacer cette ressource",resource_control_forbidden:"Vous n'avez pas la permission d'administrer cette ressource",container_create_forbidden:"Vous n'avez pas la permission de créer des ressources",container_list_forbidden:"Vous n'avez pas la permission de voir ces ressources",user_not_allowed_to_login:"Vous n'avez pas le droit de vous connecter avec ce compte",user_email_not_found:"Aucun compte trouvé avec cette adresse mail",user_email_exist:"Un compte existe déjà avec cette adresse mail",username_exist:"Un compte existe déjà avec cet identifiant",username_invalid:"Cet identifiant n'est pas valide. Seuls les lettres minuscules, les chiffres, les points et les tirets sont autorisés",new_user_created:"Votre compte a été créé avec succès",user_connected:"Vous êtes maintenant connecté",user_disconnected:"Vous êtes maintenant déconnecté",bad_request:"Requête erronée (Message d'erreur renvoyé par le serveur: %{error})",account_settings_updated:"Les paramètres de votre compte ont été mis à jour avec succès",login_to_continue:"Veuillez vous connecter pour continuer",choose_pod_provider:"Veuillez choisir un fournisseur de PODs dans la liste ci-dessous. Toutes les données de l'application seront enregistrées sur votre POD."}}};export{Jt as AuthDialog,Ot as CreateWithPermissions,Dt as DeleteButtonWithPermissions,Wt as EditActionsWithPermissions,Vt as EditToolbarWithPermissions,Bt as EditWithPermissions,Gt as ListActionsWithPermissions,Yt as ListWithPermissions,fr as LocalLoginPage,Xt as LoginPage,hr as LogoutButton,zt as PermissionsButton,tr as PodLoginPage,gr as ResourceWithPermissions,Mt as ShowActionsWithPermissions,$t as ShowWithPermissions,Xt as SsoLoginPage,xr as UserMenu,ht as authProvider,to as englishMessages,ro as frenchMessages,Lt as useAgents,kr as useCheckAuthenticated,jt as useCheckPermissions,eo as usePermissionsWithRefetch,ir as useSignup};
//# sourceMappingURL=index.es.js.map
