import*as e from"react";import t,{useEffect as r,useState as n,useCallback as o,useRef as a,useMemo as i,forwardRef as s}from"react";import{useGetIdentity as c,usePermissions as u,useNotify as l,useRedirect as d,useResourceContext as p,Create as f,CreateActions as m,useTranslate as h,useGetList as v,useDataProvider as g,Loading as y,Error as w,useAuthProvider as b,Button as _,useRecordContext as E,useResourceDefinition as x,usePermissionsOptimized as k,TopToolbar as j,ListButton as O,ShowButton as P,useGetRecordId as S,DeleteButton as C,Toolbar as A,SaveButton as I,Edit as T,EditButton as L,CreateButton as N,ExportButton as U,List as R,Show as z,useLogin as W,useLocale as F,Notification as D,useSafeSetState as V,Form as B,TextInput as M,required as G,email as q,Resource as Y,UserMenu as $,Logout as H,useUserMenu as J,useGetPermissions as K}from"react-admin";import{useCreateContainer as Q}from"@semapps/semantic-data-provider";import X from"@mui/icons-material/Share";import{TextField as Z,List as ee,ListItem as te,ListItemAvatar as re,Avatar as ne,ListItemText as oe,ListItemSecondaryAction as ae,IconButton as ie,Menu as se,MenuItem as ce,ListItemIcon as ue,Dialog as le,DialogTitle as de,DialogContent as pe,DialogActions as fe,useMediaQuery as me,DialogContentText as he,Button as ve,Card as ge,Typography as ye,CardActions as we,Box as be,Divider as _e,StyledEngineProvider as Ee,CardContent as xe,CircularProgress as ke}from"@mui/material";import je from"@mui/styles/makeStyles";import Oe from"@mui/material/Autocomplete";import Pe from"@mui/icons-material/Person";import{styled as Se,ThemeProvider as Ce}from"@mui/system";import Ae from"@mui/icons-material/Edit";import Ie from"@mui/icons-material/Check";import Te from"@mui/icons-material/Public";import Le from"@mui/icons-material/VpnLock";import Ne from"@mui/icons-material/Group";import{useNavigate as Ue,useSearchParams as Re,useLocation as ze,Link as We}from"react-router-dom";import{styled as Fe,createTheme as De}from"@mui/material/styles";import Ve from"@mui/icons-material/Lock";import Be from"@mui/icons-material/Storage";import Me from"@mui/icons-material/AccountCircle";function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Ye=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new x(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return j()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=b(i,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function d(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&r.call(v,o)&&(m=v);var g=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Je(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){He(a,n,o,i,s,"next",e)}function s(e){He(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qe(){return(Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(e,t):void 0}}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nt(e){this.message=e}nt.prototype=new Error,nt.prototype.name="InvalidCharacterError";var ot="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new nt("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,a=0,i="";n=t.charAt(a++);~n&&(r=o%4?64*r+n:n,o++%4)?i+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function at(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(ot(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return ot(t)}}function it(e){this.message=e}function st(e,t){if("string"!=typeof e)throw new it("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(at(e.split(".")[r]))}catch(e){throw new it("Invalid token specified: "+e.message)}}it.prototype=new Error,it.prototype.name="InvalidTokenError";var ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ut(e,t){return e(t={exports:{}},t.exports),t.exports}var lt,dt,pt=ut((function(e){var t,r;t=ct,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(n>0&&(o=o.replace(/^[\/]+/,"")),o=n<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var a=t.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),ft=function(e){return e?Array.isArray(e)?e:[e]:void 0},mt=function(e){var t=new URL(e);return pt(t.origin,"_acl",t.pathname)},ht=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},vt=function(){var e=Je(Ye().mark((function e(t){var r,n;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataServers();case 2:if(r=e.sent,n=Object.values(r).find((function(e){return!0===e.authServer}))){e.next=6;break}throw new Error("Could not find a server with authServer: true. Check your dataServers config.");case 6:return e.abrupt("return",n.pod?new URL(n.baseUrl).origin:n.baseUrl);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=["username","email","password","domain"],yt="sso",wt="local",bt="pod",_t=function(e){var t,r,n,o,a,i,s,c,u,l,d,p,f=e.dataProvider,m=e.authType,h=e.allowAnonymous,v=void 0===h||h,g=e.checkUser,y=e.checkPermissions,w=void 0!==y&&y;if(![yt,wt,bt].includes(m))throw new Error("The authType parameter is missing from the auth provider");return{login:(p=Je(Ye().mark((function e(t){var r,n,o,a,i,s,c;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(f);case 2:if(r=e.sent,m!==wt){e.next=20;break}return n=t.username,o=t.password,e.prev=5,e.next=8,f.fetch(pt(r,"auth/login"),{method:"POST",body:JSON.stringify({username:n.trim(),password:o.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 8:a=e.sent,i=a.json,s=i.token,localStorage.setItem("token",s),window.location.reload(),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),new Error("ra.auth.sign_in_error");case 18:e.next=23;break;case 20:c="".concat(new URL(window.location.href).origin,"/login?login=true"),t.redirect&&(c+="&redirect=".concat(encodeURIComponent(t.redirect))),window.location.href=pt(r,"auth?redirectUrl=".concat(encodeURIComponent(c)));case 23:case"end":return e.stop()}}),e,null,[[5,15]])}))),function(e){return p.apply(this,arguments)}),signup:(d=Je(Ye().mark((function e(t){var r,n,o,a,i,s,c,u,l,d,p;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(f);case 2:if(r=e.sent,m!==wt){e.next=33;break}return n=t.username,o=t.email,a=t.password,t.domain,i=Xe(t,gt),e.prev=5,e.next=8,f.fetch(pt(r,"auth/signup"),{method:"POST",body:JSON.stringify(qe({username:n.trim(),email:o.trim(),password:a.trim()},i)),headers:new Headers({"Content-Type":"application/json"})});case 8:return s=e.sent,c=s.json,u=c.token,localStorage.setItem("token",u),l=st(u),d=l.webId,e.abrupt("return",d);case 16:if(e.prev=16,e.t0=e.catch(5),"email.already.exists"!==e.t0.message){e.next=22;break}throw new Error("auth.message.user_email_exist");case 22:if("username.already.exists"!==e.t0.message){e.next=26;break}throw new Error("auth.message.username_exist");case 26:if("username.invalid"!==e.t0.message){e.next=30;break}throw new Error("auth.message.username_invalid");case 30:throw new Error(e.t0.message||"ra.auth.sign_in_error");case 31:e.next=35;break;case 33:p="".concat(new URL(window.location.href).origin,"/login?login=true"),window.location.href=pt(r,"auth?redirectUrl=".concat(encodeURIComponent(p)));case 35:case"end":return e.stop()}}),e,null,[[5,16]])}))),function(e){return d.apply(this,arguments)}),logout:(l=Je(Ye().mark((function e(){var t,r,n,o,a;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=m,e.next=e.t0===wt?3:e.t0===yt?7:e.t0===bt?13:18;break;case 3:return localStorage.clear(),window.location.reload(),window.location.href="/",e.abrupt("break",18);case 7:return e.next=9,vt(f);case 9:return t=e.sent,r=new URL(window.location.href).origin,window.location.href=pt(t,"auth/logout?redirectUrl=".concat(encodeURIComponent("".concat(pt(r,"login"),"?logout=true")))),e.abrupt("break",18);case 13:return n=localStorage.getItem("token"),o=st(n),a=o.webId,localStorage.clear(),window.location.href="".concat(pt(a,"openApp"),"?type=").concat(encodeURIComponent("http://activitypods.org/ns/core#FrontAppRegistration")),e.abrupt("break",18);case 18:return e.abrupt("return","/");case 19:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkAuth:(u=Je(Ye().mark((function e(){return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")||v){e.next=3;break}throw new Error;case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),checkUser:function(e){return!g||g(e)},checkError:function(e){return Promise.resolve()},getPermissions:(c=Je(Ye().mark((function e(t){var r,n,o;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=2;break}return e.abrupt("return");case 2:if("object"!==$e(t)){e.next=4;break}return e.abrupt("return");case 4:if(t&&t.startsWith("http")){e.next=6;break}throw new Error("The first parameter passed to getPermissions must be an URL");case 6:return r=mt(t),e.prev=7,e.next=10,f.fetch(r);case 10:return n=e.sent,o=n.json,e.abrupt("return",o["@graph"]);case 15:return e.prev=15,e.t0=e.catch(7),console.warn("Could not fetch ACL URI ".concat(t)),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[7,15]])}))),function(e){return c.apply(this,arguments)}),addPermission:(s=Je(Ye().mark((function e(t,r,n,o){var a,i,s;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to addPermission must be an URL");case 2:return i=mt(t),Ke(a={"@id":"#".concat(o.replace("acl:","")),"@type":"acl:Authorization"},n,r),Ke(a,"acl:accessTo",t),Ke(a,"acl:mode",o),s=a,e.next=6,f.fetch(i,{method:"PATCH",body:JSON.stringify({"@context":ht(i),"@graph":[s]})});case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return s.apply(this,arguments)}),removePermission:(i=Je(Ye().mark((function e(t,r,n,o){var a,i,s,c;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to removePermission must be an URL");case 2:return a=mt(t),e.next=5,f.fetch(a);case 5:return i=e.sent,s=i.json,c=s["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=ft(e["acl:mode"]),a=ft(e[n]);return o&&t.includes(o)&&a&&a.includes(r)&&(a=a.filter((function(e){return e!==r}))),qe(qe({},e),{},Ke({},n,a))})),e.next=10,f.fetch(a,{method:"PUT",body:JSON.stringify({"@context":ht(a),"@graph":c})});case 10:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return i.apply(this,arguments)}),getIdentity:(a=Je(Ye().mark((function e(){var t,r,n,o,a,i,s;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=17;break}return r=st(t),n=r.webId,e.next=5,f.fetch(n);case 5:if(o=e.sent,!(a=o.json).url){e.next=13;break}return e.next=10,f.fetch(a.url);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:return i=e.t0,s=i.json,e.abrupt("return",{id:n,fullName:(null==s?void 0:s["vcard:given-name"])||(null==s?void 0:s["pair:label"])||a["foaf:name"]||a["pair:label"],profileData:s,webIdData:a});case 17:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resetPassword:(o=Je(Ye().mark((function e(t){var r,n;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,vt(f);case 3:return n=e.sent,e.prev=4,e.next=7,f.fetch(pt(n,"auth/reset_password"),{method:"POST",body:JSON.stringify({email:r.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("auth.notification.reset_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return o.apply(this,arguments)}),setNewPassword:(n=Je(Ye().mark((function e(t){var r,n,o,a;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.token,o=t.password,e.next=3,vt(f);case 3:return a=e.sent,e.prev=4,e.next=7,f.fetch(pt(a,"auth/new_password"),{method:"POST",body:JSON.stringify({email:r.trim(),token:n,password:o}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("auth.notification.new_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),getAccountSettings:(r=Je(Ye().mark((function e(t){var r,n,o;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(f);case 2:return r=e.sent,e.prev=3,e.next=6,f.fetch(pt(r,"auth/account"));case 6:return n=e.sent,o=n.json,e.abrupt("return",o);case 11:throw e.prev=11,e.t0=e.catch(3),new Error("auth.notification.get_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e){return r.apply(this,arguments)}),updateAccountSettings:(t=Je(Ye().mark((function e(t){var r,n,o,a;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(f);case 2:return r=e.sent,e.prev=3,n=t.email,o=t.currentPassword,a=t.newPassword,e.next=7,f.fetch(pt(r,"auth/account"),{method:"POST",body:JSON.stringify({currentPassword:o,email:n.trim(),newPassword:a}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"auth.account.invalid_password"!==e.t0.message){e.next=13;break}throw new Error("auth.notification.invalid_password");case 13:throw new Error("auth.notification.update_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}},Et="acl:agentClass",xt=["acl:Append","acl:Write","acl:Control"],kt=["acl:Append","acl:Write","acl:Control"],jt=["acl:Write","acl:Control"],Ot=["acl:Control"],Pt={show:["acl:Read","acl:Append","acl:Write","acl:Control"],list:["acl:Read","acl:Append","acl:Write","acl:Control"],create:xt,edit:kt,delete:jt,control:Ot},St={show:"auth.message.resource_show_forbidden",edit:"auth.message.resource_edit_forbidden",delete:"auth.message.resource_delete_forbidden",control:"auth.message.resource_control_forbidden",list:"auth.message.container_list_forbidden",create:"auth.message.container_create_forbidden"},Ct=(Ke(lt={},"acl:Read","auth.right.resource.read"),Ke(lt,"acl:Append","auth.right.resource.append"),Ke(lt,"acl:Write","auth.right.resource.write"),Ke(lt,"acl:Control","auth.right.resource.control"),lt),At=(Ke(dt={},"acl:Read","auth.right.container.read"),Ke(dt,"acl:Write","auth.right.container.write"),Ke(dt,"acl:Control","auth.right.container.control"),dt),It=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",o=c(),a=o.identity,i=o.isLoading,s=u(e),p=s.permissions,f=l(),m=d();return r((function(){!i&&a&&p&&!p.some((function(e){return Pt[t].includes(e["acl:mode"])}))&&(f(St[t],{type:"error"}),m(n))}),[p,a,m,f,i]),p},Tt=function(e){var r=p(),n=Q(r);return It(n,"create"),t.createElement(f,e)};Tt.defaultProps={actions:t.createElement(m,null)};var Lt=je((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),Nt=function(e){var o=e.agents,a=e.addPermission,i=Lt(),s=h(),c=Ze(n(null),2),u=c[0],l=c[1],d=Ze(n(""),2),p=d[0],f=d[1],m=Ze(n([]),2),g=m[0],y=m[1],w=v("Person",{pagination:{page:1,perPage:100},sort:{field:"pair:label",order:"ASC"},filter:{q:p}},{enabled:p.length>0}).data;return r((function(){y((null==w?void 0:w.length)>0?Object.values(w):[])}),[w]),t.createElement(Oe,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(o).includes(e.id)}))},options:g,noOptionsText:s("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:u,onChange:function(e,t){a(t.id||t["@id"],"acl:agent","acl:Read"),l(null),f(""),y([])},onInputChange:function(e,t){f(t)},renderInput:function(e){return t.createElement(Z,Qe({},e,{label:s("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(e,r){return t.createElement(ee,Qe({dense:!0,className:i.list},e),t.createElement(te,{button:!0},t.createElement(re,null,t.createElement(ne,{src:r.image},t.createElement(Pe,null))),t.createElement(oe,{primary:r["pair:label"]})))}})},Ut=function(e){var r=e.agent;switch(r.predicate){case Et:return"foaf:Agent"===r.id?t.createElement(Te,null):t.createElement(Le,null);case"acl:agent":return t.createElement(Pe,null);case"acl:agentGroup":return t.createElement(Ne,null);default:throw new Error("Unknown agent predicate: ".concat(r.predicate))}},Rt=je((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),zt=function(e){var o=e.isContainer,a=e.agent,i=e.addPermission,s=e.removePermission,c=Rt(),u=h(),l=g(),d=Ze(t.useState(null),2),p=d[0],f=d[1],m=Ze(n(),2),v=m[0],b=m[1],_=Ze(n(!0),2),E=_[0],x=_[1],k=Ze(n(),2),j=k[0],O=k[1];if(r((function(){"acl:agent"===a.predicate?l.getOne("Person",{id:a.id}).then((function(e){var t=e.data;b(t),x(!1)})).catch((function(e){O(e),x(!1)})):x(!1)}),[a.id,a.predicate]),"acl:agentGroup"===a.predicate)return null;var P=function(){return f(null)},S=o?At:Ct;return E?t.createElement(y,null):j?t.createElement(w,null):t.createElement(te,{className:c.listItem},t.createElement(re,null,t.createElement(ne,{src:null==v?void 0:v.image},t.createElement(Ut,{agent:a}))),t.createElement(oe,{className:c.primaryText,primary:v?v["pair:label"]:u("foaf:Agent"===a.id?"auth.agent.anonymous":"auth.agent.authenticated")}),t.createElement(oe,{className:c.secondaryText,primary:a.permissions&&a.permissions.map((function(e){return u(S[e])})).join(", ")}),t.createElement(ae,null,t.createElement(ie,{onClick:function(e){return f(e.currentTarget)},size:"large"},t.createElement(Ae,null)),t.createElement(se,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:P},Object.entries(S).map((function(e){var r=Ze(e,2),n=r[0],o=r[1],c=a.permissions&&a.permissions.includes(n);return t.createElement(ce,{key:n,onClick:function(){c?s(a.id,a.predicate,n):i(a.id,a.predicate,n),P()}},t.createElement(ue,null,c?t.createElement(Ie,null):null),t.createElement(oe,{primary:u(o)}))})))))},Wt=Se(ee)((function(e){return{width:"100%",maxWidth:"100%",backgroundColor:e.theme.palette.background.paper}})),Ft=function(e){var r=e.isContainer,n=e.agents,o=e.addPermission,a=e.removePermission;return t.createElement(Wt,{dense:!0},Object.entries(n).map((function(e){var n=Ze(e,2),i=n[0],s=n[1];return t.createElement(zt,{key:i,isContainer:r,agent:s,addPermission:o,removePermission:a})})))},Dt=function(e){var t=u(e).permissions,a=b(),i=Ze(n({}),2),s=i[0],c=i[1];r((function(){var e,r=(Ke(e={},"foaf:Agent",{id:"foaf:Agent",predicate:Et,permissions:[]}),Ke(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:Et,permissions:[]}),e),n=function(e,t,n){r[e]?r[e].permissions.push(n):r[e]={id:e,predicate:t,permissions:[n]}};if(t){var o,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=tt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(t);try{var i=function(){var e=o.value;e[Et]&&ft(e[Et]).forEach((function(t){return n(t,Et,e["acl:mode"])})),e["acl:agent"]&&ft(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&ft(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(a.s();!(o=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}c(r)}}),[t]);var l=o((function(t,r,n){var o,i=qe({},s);c(qe(qe({},s),{},Ke({},t,{id:t,predicate:r,permissions:s[t]?[].concat(et(null===(o=s[t])||void 0===o?void 0:o.permissions),[n]):[n]}))),a.addPermission(e,t,r,n).catch((function(e){c(i)}))}),[s,c,e,a]),d=o((function(t,r,n){var o=qe({},s);c(Object.fromEntries(Object.entries(s).map((function(e){var r=Ze(e,2),o=r[0],a=r[1];return a.id===t&&(a.permissions=a.permissions.filter((function(e){return e!==n}))),[o,a]})).filter((function(e){var t=Ze(e,2);t[0];var r=t[1];return r.predicate===Et||r.permissions.length>0})))),a.removePermission(e,t,r,n).catch((function(e){c(o)}))}),[s,c,e,a]);return{agents:s,addPermission:l,removePermission:d}},Vt=je((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Bt=function(e){var r=e.open,n=e.onClose,o=e.uri,a=e.isContainer,i=Vt(),s=h(),c=Dt(o),u=c.agents,l=c.addPermission,d=c.removePermission;return t.createElement(le,{fullWidth:!0,open:r,onClose:n},t.createElement(de,{className:i.title},s(a?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),t.createElement(pe,{className:i.addForm},t.createElement(Nt,{agents:u,addPermission:l})),t.createElement(pe,{className:i.listForm},t.createElement(Ft,{isContainer:a,agents:u,addPermission:l,removePermission:d})),t.createElement(fe,{className:i.actions},t.createElement(_,{label:"ra.action.close",variant:"text",onClick:n})))},Mt=function(e){var r=e.isContainer,o=E(),a=p(),i=Ze(n(!1),2),s=i[0],c=i[1],u=Q(a),l=r?u:o.id||o["@id"];return t.createElement(t.Fragment,null,t.createElement(_,{label:"auth.action.permissions",onClick:function(){return c(!0)}},t.createElement(X,null)),t.createElement(Bt,{uri:l,isContainer:r,open:s,onClose:function(){return c(!1)}}))};Mt.defaultProps={isContainer:!1};var Gt=function(){var e=x(),r=e.hasList,n=e.hasShow,o=E(),a=k(null==o?void 0:o.id).permissions;return t.createElement(j,null,r&&t.createElement(O,null),n&&t.createElement(P,null),!!a&&a.some((function(e){return Ot.includes(e["acl:mode"])}))&&t.createElement(Mt,null))},qt=function(e){var r=S(),n=u(r),o=n.permissions;return!n.isLoading&&null!=o&&o.some((function(e){return jt.includes(e["acl:mode"])}))?t.createElement(C,e):null},Yt=je((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),$t=function(e){var r=Yt();return t.createElement(A,Qe({},e,{className:r.toolbar}),t.createElement(I,null),t.createElement(qt,{mutationMode:"undoable"}))},Ht=function(e){var r=S();return It(r,"edit"),t.createElement(T,e,t.cloneElement(e.children,qe({toolbar:t.createElement($t,null)},e.children.props)))};Ht.defaultProps={actions:t.createElement(Gt,null)};var Jt=function(e){var r=S(),n=u(r),o=n.permissions;return!n.isLoading&&null!=o&&o.some((function(e){return kt.includes(e["acl:mode"])}))?t.createElement(L,e):null},Kt=function(e){var r=e.bulkActions,n=e.sort,o=e.displayedFilters,a=e.exporter,i=e.filters,s=e.filterValues,c=e.onUnselectItems,l=e.selectedIds,d=e.showFilter,f=e.total,m=p(),h=me((function(e){return e.breakpoints.down("xs")})),v=x(),g=Q(m),y=u(g).permissions;return t.createElement(j,null,i&&t.cloneElement(i,{showFilter:d,displayedFilters:o,filterValues:s,context:"button"}),v.hasCreate&&y&&y.some((function(e){return xt.includes(e["acl:mode"])}))&&t.createElement(N,null),y&&y.some((function(e){return Ot.includes(e["acl:mode"])}))&&t.createElement(Mt,{isContainer:!0}),!h&&!1!==a&&t.createElement(U,{disabled:0===f,sort:n,filter:s,exporter:a}),r&&t.cloneElement(r,{filterValues:s,selectedIds:l,onUnselectItems:c}))},Qt=function(e){return t.createElement(R,e)};Qt.defaultProps={actions:t.createElement(Kt,null)};var Xt=function(){var e=x(),r=e.hasList,n=e.hasEdit,o=E(),a=u(null==o?void 0:o.id).permissions;return t.createElement(j,null,r&&t.createElement(O,null),n&&a&&a.some((function(e){return kt.includes(e["acl:mode"])}))&&t.createElement(L,null),a&&a.some((function(e){return Ot.includes(e["acl:mode"])}))&&t.createElement(Mt,null))},Zt=function(e){var r=S();return It(r,"show"),t.createElement(z,e)};Zt.defaultProps={actions:t.createElement(Xt,null)};var er=["open","onClose","title","message","redirect"],tr=function(e){var r=e.open,n=e.onClose,o=e.title,a=e.message,i=e.redirect,s=Xe(e,er),c=W(),u=h();return t.createElement(le,Qe({open:r,onClose:n},s),t.createElement(de,null,u(o)),t.createElement(pe,null,t.createElement(he,null,u(a))),t.createElement(fe,null,t.createElement(ve,{onClick:n},u("ra.action.cancel")),t.createElement(ve,{onClick:function(){return c({redirect:i||window.location.pathname+window.location.search})},color:"primary",variant:"contained"},u("auth.action.login"))))};tr.defaultProps={title:"auth.dialog.login_required",message:"auth.message.login_to_continue"};var rr=["children","backgroundImage","buttons","userResource","propertiesExist","text"],nr=function(){var e=Je(Ye().mark((function e(t){return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),or=function(e){e.children;var n=e.backgroundImage,o=e.buttons,i=e.userResource,s=e.propertiesExist,u=e.text,d=Xe(e,rr),p=a(),f=!1,m=Ue(),h=Ze(Re(),1)[0],v=c(),y=v.identity,w=v.isLoading,_=l(),E=W(),x=g(),k=b();r((function(){!w&&null!=y&&y.id&&m(h.get("redirect")||"/")}),[y,w,m,h]),r((function(){Je(Ye().mark((function e(){return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.has("login")){e.next=7;break}if(!h.has("error")){e.next=5;break}"registration.not-allowed"===h.get("error")?_("auth.message.user_email_not_found",{type:"error"}):_("auth.message.bad_request",{type:"error",error:h.get("error")}),e.next=7;break;case 5:if(!h.has("token")){e.next=7;break}return e.delegateYield(Ye().mark((function e(){var t,r,n,o,a,c,u;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.get("token"),r=st(t),n=r.webId,localStorage.setItem("token",t),e.next=5,x.getOne(i,{id:n});case 5:if(a=e.sent,o=a.data,!(s.length>0)){e.next=20;break}c=s.every((function(e){return o[e]}));case 9:if(c){e.next=20;break}return console.log("Waiting for all properties to have been created",s),e.next=13,nr(500);case 13:return e.next=15,x.getOne(i,{id:n});case 15:u=e.sent,o=u.data,c=s.every((function(e){return o[e]})),e.next=9;break;case 20:k.checkUser(o)?h.has("redirect")?(_("auth.message.user_connected",{type:"info"}),window.location.href=h.get("redirect")):h.has("new")&&"true"===h.get("new")?(_("auth.message.new_user_created",{type:"info"}),window.location.href="/".concat(i,"/").concat(encodeURIComponent(n))):(_("auth.message.user_connected",{type:"info"}),window.location.href="/"):(localStorage.removeItem("token"),_("auth.message.user_not_allowed_to_login",{type:"error"}),m.replace("/login"));case 21:case"end":return e.stop()}}),e)}))(),"t0",7);case 7:h.has("logout")&&(localStorage.clear(),_("auth.message.user_disconnected",{type:"info"}),m("/"));case 8:case"end":return e.stop()}}),e)})))()}),[h,m,_,i]);var j=function(){!f&&p.current&&(p.current.style.backgroundImage="url(".concat(n,")"),f=!0)};return r((function(){f||function(){if(n){var e=new Image;e.onload=j,e.src=n}}()})),w?null:t.createElement(sr,Qe({},d,{ref:p}),t.createElement(ge,{className:ir.card},t.createElement("div",{className:ir.avatar},t.createElement(ne,{className:ir.icon},t.createElement(Ve,null))),u&&t.createElement(ye,{variant:"body2"},u),null==o?void 0:o.map((function(e,r){return t.createElement(we,{key:r},t.cloneElement(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return E({},"/login")}}))}))))},ar="SsoLoginPage",ir={card:"".concat(ar,"-card"),avatar:"".concat(ar,"-avatar"),icon:"".concat(ar,"-icon"),switch:"".concat(ar,"-switch")},sr=Fe("div",{name:ar,overridesResolver:function(e,t){return t.root}})((function(e){var t,r=e.theme;return Ke(t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},"& .".concat(ir.card),{minWidth:300,marginTop:"6em"}),Ke(t,"& .".concat(ir.avatar),{margin:"1em",display:"flex",justifyContent:"center"}),Ke(t,"& .".concat(ir.icon),{backgroundColor:r.palette.secondary[500]}),Ke(t,"& .".concat(ir.switch),{marginBottom:"1em",display:"flex",justifyContent:"center"}),t}));or.defaultProps={propertiesExist:[],buttons:[t.createElement(ve,{startIcon:t.createElement(ne,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var cr=je((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.main}},text:{textAlign:"center",padding:"4px 8px 8px"},card:Ke({minWidth:300,maxWidth:350,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]},list:{paddingTop:0,paddingBottom:0},listItem:{paddingTop:5,paddingBottom:5}}})),ur=function(e){var o=e.history,a=e.location,i=e.text,s=e.customPodProviders,c=cr(),u=l(),d=F(),p=h(),f=b(),m=g(),v=Ze(n(s||[]),2),y=v[0],w=v[1],_=new URLSearchParams(a.search);return r((function(){Je(Ye().mark((function e(){var t,r,n;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==y.length){e.next=13;break}return e.next=3,fetch("https://data.activitypods.org/pod-providers",{headers:{Accept:"application/ld+json"}});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,n=r["ldp:contains"].filter((function(e){return Array.isArray(e["apods:locales"])?e["apods:locales"].includes(d):e["apods:locales"]===d})),w(n),e.next=13;break;case 12:u("auth.message.pod_providers_not_loaded","error");case 13:case"end":return e.stop()}}),e)})))()}),[y,w,u,d]),r((function(){Je(Ye().mark((function e(){var t,r,n,a,i;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.has("token")){e.next=16;break}return t=_.get("token"),r=st(t),n=r.webId,e.next=5,fetch(n,{headers:{Accept:"application/json"}});case 5:if((a=e.sent).ok){e.next=10;break}u("auth.message.unable_to_fetch_user_data","error"),e.next=14;break;case 10:return e.next=12,a.json();case 12:i=e.sent,f.checkUser(i)?(localStorage.setItem("token",t),u("auth.message.user_connected","info"),window.location.reload(),window.location.href="/?addUser=true"):(u("auth.message.user_not_allowed_to_login","error"),o.replace("/login"));case 14:e.next=17;break;case 16:_.has("logout")&&(localStorage.clear(),u("auth.message.user_disconnected","info"),o.push("/"));case 17:case"end":return e.stop()}}),e)})))()}),[_,m]),_.has("token")||_.has("addUser")||_.has("logout")?null:t.createElement(be,{display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(ge,{className:c.card},t.createElement("div",{className:c.lockIconAvatar},t.createElement(ne,{className:c.lockIcon},t.createElement(Ve,null))),t.createElement(be,{pl:2,pr:2},t.createElement(ye,{variant:"body2",className:c.text},i||p("auth.message.choose_pod_provider"))),t.createElement(be,{m:2},t.createElement(ee,{className:c.list},y.map((function(e,r){var n=new URL("/auth",(e["apods:domainName"].includes(":")?"http://":"https://")+e["apods:domainName"]);return _.has("signup")&&n.searchParams.set("signup","true"),n.searchParams.set("redirect",window.location.href),t.createElement(t.Fragment,{key:r},t.createElement(_e,null),t.createElement(te,{key:r,button:!0,onClick:function(){return window.location.href=n.toString()},className:c.listItem},t.createElement(re,null,t.createElement(ne,null,t.createElement(Be,null))),t.createElement(oe,{primary:e["apods:domainName"],secondary:e["apods:area"]})))}))))))},lr=function(e){var r=i((function(){return De(e.theme)}),[e.theme]);return t.createElement(Ee,{injectFirst:!0},t.createElement(Ce,{theme:r},t.createElement(ur,e),t.createElement(D,null)))};function dr(){}function pr(){}pr.resetWarningCache=dr;var fr=function(){function e(e,t,r,n,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pr,resetWarningCache:dr};return r.PropTypes=r,r},mr=ut((function(e){e.exports=fr()})),hr=function(){var e=b();return o((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signup(t)}),[e])},vr=je((function(e){return{content:{width:450},icon:{margin:e.spacing(.3)}}})),gr=function(t){var r=t.redirectTo,n=t.delayBeforeRedirect,o=Ze(V(!1),2),a=o[0],i=o[1],s=hr(),c=h(),u=l(),d=vr(),p=ze(),f=new URLSearchParams(p.search);return e.createElement(B,{onSubmit:function(e){i(!0),s(e).then((function(e){n?setTimeout((function(){window.location.reload(),window.location.href=r||"/",i(!1)}),n):(window.location.reload(),window.location.href=r||"/",i(!1)),u("auth.message.new_user_created",{type:"info"})})).catch((function(e){i(!1),u("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},noValidate:!0,defaultValues:{email:f.get("email")}},e.createElement(xe,{className:d.content},e.createElement(M,{autoFocus:!0,source:"username",label:c("auth.input.username"),autoComplete:"username",fullWidth:!0,disabled:a,validate:G()}),e.createElement(M,{source:"email",label:c("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:a||f.has("email")&&f.has("force-email"),validate:[G(),q()]}),e.createElement(M,{source:"password",type:"password",label:c("ra.auth.password"),autoComplete:"new-password",fullWidth:!0,disabled:a||f.has("email")&&f.has("force-email"),validate:G()}),e.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:a,fullWidth:!0,className:d.button},a?e.createElement(ke,{className:d.icon,size:19,thickness:3}):c("auth.action.signup"))))};gr.propTypes={redirectTo:mr.string};var yr=je((function(e){return{content:{width:450},icon:{margin:e.spacing(.3)}}})),wr=function(t){var r=t.redirectTo,n=Ze(V(!1),2),o=n[0],a=n[1],i=W(),s=h(),c=l(),u=yr(),d=ze(),p=new URLSearchParams(d.search);return e.createElement(B,{onSubmit:function(e){a(!0),i(e,r).then((function(){a(!1)})).catch((function(e){a(!1),c("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))},noValidate:!0,defaultValues:{email:p.get("email")}},e.createElement(xe,{className:u.content},e.createElement(M,{source:"username",label:s("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:o||p.has("email")&&p.has("force-email"),validate:[G(),q()]}),e.createElement(M,{source:"password",type:"password",label:s("ra.auth.password"),autoComplete:"current-password",fullWidth:!0,disabled:o||p.has("email")&&p.has("force-email"),validate:G()}),e.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:o,fullWidth:!0,className:u.button},o?e.createElement(ke,{className:u.icon,size:19,thickness:3}):s("auth.action.login"))))};wr.propTypes={redirectTo:mr.string};var br=je((function(e){return{icon:{margin:e.spacing(.3)}}})),_r=function(e){var r=e.redirectTo,n=ze(),o=new URLSearchParams(n.search),a=o.get("token"),i=Ze(V(!1),2),s=i[0],c=i[1],u=b(),d=h(),p=l(),f=br();return t.createElement(B,{onSubmit:function(e){c(!0),u.setNewPassword(qe(qe({},e),{},{token:a})).then((function(e){setTimeout((function(){window.location.href="/login".concat(r?"?redirect=".concat(encodeURIComponent(r)):""),c(!1)}),2e3),p("auth.notification.password_changed","info")})).catch((function(e){c(!1),p("string"==typeof e?e:void 0!==e&&e.message?e.message:"auth.notification.reset_password_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))},noValidate:!0,defaultValues:{email:o.get("email")}},t.createElement(xe,{className:f.content},t.createElement(M,{autoFocus:!0,source:"email",label:d("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:s,validate:G(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(M,{autoFocus:!0,type:"password",source:"password",label:d("auth.input.new_password"),autoComplete:"current-password",fullWidth:!0,disabled:s,validate:G(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(M,{autoFocus:!0,type:"password",source:"confirm-password",label:d("auth.input.confirm_new_password"),autoComplete:"current-password",fullWidth:!0,disabled:s,validate:G(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:s,fullWidth:!0,className:f.button},s?t.createElement(ke,{className:f.icon,size:19,thickness:3}):d("auth.action.set_new_password"))))},Er=je((function(e){return{icon:{margin:e.spacing(.3)}}})),xr=function(){var e=Ze(V(!1),2),r=e[0],n=e[1],o=b(),a=h(),i=l(),s=Er();return t.createElement(B,{onSubmit:function(e){n(!0),o.resetPassword(qe({},e)).then((function(e){n(!1),i("auth.notification.reset_password_submitted","info")})).catch((function(e){n(!1),i("string"==typeof e?e:void 0!==e&&e.message?e.message:"auth.notification.reset_password_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))}},t.createElement(xe,{className:s.content},t.createElement(M,{autoFocus:!0,source:"email",label:a("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:r,validate:G(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:r,fullWidth:!0,className:s.button},r?t.createElement(ke,{className:s.icon,size:19,thickness:3}):a("auth.action.reset_password"))))},kr=je((function(e){return{"@global":{body:{backgroundColor:e.palette.secondary.main}},root:{backgroundColor:e.palette.secondary.main},card:Ke({minWidth:300,maxWidth:500,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),icon:{marginTop:5,marginRight:5},title:Ke({},e.breakpoints.down("sm"),{fontWeight:"bold",marginTop:12})}})),jr=function(e){var r=e.title,n=e.icon,o=e.text,a=e.children,i=kr();return t.createElement(be,{display:"flex",flexDirection:"column",alignItems:"center",className:i.root},t.createElement(ge,{className:i.card},t.createElement(be,{p:2,display:"flex",justifyContent:"start"},n&&t.cloneElement(n,{fontSize:"large",className:i.icon}),t.createElement(ye,{variant:"h4",className:i.title},r)),t.createElement(be,{pl:2,pr:2},t.createElement(ye,{variant:"body1"},o)),a),t.createElement(D,null))},Or=je((function(){return{switch:{marginBottom:"1em",display:"flex",flexDirection:"column",alignItems:"center"}}})),Pr=function(e){var n=e.hasSignup,o=Or(),a=Ue(),s=h(),u=Ze(Re(),1)[0],l=n&&u.has("signup"),d=u.has("reset_password"),p=u.has("new_password"),f=!l&&!d&&!p,m=u.get("redirect"),v=c(),g=v.identity,y=v.isLoading;r((function(){!y&&null!=g&&g.id&&(m&&m.startsWith("http")?window.location.href=m:a(m||"/"))}),[g,y,a,m]);var w=Ze(i((function(){return l?["auth.action.signup","auth.helper.signup"]:f?["auth.action.login","auth.helper.login"]:d?["auth.action.reset_password","auth.helper.reset_password"]:p?["auth.action.set_new_password","auth.helper.set_new_password"]:void 0}),[l,f,d,p]),2),b=w[0],_=w[1];return y||null!=g&&g.id?null:t.createElement(jr,{title:s(b),text:s(_),icon:t.createElement(Ve,null)},t.createElement(ge,null,l&&t.createElement(gr,{redirectTo:m,delayBeforeRedirect:3e3}),d&&t.createElement(xr,null),p&&t.createElement(_r,{redirectTo:m}),f&&t.createElement(wr,{redirectTo:m}),t.createElement("div",{className:o.switch},l&&t.createElement(We,{to:"/login"},t.createElement(ye,{variant:"body2"},s("auth.action.login"))),f&&t.createElement(t.Fragment,null,n&&t.createElement("div",null,t.createElement(We,{to:"/login?signup=true"},t.createElement(ye,{variant:"body2"},s("auth.action.signup")))),t.createElement("div",null,t.createElement(We,{to:"/login?reset_password=true&".concat(u.toString())},t.createElement(ye,{variant:"body2"},s("auth.action.reset_password"))))))))};Pr.defaultProps={hasSignup:!0};var Sr=["name","create"],Cr=function(e){var r=e.name,n=e.create,o=Xe(e,Sr),a=Q(r),i=u(a).permissions;return t.createElement(Y,Qe({},o,{name:r,create:i&&i.some((function(e){return xt.includes(e["acl:mode"])}))?n:void 0}))},Ar=["label","icon","to"],Ir=["logout","profileResource"],Tr=s((function(e,r){var n=e.label,a=e.icon,i=e.to,s=Xe(e,Ar),c=J().onClose,u=h(),l=Ue(),d=o((function(){l(i),c()}),[i,c,l]);return t.createElement(ce,Qe({onClick:d,ref:r},s),a&&t.createElement(ue,null,t.cloneElement(a,{fontSize:"small"})),t.createElement(oe,null,u(n)))})),Lr=function(e){var r,n,o=e.logout,a=e.profileResource,i=Xe(e,Ir),s=c().identity;return t.createElement($,i,s&&""!==s.id?[t.createElement(Tr,{key:"view",label:"auth.action.view_my_profile",icon:t.createElement(Me,null),to:"/".concat(a,"/").concat(encodeURIComponent((null==s||null===(r=s.profileData)||void 0===r?void 0:r.id)||s.id),"/show")}),t.createElement(Tr,{key:"edit",label:"auth.action.edit_my_profile",icon:t.createElement(Ae,null),to:"/".concat(a,"/").concat(encodeURIComponent((null==s||null===(n=s.profileData)||void 0===n?void 0:n.id)||s.id))}),t.cloneElement(o,{key:"logout"})]:[t.createElement(Tr,{key:"signup",label:"auth.action.signup",to:"/login?signup=true"}),t.createElement(Tr,{key:"login",label:"auth.action.login",to:"/login"})])};Lr.defaultProps={logout:t.createElement(H,null),profileResource:"Person"};var Nr=function(e){var t=c(),n=t.identity,o=t.isLoading,a=l(),i=d(),s=ze();return r((function(){o||null!=n&&n.id||(a(e||"ra.auth.auth_check_error",{type:"error"}),i("/login?redirect=".concat(encodeURIComponent(s.pathname+s.search))))}),[o,n,i,a,s]),{identity:n,isLoading:o}};var Ur=function(){this.__data__=[],this.size=0};var Rr=function(e,t){return e===t||e!=e&&t!=t};var zr=function(e,t){for(var r=e.length;r--;)if(Rr(e[r][0],t))return r;return-1},Wr=Array.prototype.splice;var Fr=function(e){var t=this.__data__,r=zr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Wr.call(t,r,1),--this.size,!0)};var Dr=function(e){var t=this.__data__,r=zr(t,e);return r<0?void 0:t[r][1]};var Vr=function(e){return zr(this.__data__,e)>-1};var Br=function(e,t){var r=this.__data__,n=zr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Mr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Mr.prototype.clear=Ur,Mr.prototype.delete=Fr,Mr.prototype.get=Dr,Mr.prototype.has=Vr,Mr.prototype.set=Br;var Gr=Mr;var qr=function(){this.__data__=new Gr,this.size=0};var Yr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var $r=function(e){return this.__data__.get(e)};var Hr=function(e){return this.__data__.has(e)},Jr="object"==typeof ct&&ct&&ct.Object===Object&&ct,Kr="object"==typeof self&&self&&self.Object===Object&&self,Qr=Jr||Kr||Function("return this")(),Xr=Qr.Symbol,Zr=Object.prototype,en=Zr.hasOwnProperty,tn=Zr.toString,rn=Xr?Xr.toStringTag:void 0;var nn=function(e){var t=en.call(e,rn),r=e[rn];try{e[rn]=void 0;var n=!0}catch(e){}var o=tn.call(e);return n&&(t?e[rn]=r:delete e[rn]),o},on=Object.prototype.toString;var an=function(e){return on.call(e)},sn=Xr?Xr.toStringTag:void 0;var cn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":sn&&sn in Object(e)?nn(e):an(e)};var un=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var ln,dn=function(e){if(!un(e))return!1;var t=cn(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},pn=Qr["__core-js_shared__"],fn=(ln=/[^.]+$/.exec(pn&&pn.keys&&pn.keys.IE_PROTO||""))?"Symbol(src)_1."+ln:"";var mn=function(e){return!!fn&&fn in e},hn=Function.prototype.toString;var vn=function(e){if(null!=e){try{return hn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},gn=/^\[object .+?Constructor\]$/,yn=Function.prototype,wn=Object.prototype,bn=yn.toString,_n=wn.hasOwnProperty,En=RegExp("^"+bn.call(_n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var xn=function(e){return!(!un(e)||mn(e))&&(dn(e)?En:gn).test(vn(e))};var kn=function(e,t){return null==e?void 0:e[t]};var jn=function(e,t){var r=kn(e,t);return xn(r)?r:void 0},On=jn(Qr,"Map"),Pn=jn(Object,"create");var Sn=function(){this.__data__=Pn?Pn(null):{},this.size=0};var Cn=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},An=Object.prototype.hasOwnProperty;var In=function(e){var t=this.__data__;if(Pn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return An.call(t,e)?t[e]:void 0},Tn=Object.prototype.hasOwnProperty;var Ln=function(e){var t=this.__data__;return Pn?void 0!==t[e]:Tn.call(t,e)};var Nn=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Pn&&void 0===t?"__lodash_hash_undefined__":t,this};function Un(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Un.prototype.clear=Sn,Un.prototype.delete=Cn,Un.prototype.get=In,Un.prototype.has=Ln,Un.prototype.set=Nn;var Rn=Un;var zn=function(){this.size=0,this.__data__={hash:new Rn,map:new(On||Gr),string:new Rn}};var Wn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Fn=function(e,t){var r=e.__data__;return Wn(t)?r["string"==typeof t?"string":"hash"]:r.map};var Dn=function(e){var t=Fn(this,e).delete(e);return this.size-=t?1:0,t};var Vn=function(e){return Fn(this,e).get(e)};var Bn=function(e){return Fn(this,e).has(e)};var Mn=function(e,t){var r=Fn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Gn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gn.prototype.clear=zn,Gn.prototype.delete=Dn,Gn.prototype.get=Vn,Gn.prototype.has=Bn,Gn.prototype.set=Mn;var qn=Gn;var Yn=function(e,t){var r=this.__data__;if(r instanceof Gr){var n=r.__data__;if(!On||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new qn(n)}return r.set(e,t),this.size=r.size,this};function $n(e){var t=this.__data__=new Gr(e);this.size=t.size}$n.prototype.clear=qr,$n.prototype.delete=Yr,$n.prototype.get=$r,$n.prototype.has=Hr,$n.prototype.set=Yn;var Hn=$n;var Jn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Kn=function(e){return this.__data__.has(e)};function Qn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new qn;++t<r;)this.add(e[t])}Qn.prototype.add=Qn.prototype.push=Jn,Qn.prototype.has=Kn;var Xn=Qn;var Zn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var eo=function(e,t){return e.has(t)};var to=function(e,t,r,n,o,a){var i=1&r,s=e.length,c=t.length;if(s!=c&&!(i&&c>s))return!1;var u=a.get(e),l=a.get(t);if(u&&l)return u==t&&l==e;var d=-1,p=!0,f=2&r?new Xn:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(n)var v=i?n(h,m,d,t,e,a):n(m,h,d,e,t,a);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!Zn(t,(function(e,t){if(!eo(f,t)&&(m===e||o(m,e,r,n,a)))return f.push(t)}))){p=!1;break}}else if(m!==h&&!o(m,h,r,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p},ro=Qr.Uint8Array;var no=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var oo=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},ao=Xr?Xr.prototype:void 0,io=ao?ao.valueOf:void 0;var so=function(e,t,r,n,o,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new ro(e),new ro(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Rr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=no;case"[object Set]":var c=1&n;if(s||(s=oo),e.size!=t.size&&!c)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=to(s(e),s(t),n,o,a,i);return i.delete(e),l;case"[object Symbol]":if(io)return io.call(e)==io.call(t)}return!1};var co=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},uo=Array.isArray;var lo=function(e,t,r){var n=t(e);return uo(e)?n:co(n,r(e))};var po=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a};var fo=function(){return[]},mo=Object.prototype.propertyIsEnumerable,ho=Object.getOwnPropertySymbols,vo=ho?function(e){return null==e?[]:(e=Object(e),po(ho(e),(function(t){return mo.call(e,t)})))}:fo;var go=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var yo=function(e){return null!=e&&"object"==typeof e};var wo=function(e){return yo(e)&&"[object Arguments]"==cn(e)},bo=Object.prototype,_o=bo.hasOwnProperty,Eo=bo.propertyIsEnumerable,xo=wo(function(){return arguments}())?wo:function(e){return yo(e)&&_o.call(e,"callee")&&!Eo.call(e,"callee")};var ko=function(){return!1},jo=ut((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Qr.Buffer:void 0,a=(o?o.isBuffer:void 0)||ko;e.exports=a})),Oo=/^(?:0|[1-9]\d*)$/;var Po=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Oo.test(e))&&e>-1&&e%1==0&&e<t};var So=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Co={};Co["[object Float32Array]"]=Co["[object Float64Array]"]=Co["[object Int8Array]"]=Co["[object Int16Array]"]=Co["[object Int32Array]"]=Co["[object Uint8Array]"]=Co["[object Uint8ClampedArray]"]=Co["[object Uint16Array]"]=Co["[object Uint32Array]"]=!0,Co["[object Arguments]"]=Co["[object Array]"]=Co["[object ArrayBuffer]"]=Co["[object Boolean]"]=Co["[object DataView]"]=Co["[object Date]"]=Co["[object Error]"]=Co["[object Function]"]=Co["[object Map]"]=Co["[object Number]"]=Co["[object Object]"]=Co["[object RegExp]"]=Co["[object Set]"]=Co["[object String]"]=Co["[object WeakMap]"]=!1;var Ao=function(e){return yo(e)&&So(e.length)&&!!Co[cn(e)]};var Io=function(e){return function(t){return e(t)}},To=ut((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Jr.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a})),Lo=To&&To.isTypedArray,No=Lo?Io(Lo):Ao,Uo=Object.prototype.hasOwnProperty;var Ro=function(e,t){var r=uo(e),n=!r&&xo(e),o=!r&&!n&&jo(e),a=!r&&!n&&!o&&No(e),i=r||n||o||a,s=i?go(e.length,String):[],c=s.length;for(var u in e)!t&&!Uo.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Po(u,c))||s.push(u);return s},zo=Object.prototype;var Wo=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||zo)};var Fo=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Do=Object.prototype.hasOwnProperty;var Vo=function(e){if(!Wo(e))return Fo(e);var t=[];for(var r in Object(e))Do.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Bo=function(e){return null!=e&&So(e.length)&&!dn(e)};var Mo=function(e){return Bo(e)?Ro(e):Vo(e)};var Go=function(e){return lo(e,Mo,vo)},qo=Object.prototype.hasOwnProperty;var Yo=function(e,t,r,n,o,a){var i=1&r,s=Go(e),c=s.length;if(c!=Go(t).length&&!i)return!1;for(var u=c;u--;){var l=s[u];if(!(i?l in t:qo.call(t,l)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var f=!0;a.set(e,t),a.set(t,e);for(var m=i;++u<c;){var h=e[l=s[u]],v=t[l];if(n)var g=i?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===g?h===v||o(h,v,r,n,a):g)){f=!1;break}m||(m="constructor"==l)}if(f&&!m){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return a.delete(e),a.delete(t),f},$o=jn(Qr,"DataView"),Ho=jn(Qr,"Promise"),Jo=jn(Qr,"Set"),Ko=jn(Qr,"WeakMap"),Qo=vn($o),Xo=vn(On),Zo=vn(Ho),ea=vn(Jo),ta=vn(Ko),ra=cn;($o&&"[object DataView]"!=ra(new $o(new ArrayBuffer(1)))||On&&"[object Map]"!=ra(new On)||Ho&&"[object Promise]"!=ra(Ho.resolve())||Jo&&"[object Set]"!=ra(new Jo)||Ko&&"[object WeakMap]"!=ra(new Ko))&&(ra=function(e){var t=cn(e),r="[object Object]"==t?e.constructor:void 0,n=r?vn(r):"";if(n)switch(n){case Qo:return"[object DataView]";case Xo:return"[object Map]";case Zo:return"[object Promise]";case ea:return"[object Set]";case ta:return"[object WeakMap]"}return t});var na=ra,oa="[object Object]",aa=Object.prototype.hasOwnProperty;var ia=function(e,t,r,n,o,a){var i=uo(e),s=uo(t),c=i?"[object Array]":na(e),u=s?"[object Array]":na(t),l=(c="[object Arguments]"==c?oa:c)==oa,d=(u="[object Arguments]"==u?oa:u)==oa,p=c==u;if(p&&jo(e)){if(!jo(t))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new Hn),i||No(e)?to(e,t,r,n,o,a):so(e,t,c,r,n,o,a);if(!(1&r)){var f=l&&aa.call(e,"__wrapped__"),m=d&&aa.call(t,"__wrapped__");if(f||m){var h=f?e.value():e,v=m?t.value():t;return a||(a=new Hn),o(h,v,r,n,a)}}return!!p&&(a||(a=new Hn),Yo(e,t,r,n,o,a))};var sa=function e(t,r,n,o,a){return t===r||(null==t||null==r||!yo(t)&&!yo(r)?t!=t&&r!=r:ia(t,r,n,o,e,a))};var ca=function(e,t){return sa(e,t)},ua={},la={"{}":void 0},da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=JSON.stringify(e),n=V({permissions:la[t]}),a=Ze(n,2),i=a[0],s=a[1],c=K(),u=o((function(){return c(e).then((function(e){ca(e,i.permissions)||(la[t]=e,s({permissions:e}))})).catch((function(e){s({error:e})}))}),[t,e,c]);return r((function(){u()}),[t]),qe(qe({},i),{},{refetch:u})},pa={auth:{dialog:{container_permissions:"Container permissions",resource_permissions:"Resource permissions",login_required:"Login required"},action:{permissions:"Permissions",signup:"Signup",reset_password:"Reset password",set_new_password:"Set new password",logout:"Logout",login:"Login",view_my_profile:"View my profile",edit_my_profile:"Edit my profile"},right:{resource:{read:"Read",append:"Append",write:"Write",control:"Control"},container:{read:"List",append:"Add",write:"Add",control:"Control"}},agent:{anonymous:"All users",authenticated:"Connected users"},input:{agent_select:"Add an user...",name:"Surname",username:"User ID",email:"Email address",username_or_email:"User ID or email address",current_password:"Current password",new_password:"New password",confirm_new_password:"Confirm new password"},helper:{login:"Sign in to your account",signup:"Create your account",reset_password:"Enter your email address below and we will send you a link to reset your password",set_new_password:"Please enter your email address and a new password below"},message:{resource_show_forbidden:"You are not allowed to view this resource",resource_edit_forbidden:"You are not allowed to edit this resource",resource_delete_forbidden:"You are not allowed to delete this resource",resource_control_forbidden:"You are not allowed to control this resource",container_create_forbidden:"You are not allowed to create new resource",container_list_forbidden:"You are not allowed to list these resources",user_not_allowed_to_login:"You are not allowed to login with this account",user_email_not_found:"No account found with this email address",user_email_exist:"An account already exist with this email address",username_exist:"An account already exist with this user ID",username_invalid:"This username is invalid. Only lowercase characters, numbers, dots and hyphens are authorized",new_user_created:"Your account has been successfully created",user_connected:"You are now connected",user_disconnected:"You are now disconnected",bad_request:"Bad request (Error message returned by the server: %{error})",account_settings_updated:"Your account settings have been successfully updated",login_to_continue:"Please login to continue",choose_pod_provider:"Please choose a POD provider in the list below. All application data will be saved on your POD."},notification:{reset_password_submitted:"An email has been sent with reset password instructions",reset_password_error:"An error occurred",password_changed:"Password changed successfully",new_password_error:"An error occurred",invalid_password:"Invalid password",get_settings_error:"An error occurred",update_settings_error:"An error occurred"}}},fa={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la ressource",login_required:"Connexion requise"},action:{permissions:"Permissions",signup:"S'inscrire",reset_password:"Mot de passe oubli ?",set_new_password:"Dfinir le mot de passe",logout:"Se dconnecter",login:"Se connecter",view_my_profile:"Voir mon profil",edit_my_profile:"diter mon profil"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connects"},input:{agent_select:"Ajouter un utilisateur...",name:"Prnom",username:"Identifiant unique",email:"Adresse e-mail",username_or_email:"Identifiant ou adresse e-mail",current_password:"Mot de passe actuel",new_password:"Nouveau mot de passe",confirm_new_password:"Confirmer le nouveau mot de passe"},helper:{login:"Connectez-vous  votre compte.",signup:"Crez votre compte",reset_password:"Entrez votre adresse mail ci-dessous et nous vous enverrons un lien pour rinitialiser votre mot de passe",set_new_password:"Veuillez entrer votre adresse mail et un nouveau mot de passe ci-dessous"},message:{resource_show_forbidden:"Vous n'avez pas la permission de voir cette ressource",resource_edit_forbidden:"Vous n'avez pas la permission d'diter cette ressource",resource_delete_forbidden:"Vous n'avez pas la permission d'effacer cette ressource",resource_control_forbidden:"Vous n'avez pas la permission d'administrer cette ressource",container_create_forbidden:"Vous n'avez pas la permission de crer des ressources",container_list_forbidden:"Vous n'avez pas la permission de voir ces ressources",user_not_allowed_to_login:"Vous n'avez pas le droit de vous connecter avec ce compte",user_email_not_found:"Aucun compte trouv avec cette adresse mail",user_email_exist:"Un compte existe dj avec cette adresse mail",username_exist:"Un compte existe dj avec cet identifiant",username_invalid:"Cet identifiant n'est pas valide. Seuls les lettres minuscules, les chiffres, les points et les tirets sont autoriss",new_user_created:"Votre compte a t cr avec succs",user_connected:"Vous tes maintenant connect",user_disconnected:"Vous tes maintenant dconnect",bad_request:"Requte errone (Message d'erreur renvoy par le serveur: %{error})",account_settings_updated:"Les paramtres de votre compte ont t mis  jour avec succs",login_to_continue:"Veuillez vous connecter pour continuer",choose_pod_provider:"Veuillez choisir un fournisseur de PODs dans la liste ci-dessous. Toutes les donnes de l'application seront enregistres sur votre POD."},notification:{reset_password_submitted:"Un e-mail a t envoy avec les instructions de rinitialisation du mot de passe",reset_password_error:"Une erreur s'est produite",password_changed:"Le mot de passe a t chang avec succs",new_password_error:"Une erreur s'est produite",invalid_password:"Mot de passe incorrect",get_settings_error:"Une erreur s'est produite",update_settings_error:"Une erreur s'est produite"}}};export{tr as AuthDialog,Tt as CreateWithPermissions,qt as DeleteButtonWithPermissions,Gt as EditActionsWithPermissions,Jt as EditButtonWithPermissions,$t as EditToolbarWithPermissions,Ht as EditWithPermissions,Kt as ListActionsWithPermissions,Qt as ListWithPermissions,Pr as LocalLoginPage,or as LoginPage,Mt as PermissionsButton,lr as PodLoginPage,Cr as ResourceWithPermissions,Xt as ShowActionsWithPermissions,Zt as ShowWithPermissions,or as SsoLoginPage,Lr as UserMenu,_t as authProvider,pa as englishMessages,fa as frenchMessages,Dt as useAgents,Nr as useCheckAuthenticated,It as useCheckPermissions,da as usePermissionsWithRefetch,hr as useSignup};
//# sourceMappingURL=index.es.js.map
