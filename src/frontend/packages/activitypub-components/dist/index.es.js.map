{"version":3,"file":"index.es.js","sources":["../../../node_modules/clsx/dist/clsx.m.js","../../../node_modules/ra-input-rich-text/dist/esm/TiptapEditorContext.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/ColorButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/TiptapEditorProvider.js","../../../node_modules/ra-input-rich-text/dist/esm/useTiptapEditor.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/FormatButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/ListButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/AlignmentButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/LinkButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/useEditorSelection.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/QuoteButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/ClearButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/LevelSelect.js","../../../node_modules/ra-input-rich-text/dist/esm/buttons/ImageButtons.js","../../../node_modules/ra-input-rich-text/dist/esm/RichTextInputToolbar.js","../../../node_modules/ra-input-rich-text/dist/esm/RichTextInput.js","../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../node_modules/final-form/dist/final-form.es.js","../../../node_modules/react-final-form/dist/react-final-form.es.js","../src/constants.js","../src/hooks/useOutbox.js","../src/components/CommentsField/CustomMention.js","../src/components/CommentsField/PostCommentForm.js","../src/components/CommentsField/CommentsList.js","../src/hooks/useCollection.js","../src/components/CommentsField/CommentsField.js","../src/components/CollectionList.js","../src/components/ReferenceCollectionField.js","../src/hooks/useInbox.js","../src/hooks/useWebfinger.js","../src/hooks/useMentions/MentionsList.js","../src/hooks/useMentions/renderMentions.js","../src/hooks/useMentions/useMentions.js"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { createContext } from 'react';\nexport var TiptapEditorContext = createContext(undefined);\n//# sourceMappingURL=TiptapEditorContext.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { Box, Card, ToggleButton, ToggleButtonGroup, } from '@mui/material';\nimport FormatColorTextIcon from '@mui/icons-material/FormatColorText';\nimport FontDownloadIcon from '@mui/icons-material/FontDownload';\nimport { useTranslate } from 'ra-core';\nimport { useTheme } from 'ra-ui-materialui';\nimport { useTiptapEditor } from '../useTiptapEditor';\nimport { grey, red, orange, yellow, green, blue, purple, } from '@mui/material/colors';\nvar ColorType;\n(function (ColorType) {\n    ColorType[\"FONT\"] = \"font\";\n    ColorType[\"BACKGROUND\"] = \"background\";\n})(ColorType || (ColorType = {}));\nexport var ColorButtons = function (props) {\n    var translate = useTranslate();\n    var editor = useTiptapEditor();\n    var _a = React.useState(false), showColorChoiceDialog = _a[0], setShowColorChoiceDialog = _a[1];\n    var _b = React.useState(ColorType.FONT), colorType = _b[0], setColorType = _b[1];\n    var colorLabel = translate('ra.tiptap.color', { _: 'Color' });\n    var highlightLabel = translate('ra.tiptap.highlight', { _: 'Highlight' });\n    var displayColorChoiceDialog = function (colorType) {\n        setShowColorChoiceDialog(true);\n        setColorType(colorType);\n    };\n    return editor ? (React.createElement(Box, { sx: { position: 'relative' } },\n        React.createElement(OutsideListener, { onClick: function () { return setShowColorChoiceDialog(false); } },\n            React.createElement(ToggleButtonGroup, null,\n                React.createElement(ToggleButton, __assign({ \"aria-label\": colorLabel, title: colorLabel }, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), value: \"color\", onClick: function () { return displayColorChoiceDialog(ColorType.FONT); } }),\n                    React.createElement(FormatColorTextIcon, { fontSize: \"inherit\" })),\n                React.createElement(ToggleButton, __assign({ \"aria-label\": highlightLabel, title: highlightLabel }, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), value: \"highlight\", onClick: function () {\n                        return displayColorChoiceDialog(ColorType.BACKGROUND);\n                    } }),\n                    React.createElement(FontDownloadIcon, { fontSize: \"inherit\" }))),\n            showColorChoiceDialog && (React.createElement(ColorChoiceDialog, { editor: editor, close: function () { return setShowColorChoiceDialog(false); }, colorType: colorType }))))) : null;\n};\nvar ColorChoiceDialog = function (_a) {\n    var _b, _c;\n    var editor = _a.editor, close = _a.close, colorType = _a.colorType;\n    var theme = useTheme()[0];\n    var colors = [grey, red, orange, yellow, green, blue, purple];\n    var shades = [900, 700, 500, 300, 100];\n    var selectColor = function (color) {\n        if (colorType === ColorType.FONT) {\n            editor.chain().focus().setColor(color).run();\n        }\n        else {\n            editor.chain().focus().toggleHighlight({ color: color }).run();\n        }\n        close();\n    };\n    return (React.createElement(Card, { sx: {\n            position: 'absolute',\n            top: 38,\n            left: colorType === ColorType.FONT ? 0 : '50%',\n            p: 1,\n            border: \"1px solid \".concat((_c = (_b = theme === null || theme === void 0 ? void 0 : theme.palette) === null || _b === void 0 ? void 0 : _b.background) === null || _c === void 0 ? void 0 : _c.default),\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 1,\n            zIndex: 1,\n        } }, shades.map(function (shade, line) { return (React.createElement(Box, { key: \"shade-\".concat(shade), sx: { display: 'flex', flexDirection: 'row', gap: 1 } }, colors.map(function (color, row) { return (React.createElement(Box, { key: \"color-\".concat(line * colors.length + row + 1), sx: {\n            width: 16,\n            height: 16,\n            cursor: 'pointer',\n            // @ts-ignore\n            backgroundColor: color[shade],\n        }, \n        // @ts-ignore\n        onClick: function () { return selectColor(color[shade]); } })); }))); })));\n};\n/**\n * Component that listens if you click outside of it\n */\nvar OutsideListener = function (_a) {\n    var className = _a.className, onClick = _a.onClick, children = _a.children;\n    var wrapperRef = React.useRef(null);\n    useOutsideListener(wrapperRef, onClick);\n    return (React.createElement(\"div\", { className: className, ref: wrapperRef }, children));\n};\n/**\n * Hook that listens clicks outside of the passed ref\n */\nvar useOutsideListener = function (ref, onClick) {\n    React.useEffect(function () {\n        var handleClickOutside = function (event) {\n            if (ref.current && !ref.current.contains(event.target)) {\n                onClick();\n            }\n        };\n        // Bind the event listener\n        document.addEventListener('mousedown', handleClickOutside);\n        return function () {\n            // Unbind the event listener on clean up\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, [ref, onClick]);\n};\n//# sourceMappingURL=ColorButtons.js.map","import * as React from 'react';\nimport { TiptapEditorContext } from './TiptapEditorContext';\nexport var TiptapEditorProvider = function (_a) {\n    var children = _a.children, value = _a.value;\n    return (React.createElement(TiptapEditorContext.Provider, { value: value }, children));\n};\n//# sourceMappingURL=TiptapEditorProvider.js.map","import { useContext, useEffect, useState } from 'react';\nimport { TiptapEditorContext } from './TiptapEditorContext';\nexport var useTiptapEditor = function () {\n    var _a = useState(false), ready = _a[0], setReady = _a[1];\n    var editor = useContext(TiptapEditorContext);\n    useEffect(function () {\n        var onReady = function () {\n            setReady(true);\n        };\n        if (editor != null) {\n            // This ensure support for hot reload\n            setReady(editor.isEditable);\n            editor.on('create', onReady);\n        }\n        return function () {\n            if (editor != null) {\n                editor.off('create', onReady);\n            }\n        };\n    }, [editor]);\n    if (ready) {\n        return editor;\n    }\n    return null;\n};\n//# sourceMappingURL=useTiptapEditor.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { ToggleButton, ToggleButtonGroup, } from '@mui/material';\nimport FormatBold from '@mui/icons-material/FormatBold';\nimport FormatItalic from '@mui/icons-material/FormatItalic';\nimport FormatUnderlined from '@mui/icons-material/FormatUnderlined';\nimport FormatStrikethrough from '@mui/icons-material/FormatStrikethrough';\nimport Code from '@mui/icons-material/Code';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var FormatButtons = function (props) {\n    var editor = useTiptapEditor();\n    var translate = useTranslate();\n    var _a = useState([]), values = _a[0], setValues = _a[1];\n    var boldLabel = translate('ra.tiptap.bold', {\n        _: 'Bold',\n    });\n    var italicLabel = translate('ra.tiptap.italic', {\n        _: 'Italic',\n    });\n    var underlineLabel = translate('ra.tiptap.underline', {\n        _: 'Underline',\n    });\n    var strikeLabel = translate('ra.tiptap.strike', {\n        _: 'Strikethrough',\n    });\n    var codeLabel = translate('ra.tiptap.code', {\n        _: 'Code',\n    });\n    useEffect(function () {\n        var handleUpdate = function () {\n            setValues(function () {\n                return FormatValues.reduce(function (acc, value) {\n                    if (editor && editor.isActive(value)) {\n                        acc.push(value);\n                    }\n                    return acc;\n                }, []);\n            });\n        };\n        if (editor) {\n            editor.on('update', handleUpdate);\n            editor.on('selectionUpdate', handleUpdate);\n        }\n        return function () {\n            if (editor) {\n                editor.off('update', handleUpdate);\n                editor.off('selectionUpdate', handleUpdate);\n            }\n        };\n    }, [editor]);\n    var handleChange = function (event, newFormats) {\n        FormatValues.forEach(function (format) {\n            var shouldBeDeactivated = editor &&\n                editor.isActive(format) &&\n                !newFormats.includes(format);\n            var shouldBeActivated = editor &&\n                !editor.isActive(format) &&\n                newFormats.includes(format);\n            if (shouldBeDeactivated || shouldBeActivated) {\n                FormatActions[format](editor);\n            }\n        });\n    };\n    return (React.createElement(ToggleButtonGroup, __assign({}, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), onChange: handleChange, value: values }),\n        React.createElement(ToggleButton, { value: \"bold\", \"aria-label\": boldLabel, title: boldLabel },\n            React.createElement(FormatBold, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"italic\", \"aria-label\": italicLabel, title: italicLabel },\n            React.createElement(FormatItalic, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"underline\", \"aria-label\": underlineLabel, title: underlineLabel },\n            React.createElement(FormatUnderlined, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"strike\", \"aria-label\": strikeLabel, title: strikeLabel },\n            React.createElement(FormatStrikethrough, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"code\", \"aria-label\": codeLabel, title: codeLabel },\n            React.createElement(Code, { fontSize: \"inherit\" }))));\n};\nvar FormatValues = ['bold', 'italic', 'underline', 'strike', 'code'];\nvar FormatActions = {\n    bold: function (editor) { return editor.chain().focus().toggleBold().run(); },\n    italic: function (editor) { return editor.chain().focus().toggleItalic().run(); },\n    underline: function (editor) {\n        return editor.chain().focus().toggleUnderline().run();\n    },\n    strike: function (editor) { return editor.chain().focus().toggleStrike().run(); },\n    code: function (editor) { return editor.chain().focus().toggleCode().run(); },\n};\n//# sourceMappingURL=FormatButtons.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { ToggleButton, ToggleButtonGroup, } from '@mui/material';\nimport FormatListBulleted from '@mui/icons-material/FormatListBulleted';\nimport FormatListNumbered from '@mui/icons-material/FormatListNumbered';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var ListButtons = function (props) {\n    var editor = useTiptapEditor();\n    var translate = useTranslate();\n    var bulletListLabel = translate('ra.tiptap.list_bulleted', {\n        _: 'Bulleted list',\n    });\n    var numberListLabel = translate('ra.tiptap.list_numbered', {\n        _: 'Numbered list',\n    });\n    var _a = useState(), value = _a[0], setValue = _a[1];\n    var handleChange = function (event, newFormat) {\n        ListValues.forEach(function (format) {\n            var shouldBeDeactivated = editor && editor.isActive(format) && newFormat !== format;\n            var shouldBeActivated = editor && !editor.isActive(format) && newFormat === format;\n            if (shouldBeDeactivated || shouldBeActivated) {\n                ListActions[format](editor);\n            }\n        });\n    };\n    useEffect(function () {\n        var handleUpdate = function () {\n            setValue(function () {\n                return ListValues.reduce(function (acc, value) {\n                    if (editor && editor.isActive(value)) {\n                        return value;\n                    }\n                    return acc;\n                }, undefined);\n            });\n        };\n        if (editor) {\n            editor.on('update', handleUpdate);\n            editor.on('selectionUpdate', handleUpdate);\n        }\n        return function () {\n            if (editor) {\n                editor.off('update', handleUpdate);\n                editor.off('selectionUpdate', handleUpdate);\n            }\n        };\n    }, [editor]);\n    return (React.createElement(ToggleButtonGroup, __assign({}, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), exclusive: true, onChange: handleChange, value: value }),\n        React.createElement(ToggleButton, { value: \"bulletList\", \"aria-label\": bulletListLabel, title: bulletListLabel },\n            React.createElement(FormatListBulleted, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"orderedList\", \"aria-label\": numberListLabel, title: numberListLabel },\n            React.createElement(FormatListNumbered, { fontSize: \"inherit\" }))));\n};\nvar ListValues = ['bulletList', 'orderedList'];\nvar ListActions = {\n    bulletList: function (editor) {\n        return editor.chain().focus().toggleBulletList().run();\n    },\n    orderedList: function (editor) {\n        return editor.chain().focus().toggleOrderedList().run();\n    },\n};\n//# sourceMappingURL=ListButtons.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { ToggleButton, ToggleButtonGroup, } from '@mui/material';\nimport FormatAlignCenter from '@mui/icons-material/FormatAlignCenter';\nimport FormatAlignLeft from '@mui/icons-material/FormatAlignLeft';\nimport FormatAlignRight from '@mui/icons-material/FormatAlignRight';\nimport FormatAlignJustify from '@mui/icons-material/FormatAlignJustify';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var AlignmentButtons = function (props) {\n    var editor = useTiptapEditor();\n    var translate = useTranslate();\n    var _a = useState('left'), value = _a[0], setValue = _a[1];\n    var leftLabel = translate('ra.tiptap.align_left', { _: 'Align left' });\n    var rightLabel = translate('ra.tiptap.align_right', { _: 'Align right' });\n    var centerLabel = translate('ra.tiptap.align_center', { _: 'Center' });\n    var justifyLabel = translate('ra.tiptap.align_justify', { _: 'Justify' });\n    useEffect(function () {\n        var handleUpdate = function () {\n            setValue(function (currentValue) {\n                return AlignmentValues.reduce(function (acc, value) {\n                    if (editor && editor.isActive({ textAlign: value })) {\n                        return value;\n                    }\n                    return acc;\n                }, currentValue);\n            });\n        };\n        if (editor) {\n            editor.on('update', handleUpdate);\n            editor.on('selectionUpdate', handleUpdate);\n        }\n        return function () {\n            if (editor) {\n                editor.off('update', handleUpdate);\n                editor.off('selectionUpdate', handleUpdate);\n            }\n        };\n    }, [editor]);\n    var handleChange = function (event, newFormat) {\n        if (AlignmentActions[newFormat]) {\n            AlignmentActions[newFormat](editor);\n        }\n    };\n    return (React.createElement(ToggleButtonGroup, __assign({}, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), exclusive: true, onChange: handleChange, value: value }),\n        React.createElement(ToggleButton, { value: \"left\", \"aria-label\": leftLabel, title: leftLabel },\n            React.createElement(FormatAlignLeft, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"center\", \"aria-label\": centerLabel, title: centerLabel },\n            React.createElement(FormatAlignCenter, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"right\", \"aria-label\": rightLabel, title: rightLabel },\n            React.createElement(FormatAlignRight, { fontSize: \"inherit\" })),\n        React.createElement(ToggleButton, { value: \"justify\", \"aria-label\": justifyLabel, title: justifyLabel },\n            React.createElement(FormatAlignJustify, { fontSize: \"inherit\" }))));\n};\nvar AlignmentValues = ['left', 'center', 'right', 'justify', 'code'];\nvar AlignmentActions = {\n    left: function (editor) { return editor.chain().focus().setTextAlign('left').run(); },\n    center: function (editor) {\n        return editor.chain().focus().setTextAlign('center').run();\n    },\n    right: function (editor) {\n        return editor.chain().focus().setTextAlign('right').run();\n    },\n    justify: function (editor) {\n        return editor.chain().focus().setTextAlign('justify').run();\n    },\n};\n//# sourceMappingURL=AlignmentButtons.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { ToggleButton } from '@mui/material';\nimport InsertLink from '@mui/icons-material/InsertLink';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nimport { useEditorSelection } from './useEditorSelection';\nexport var LinkButtons = function (props) {\n    var editor = useTiptapEditor();\n    var translate = useTranslate();\n    var currentTextSelection = useEditorSelection();\n    var label = translate('ra.tiptap.link', {\n        _: 'Add a link',\n    });\n    var handleClick = function () {\n        if (!editor.can().setLink({ href: '' })) {\n            return;\n        }\n        var url = window.prompt('URL');\n        editor\n            .chain()\n            .focus()\n            .extendMarkRange('link')\n            .setLink({ href: url })\n            .run();\n    };\n    return (React.createElement(ToggleButton, __assign({ \"aria-label\": label, title: label }, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable) || !currentTextSelection, value: \"link\", onClick: handleClick, selected: editor && editor.isActive('link') }),\n        React.createElement(InsertLink, { fontSize: \"inherit\" })));\n};\n//# sourceMappingURL=LinkButtons.js.map","import { useEffect, useState } from 'react';\nimport { useTiptapEditor } from '../useTiptapEditor';\n/**\n * A hook that returns the current text selection in the editor.\n * @returns {(string|null)} The current text selection if any, or null.\n */\nexport var useEditorSelection = function () {\n    var editor = useTiptapEditor();\n    var _a = useState(editor\n        ? editor.state.doc.textBetween(editor.state.selection.from, editor.state.selection.to)\n        : null), selection = _a[0], setSelection = _a[1];\n    useEffect(function () {\n        var handleSelectionChange = function () {\n            setSelection(editor\n                ? editor.state.doc.textBetween(editor.state.selection.from, editor.state.selection.to)\n                : null);\n        };\n        if (editor) {\n            editor.on('selectionUpdate', handleSelectionChange);\n        }\n        return function () {\n            if (editor) {\n                editor.off('selectionUpdate', handleSelectionChange);\n            }\n        };\n    }, [editor]);\n    return selection;\n};\n//# sourceMappingURL=useEditorSelection.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { ToggleButton } from '@mui/material';\nimport FormatQuote from '@mui/icons-material/FormatQuote';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var QuoteButtons = function (props) {\n    var editor = useTiptapEditor();\n    var translate = useTranslate();\n    var _a = useState(false), isActive = _a[0], setIsActive = _a[1];\n    var label = translate('ra.tiptap.blockquote', {\n        _: 'Blockquote',\n    });\n    useEffect(function () {\n        var handleUpdate = function () {\n            setIsActive(editor && editor.isActive('blockquote'));\n        };\n        if (editor) {\n            editor.on('update', handleUpdate);\n            editor.on('selectionUpdate', handleUpdate);\n        }\n        return function () {\n            if (editor) {\n                editor.off('update', handleUpdate);\n                editor.off('selectionUpdate', handleUpdate);\n            }\n        };\n    }, [editor]);\n    return (React.createElement(ToggleButton, __assign({ \"aria-label\": label, title: label }, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), onClick: function () { return editor.chain().focus().toggleBlockquote().run(); }, selected: isActive, value: \"quote\" }),\n        React.createElement(FormatQuote, { fontSize: \"inherit\" })));\n};\n//# sourceMappingURL=QuoteButtons.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { ToggleButton } from '@mui/material';\nimport FormatClear from '@mui/icons-material/FormatClear';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var ClearButtons = function (props) {\n    var editor = useTiptapEditor();\n    var translate = useTranslate();\n    var label = translate('ra.tiptap.clear_format', {\n        _: 'Clear format',\n    });\n    return (React.createElement(ToggleButton, __assign({ \"aria-label\": label, title: label }, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), value: \"clear\", onClick: function () { return editor.chain().focus().unsetAllMarks().run(); } }),\n        React.createElement(FormatClear, { fontSize: \"inherit\" })));\n};\n//# sourceMappingURL=ClearButtons.js.map","import * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { List, ListItem, ListItemText, Menu, MenuItem } from '@mui/material';\nimport { styled, alpha } from '@mui/material/styles';\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport { useTranslate } from 'ra-core';\nimport clsx from 'clsx';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var LevelSelect = function (props) {\n    var _a;\n    var translate = useTranslate();\n    var editor = useTiptapEditor();\n    var _b = useState(null), anchorElement = _b[0], setAnchorElement = _b[1];\n    var size = props.size;\n    var _c = useState(options[0]), selectedOption = _c[0], setSelectedOption = _c[1];\n    var handleMenuItemClick = function (event, index) {\n        setAnchorElement(null);\n        var selectedItem = options[index];\n        if (selectedItem.value === 'paragraph') {\n            editor.chain().focus().setParagraph().run();\n        }\n        else if (selectedItem.value === 'heading') {\n            editor\n                .chain()\n                .focus()\n                .setHeading({ level: selectedItem.level })\n                .run();\n        }\n    };\n    var handleClickListItem = function (event) {\n        setAnchorElement(event.currentTarget);\n    };\n    var handleClose = function (event) {\n        setAnchorElement(null);\n    };\n    useEffect(function () {\n        var handleUpdate = function () {\n            setSelectedOption(function (currentOption) {\n                return options.reduce(function (acc, option) {\n                    if (editor) {\n                        if (option.value === 'paragraph' &&\n                            editor.isActive('paragraph')) {\n                            return option;\n                        }\n                        if (editor.isActive('heading', {\n                            level: option.level,\n                        })) {\n                            return option;\n                        }\n                    }\n                    return acc;\n                }, currentOption);\n            });\n        };\n        if (editor) {\n            editor.on('update', handleUpdate);\n            editor.on('selectionUpdate', handleUpdate);\n        }\n        return function () {\n            if (editor) {\n                editor.off('update', handleUpdate);\n                editor.off('selectionUpdate', handleUpdate);\n            }\n        };\n    }, [editor]);\n    return (React.createElement(Root, null,\n        React.createElement(List, { component: \"nav\", \"aria-label\": translate('ra.tiptap.select_level', {\n                _: 'Select the level',\n            }), dense: true, disablePadding: true, className: classes.list },\n            React.createElement(ListItem, { button: true, \"aria-haspopup\": \"true\", \"aria-controls\": \"level-menu\", \"aria-label\": translate('ra.tiptap.current_level', {\n                    _: 'Current level',\n                }), disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), onClick: handleClickListItem, className: clsx((_a = {},\n                    _a[classes.sizeSmall] = size === 'small',\n                    _a[classes.sizeLarge] = size === 'large',\n                    _a)) },\n                React.createElement(ListItemText, { primary: translate(selectedOption.label, {\n                        _: selectedOption.defaultLabel,\n                    }) }),\n                React.createElement(ArrowDropDownIcon, null))),\n        React.createElement(Menu, { anchorEl: anchorElement, open: Boolean(anchorElement), id: \"level-menu\", onClose: handleClose }, options.map(function (option, index) { return (React.createElement(MenuItem, { key: option.label, selected: option === selectedOption, onClick: function (event) {\n                handleMenuItemClick(event, index);\n            } }, translate(option.label, { _: option.defaultLabel }))); }))));\n};\nvar options = [\n    {\n        label: 'ra.tiptap.paragraph',\n        defaultLabel: 'Normal',\n        value: 'paragraph',\n    },\n    {\n        label: 'ra.tiptap.heading1',\n        defaultLabel: 'Heading 1',\n        value: 'heading',\n        level: 1,\n    },\n    {\n        label: 'ra.tiptap.heading2',\n        defaultLabel: 'Heading 2',\n        value: 'heading',\n        level: 2,\n    },\n    {\n        label: 'ra.tiptap.heading3',\n        defaultLabel: 'Heading 3',\n        value: 'heading',\n        level: 3,\n    },\n    {\n        label: 'ra.tiptap.heading4',\n        defaultLabel: 'Heading 4',\n        value: 'heading',\n        level: 4,\n    },\n    {\n        label: 'ra.tiptap.heading5',\n        defaultLabel: 'Heading 5',\n        value: 'heading',\n        level: 5,\n    },\n    {\n        label: 'ra.tiptap.heading6',\n        defaultLabel: 'Heading 6',\n        value: 'heading',\n        level: 6,\n    },\n];\nvar PREFIX = 'RaRichTextInputLevelSelect';\nvar classes = {\n    list: \"\".concat(PREFIX, \"-list\"),\n    sizeSmall: \"\".concat(PREFIX, \"-sizeSmall\"),\n    sizeLarge: \"\".concat(PREFIX, \"-sizeLarge\"),\n};\nvar Root = styled('div')(function (_a) {\n    var _b;\n    var theme = _a.theme;\n    return (_b = {},\n        _b[\"&.\".concat(classes.list)] = {\n            borderRadius: theme.shape.borderRadius,\n            border: \"1px solid \".concat(alpha(theme.palette.action.active, 0.12)),\n        },\n        _b[\"& .\".concat(classes.sizeSmall)] = {\n            paddingTop: 1,\n            paddingBottom: 1,\n            '& .MuiTypography-root': {\n                fontSize: theme.typography.pxToRem(13),\n            },\n        },\n        _b[\"& .\".concat(classes.sizeLarge)] = {\n            paddingTop: 8,\n            paddingBottom: 8,\n            '& .MuiTypography-root': {\n                fontSize: theme.typography.pxToRem(15),\n            },\n        },\n        _b);\n});\n//# sourceMappingURL=LevelSelect.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { ToggleButton } from '@mui/material';\nimport ImageIcon from '@mui/icons-material/Image';\nimport { useTranslate } from 'ra-core';\nimport { useTiptapEditor } from '../useTiptapEditor';\nexport var ImageButtons = function (props) {\n    var translate = useTranslate();\n    var editor = useTiptapEditor();\n    var label = translate('ra.tiptap.image', { _: 'Image' });\n    var addImage = React.useCallback(function () {\n        var url = window.prompt(translate('ra.tiptap.image_dialog', { _: 'Image URL' }));\n        if (url) {\n            editor.chain().focus().setImage({ src: url }).run();\n        }\n    }, [editor, translate]);\n    return editor ? (React.createElement(ToggleButton, __assign({ \"aria-label\": label, title: label }, props, { disabled: !(editor === null || editor === void 0 ? void 0 : editor.isEditable), value: \"image\", onClick: addImage }),\n        React.createElement(ImageIcon, { fontSize: \"inherit\" }))) : null;\n};\n//# sourceMappingURL=ImageButtons.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport { AlignmentButtons, ClearButtons, FormatButtons, LevelSelect, ListButtons, LinkButtons, QuoteButtons, ImageButtons, ColorButtons, } from './buttons';\n/**\n * A toolbar for the <RichTextInput>.\n * @param props The toolbar props.\n * @param {ReactNode} props.children The toolbar children, usually many <ToggleButton>.\n * @param {'small' | 'medium' | 'large'} props.size The default size to apply to the **default** children.\n *\n * @example <caption>Customizing the size</caption>\n * import { RichTextInput, RichTextInputToolbar } from 'ra-input-rich-text';\n * const MyRichTextInput = (props) => (\n *     <RichTextInput\n *         toolbar={<RichTextInputToolbar size=\"large\" />}\n *         label=\"Body\"\n *         source=\"body\"\n *         {...props}\n *     />\n * );\n *\n * @example <caption>Customizing the children</caption>\n * import { RichTextInput, RichTextInputToolbar } from 'ra-input-rich-text';\n * const MyRichTextInput = ({ size, ...props }) => (\n *     <RichTextInput\n *         toolbar={(\n *             <RichTextInputToolbar>\n *                 <LevelSelect size={size} />\n *                 <FormatButtons size={size} />\n *                 <ColorButtons size={size} />\n *                 <ListButtons size={size} />\n *                 <LinkButtons size={size} />\n *                 <ImageButtons size={size} />\n *                 <QuoteButtons size={size} />\n *                 <ClearButtons size={size} />\n *             </RichTextInputToolbar>\n *         )}\n *         label=\"Body\"\n *         source=\"body\"\n *         {...props}\n *     />\n * );\n */\nexport var RichTextInputToolbar = function (props) {\n    var _a = props.size, size = _a === void 0 ? 'medium' : _a, _b = props.children, children = _b === void 0 ? (React.createElement(React.Fragment, null,\n        React.createElement(LevelSelect, { size: size }),\n        React.createElement(FormatButtons, { size: size }),\n        React.createElement(ColorButtons, { size: size }),\n        React.createElement(AlignmentButtons, { size: size }),\n        React.createElement(ListButtons, { size: size }),\n        React.createElement(LinkButtons, { size: size }),\n        React.createElement(ImageButtons, { size: size }),\n        React.createElement(QuoteButtons, { size: size }),\n        React.createElement(ClearButtons, { size: size }))) : _b, rest = __rest(props, [\"size\", \"children\"]);\n    return (React.createElement(Root, __assign({ className: classes.root }, rest), children));\n};\nvar PREFIX = 'RaRichTextInputToolbar';\nvar classes = {\n    root: \"\".concat(PREFIX, \"-root\"),\n};\nvar Root = styled('div')(function (_a) {\n    var _b;\n    var theme = _a.theme;\n    return (_b = {},\n        _b[\"&.\".concat(classes.root)] = {\n            display: 'flex',\n            flexWrap: 'wrap',\n            alignItems: 'center',\n            '& > *': {\n                marginRight: theme.spacing(1),\n                marginBottom: theme.spacing(1),\n            },\n            '& > *:last-child': {\n                marginRight: 0,\n            },\n        },\n        _b);\n});\n//# sourceMappingURL=RichTextInputToolbar.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport clsx from 'clsx';\nimport { useEditor, EditorContent } from '@tiptap/react';\nimport StarterKit from '@tiptap/starter-kit';\nimport Underline from '@tiptap/extension-underline';\nimport Link from '@tiptap/extension-link';\nimport TextAlign from '@tiptap/extension-text-align';\nimport Image from '@tiptap/extension-image';\nimport TextStyle from '@tiptap/extension-text-style';\nimport { Color } from '@tiptap/extension-color';\nimport Highlight from '@tiptap/extension-highlight';\nimport { FormHelperText } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useInput, useResourceContext } from 'ra-core';\nimport { InputHelperText, Labeled, } from 'ra-ui-materialui';\nimport { TiptapEditorProvider } from './TiptapEditorProvider';\nimport { RichTextInputToolbar } from './RichTextInputToolbar';\n/**\n * A rich text editor for the react-admin that is accessible and supports translations. Based on [Tiptap](https://www.tiptap.dev/).\n * @param props The input props. Accept all common react-admin input props.\n * @param {EditorOptions} props.editorOptions The options to pass to the Tiptap editor. See Tiptap settings [here](https://tiptap.dev/api/editor#settings).\n * @param {ReactNode} props.toolbar The toolbar containing the editors commands.\n *\n * @example <caption>Customizing the editors options</caption>\n * import { RichTextInput, RichTextInputToolbar } from 'ra-input-rich-text';\n * const MyRichTextInput = (props) => (\n *     <RichTextInput\n *         toolbar={<RichTextInputToolbar size=\"large\" />}\n *         label=\"Body\"\n *         source=\"body\"\n *         {...props}\n *     />\n * );\n *\n * @example <caption>Customizing the toolbar size</caption>\n * import { RichTextInput, RichTextInputToolbar } from 'ra-input-rich-text';\n * const MyRichTextInput = (props) => (\n *     <RichTextInput\n *         toolbar={<RichTextInputToolbar size=\"large\" />}\n *         label=\"Body\"\n *         source=\"body\"\n *         {...props}\n *     />\n * );\n *\n * @example <caption>Customizing the toolbar commands</caption>\n * import { RichTextInput, RichTextInputToolbar } from 'ra-input-rich-text';\n * const MyRichTextInput = ({ size, ...props }) => (\n *     <RichTextInput\n *         toolbar={(\n *             <RichTextInputToolbar>\n *                 <LevelSelect size={size} />\n *                 <FormatButtons size={size} />\n *                 <ColorButtons size={size} />\n *                 <ListButtons size={size} />\n *                 <LinkButtons size={size} />\n *                 <ImageButtons size={size} />\n *                 <QuoteButtons size={size} />\n *                 <ClearButtons size={size} />\n *             </RichTextInputToolbar>\n *         )}\n *         label=\"Body\"\n *         source=\"body\"\n *         {...props}\n *     />\n * );\n */\nexport var RichTextInput = function (props) {\n    var _a, _b;\n    var className = props.className, _c = props.defaultValue, defaultValue = _c === void 0 ? '' : _c, _d = props.disabled, disabled = _d === void 0 ? false : _d, _e = props.editorOptions, editorOptions = _e === void 0 ? DefaultEditorOptions : _e, fullWidth = props.fullWidth, helperText = props.helperText, label = props.label, _f = props.readOnly, readOnly = _f === void 0 ? false : _f, source = props.source, toolbar = props.toolbar;\n    var resource = useResourceContext(props);\n    var _g = useInput(__assign(__assign({}, props), { source: source, defaultValue: defaultValue })), id = _g.id, field = _g.field, isRequired = _g.isRequired, fieldState = _g.fieldState, isSubmitted = _g.formState.isSubmitted;\n    var editor = useEditor(__assign(__assign({}, editorOptions), { editable: !disabled && !readOnly, content: field.value, editorProps: __assign(__assign({}, editorOptions === null || editorOptions === void 0 ? void 0 : editorOptions.editorProps), { attributes: __assign(__assign({}, (_a = editorOptions === null || editorOptions === void 0 ? void 0 : editorOptions.editorProps) === null || _a === void 0 ? void 0 : _a.attributes), { id: id }) }) }));\n    var error = fieldState.error, invalid = fieldState.invalid, isTouched = fieldState.isTouched;\n    useEffect(function () {\n        if (!editor)\n            return;\n        var _a = editor.state.selection, from = _a.from, to = _a.to;\n        editor.commands.setContent(field.value, false, {\n            preserveWhitespace: true,\n        });\n        editor.commands.setTextSelection({ from: from, to: to });\n    }, [editor, field.value]);\n    useEffect(function () {\n        var _a;\n        if (!editor)\n            return;\n        editor.setOptions({\n            editable: !disabled && !readOnly,\n            editorProps: __assign(__assign({}, editorOptions === null || editorOptions === void 0 ? void 0 : editorOptions.editorProps), { attributes: __assign(__assign({}, (_a = editorOptions === null || editorOptions === void 0 ? void 0 : editorOptions.editorProps) === null || _a === void 0 ? void 0 : _a.attributes), { id: id }) }),\n        });\n    }, [\n        disabled,\n        editor,\n        readOnly,\n        id,\n        editorOptions === null || editorOptions === void 0 ? void 0 : editorOptions.editorProps,\n        (_b = editorOptions === null || editorOptions === void 0 ? void 0 : editorOptions.editorProps) === null || _b === void 0 ? void 0 : _b.attributes,\n    ]);\n    useEffect(function () {\n        if (!editor) {\n            return;\n        }\n        var handleEditorUpdate = function () {\n            if (editor.isEmpty) {\n                field.onChange('');\n                field.onBlur();\n                return;\n            }\n            var html = editor.getHTML();\n            field.onChange(html);\n            field.onBlur();\n        };\n        editor.on('update', handleEditorUpdate);\n        return function () {\n            editor.off('update', handleEditorUpdate);\n        };\n    }, [editor, field]);\n    return (React.createElement(Labeled, { isRequired: isRequired, label: label, id: \"\".concat(id, \"-label\"), color: (fieldState === null || fieldState === void 0 ? void 0 : fieldState.invalid) ? 'error' : undefined, source: source, resource: resource, fullWidth: fullWidth },\n        React.createElement(RichTextInputContent, { className: clsx('ra-input', \"ra-input-\".concat(source), className), editor: editor, error: error, helperText: helperText, id: id, isTouched: isTouched, isSubmitted: isSubmitted, invalid: invalid, toolbar: toolbar || React.createElement(RichTextInputToolbar, null) })));\n};\n/**\n * Extracted in a separate component so that we can remove fullWidth from the props injected by Labeled\n * and avoid warnings about unknown props on Root.\n */\nvar RichTextInputContent = function (_a) {\n    var className = _a.className, editor = _a.editor, error = _a.error, fullWidth = _a.fullWidth, helperText = _a.helperText, id = _a.id, isTouched = _a.isTouched, isSubmitted = _a.isSubmitted, invalid = _a.invalid, toolbar = _a.toolbar;\n    return (React.createElement(Root, { className: className },\n        React.createElement(TiptapEditorProvider, { value: editor },\n            toolbar,\n            React.createElement(EditorContent, { \"aria-labelledby\": \"\".concat(id, \"-label\"), className: classes.editorContent, editor: editor })),\n        React.createElement(FormHelperText, { className: (isTouched || isSubmitted) && invalid\n                ? 'ra-rich-text-input-error'\n                : '', error: (isTouched || isSubmitted) && invalid },\n            React.createElement(InputHelperText, { touched: isTouched || isSubmitted, error: error === null || error === void 0 ? void 0 : error.message, helperText: helperText }))));\n};\nexport var DefaultEditorOptions = {\n    extensions: [\n        StarterKit,\n        Underline,\n        Link,\n        TextAlign.configure({\n            types: ['heading', 'paragraph'],\n        }),\n        Image.configure({\n            inline: true,\n        }),\n        TextStyle,\n        Color,\n        Highlight.configure({ multicolor: true }),\n    ],\n};\nvar PREFIX = 'RaRichTextInput';\nvar classes = {\n    editorContent: \"\".concat(PREFIX, \"-editorContent\"),\n};\nvar Root = styled('div', {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})(function (_a) {\n    var _b;\n    var theme = _a.theme;\n    return (_b = {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center'\n        },\n        _b[\"& .\".concat(classes.editorContent)] = {\n            width: '100%',\n            '& .ProseMirror': {\n                backgroundColor: theme.palette.background.default,\n                borderColor: theme.palette.mode === 'light'\n                    ? 'rgba(0, 0, 0, 0.23)'\n                    : 'rgba(255, 255, 255, 0.23)',\n                borderRadius: theme.shape.borderRadius,\n                borderStyle: 'solid',\n                borderWidth: '1px',\n                padding: theme.spacing(1),\n                '&[contenteditable=\"false\"], &[contenteditable=\"false\"]:hover, &[contenteditable=\"false\"]:focus': {\n                    backgroundColor: theme.palette.action.disabledBackground,\n                },\n                '&:hover': {\n                    backgroundColor: theme.palette.action.hover,\n                },\n                '&:focus': {\n                    backgroundColor: theme.palette.background.default,\n                },\n                '& p': {\n                    margin: '0 0 1em 0',\n                    '&:last-child': {\n                        marginBottom: 0,\n                    },\n                },\n            },\n        },\n        _b);\n});\n//# sourceMappingURL=RichTextInput.js.map","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n//      \nvar charCodeOfDot = \".\".charCodeAt(0);\nvar reEscapeChar = /\\\\(\\\\)?/g;\nvar rePropName = RegExp( // Match anything that isn't a dot or bracket.\n\"[^.[\\\\]]+\" + \"|\" + // Or match property names within brackets.\n\"\\\\[(?:\" + // Match a non-string expression.\n\"([^\\\"'][^[]*)\" + \"|\" + // Or match strings (supports escaping characters).\n\"([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2\" + \")\\\\]\" + \"|\" + // Or match \"\" as the space between consecutive dots or empty brackets.\n\"(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))\", \"g\");\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\n\nvar stringToPath = function stringToPath(string) {\n  var result = [];\n\n  if (string.charCodeAt(0) === charCodeOfDot) {\n    result.push(\"\");\n  }\n\n  string.replace(rePropName, function (match, expression, quote, subString) {\n    var key = match;\n\n    if (quote) {\n      key = subString.replace(reEscapeChar, \"$1\");\n    } else if (expression) {\n      key = expression.trim();\n    }\n\n    result.push(key);\n  });\n  return result;\n};\n\nvar keysCache = {};\nvar keysRegex = /[.[\\]]+/;\n\nvar toPath = function toPath(key) {\n  if (key === null || key === undefined || !key.length) {\n    return [];\n  }\n\n  if (typeof key !== \"string\") {\n    throw new Error(\"toPath() expects a string\");\n  }\n\n  if (keysCache[key] == null) {\n    /**\n     * The following patch fixes issue 456, introduced since v4.20.3:\n     *\n     * Before v4.20.3, i.e. in v4.20.2, a `key` like 'choices[]' would map to ['choices']\n     * (e.g. an array of choices used where 'choices[]' is name attribute of an input of type checkbox).\n     *\n     * Since v4.20.3, a `key` like 'choices[]' would map to ['choices', ''] which is wrong and breaks\n     * this kind of inputs e.g. in React.\n     *\n     * v4.20.3 introduced an unwanted breaking change, this patch fixes it, see the issue at the link below.\n     *\n     * @see https://github.com/final-form/final-form/issues/456\n     */\n    if (key.endsWith(\"[]\")) {\n      // v4.20.2 (a `key` like 'choices[]' should map to ['choices'], which is fine).\n      keysCache[key] = key.split(keysRegex).filter(Boolean);\n    } else {\n      // v4.20.3 (a `key` like 'choices[]' maps to ['choices', ''], which breaks applications relying on inputs like `<input type=\"checkbox\" name=\"choices[]\" />`).\n      keysCache[key] = stringToPath(key);\n    }\n  }\n\n  return keysCache[key];\n};\n\n//      \n\nvar getIn = function getIn(state, complexKey) {\n  // Intentionally using iteration rather than recursion\n  var path = toPath(complexKey);\n  var current = state;\n\n  for (var i = 0; i < path.length; i++) {\n    var key = path[i];\n\n    if (current === undefined || current === null || typeof current !== \"object\" || Array.isArray(current) && isNaN(key)) {\n      return undefined;\n    }\n\n    current = current[key];\n  }\n\n  return current;\n};\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nvar setInRecursor = function setInRecursor(current, index, path, value, destroyArrays) {\n  if (index >= path.length) {\n    // end of recursion\n    return value;\n  }\n\n  var key = path[index]; // determine type of key\n\n  if (isNaN(key)) {\n    var _extends2;\n\n    // object set\n    if (current === undefined || current === null) {\n      var _ref;\n\n      // recurse\n      var _result2 = setInRecursor(undefined, index + 1, path, value, destroyArrays); // delete or create an object\n\n\n      return _result2 === undefined ? undefined : (_ref = {}, _ref[key] = _result2, _ref);\n    }\n\n    if (Array.isArray(current)) {\n      throw new Error(\"Cannot set a non-numeric property on an array\");\n    } // current exists, so make a copy of all its values, and add/update the new one\n\n\n    var _result = setInRecursor(current[key], index + 1, path, value, destroyArrays);\n\n    if (_result === undefined) {\n      var numKeys = Object.keys(current).length;\n\n      if (current[key] === undefined && numKeys === 0) {\n        // object was already empty\n        return undefined;\n      }\n\n      if (current[key] !== undefined && numKeys <= 1) {\n        // only key we had was the one we are deleting\n        if (!isNaN(path[index - 1]) && !destroyArrays) {\n          // we are in an array, so return an empty object\n          return {};\n        } else {\n          return undefined;\n        }\n      }\n\n      current[key];\n          var _final = _objectWithoutPropertiesLoose(current, [key].map(_toPropertyKey));\n\n      return _final;\n    } // set result in key\n\n\n    return _extends({}, current, (_extends2 = {}, _extends2[key] = _result, _extends2));\n  } // array set\n\n\n  var numericKey = Number(key);\n\n  if (current === undefined || current === null) {\n    // recurse\n    var _result3 = setInRecursor(undefined, index + 1, path, value, destroyArrays); // if nothing returned, delete it\n\n\n    if (_result3 === undefined) {\n      return undefined;\n    } // create an array\n\n\n    var _array = [];\n    _array[numericKey] = _result3;\n    return _array;\n  }\n\n  if (!Array.isArray(current)) {\n    throw new Error(\"Cannot set a numeric property on an object\");\n  } // recurse\n\n\n  var existingValue = current[numericKey];\n  var result = setInRecursor(existingValue, index + 1, path, value, destroyArrays); // current exists, so make a copy of all its values, and add/update the new one\n\n  var array = [].concat(current);\n\n  if (destroyArrays && result === undefined) {\n    array.splice(numericKey, 1);\n\n    if (array.length === 0) {\n      return undefined;\n    }\n  } else {\n    array[numericKey] = result;\n  }\n\n  return array;\n};\n\nvar setIn = function setIn(state, key, value, destroyArrays) {\n  if (destroyArrays === void 0) {\n    destroyArrays = false;\n  }\n\n  if (state === undefined || state === null) {\n    throw new Error(\"Cannot call setIn() with \" + String(state) + \" state\");\n  }\n\n  if (key === undefined || key === null) {\n    throw new Error(\"Cannot call setIn() with \" + String(key) + \" key\");\n  } // Recursive function needs to accept and return State, but public API should\n  // only deal with Objects\n\n\n  return setInRecursor(state, 0, toPath(key), value, destroyArrays);\n};\n\nvar FORM_ERROR = \"FINAL_FORM/form-error\";\nvar ARRAY_ERROR = \"FINAL_FORM/array-error\";\n\n//      \n/**\n * Converts internal field state to published field state\n */\n\nfunction publishFieldState(formState, field) {\n  var errors = formState.errors,\n      initialValues = formState.initialValues,\n      lastSubmittedValues = formState.lastSubmittedValues,\n      submitErrors = formState.submitErrors,\n      submitFailed = formState.submitFailed,\n      submitSucceeded = formState.submitSucceeded,\n      submitting = formState.submitting,\n      values = formState.values;\n  var active = field.active,\n      blur = field.blur,\n      change = field.change,\n      data = field.data,\n      focus = field.focus,\n      modified = field.modified,\n      modifiedSinceLastSubmit = field.modifiedSinceLastSubmit,\n      name = field.name,\n      touched = field.touched,\n      validating = field.validating,\n      visited = field.visited;\n  var value = getIn(values, name);\n  var error = getIn(errors, name);\n\n  if (error && error[ARRAY_ERROR]) {\n    error = error[ARRAY_ERROR];\n  }\n\n  var submitError = submitErrors && getIn(submitErrors, name);\n  var initial = initialValues && getIn(initialValues, name);\n  var pristine = field.isEqual(initial, value);\n  var dirtySinceLastSubmit = !!(lastSubmittedValues && !field.isEqual(getIn(lastSubmittedValues, name), value));\n  var valid = !error && !submitError;\n  return {\n    active: active,\n    blur: blur,\n    change: change,\n    data: data,\n    dirty: !pristine,\n    dirtySinceLastSubmit: dirtySinceLastSubmit,\n    error: error,\n    focus: focus,\n    initial: initial,\n    invalid: !valid,\n    length: Array.isArray(value) ? value.length : undefined,\n    modified: modified,\n    modifiedSinceLastSubmit: modifiedSinceLastSubmit,\n    name: name,\n    pristine: pristine,\n    submitError: submitError,\n    submitFailed: submitFailed,\n    submitSucceeded: submitSucceeded,\n    submitting: submitting,\n    touched: touched,\n    valid: valid,\n    value: value,\n    visited: visited,\n    validating: validating\n  };\n}\n\n//      \nvar fieldSubscriptionItems = [\"active\", \"data\", \"dirty\", \"dirtySinceLastSubmit\", \"error\", \"initial\", \"invalid\", \"length\", \"modified\", \"modifiedSinceLastSubmit\", \"pristine\", \"submitError\", \"submitFailed\", \"submitSucceeded\", \"submitting\", \"touched\", \"valid\", \"value\", \"visited\", \"validating\"];\n\n//      \nvar shallowEqual = function shallowEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== \"object\" || !a || typeof b !== \"object\" || !b) {\n    return false;\n  }\n\n  var keysA = Object.keys(a);\n  var keysB = Object.keys(b);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(b);\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key) || a[key] !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n//      \nfunction subscriptionFilter (dest, src, previous, subscription, keys, shallowEqualKeys) {\n  var different = false;\n  keys.forEach(function (key) {\n    if (subscription[key]) {\n      dest[key] = src[key];\n\n      if (!previous || (~shallowEqualKeys.indexOf(key) ? !shallowEqual(src[key], previous[key]) : src[key] !== previous[key])) {\n        different = true;\n      }\n    }\n  });\n  return different;\n}\n\n//      \nvar shallowEqualKeys$1 = [\"data\"];\n/**\n * Filters items in a FieldState based on a FieldSubscription\n */\n\nvar filterFieldState = function filterFieldState(state, previousState, subscription, force) {\n  var result = {\n    blur: state.blur,\n    change: state.change,\n    focus: state.focus,\n    name: state.name\n  };\n  var different = subscriptionFilter(result, state, previousState, subscription, fieldSubscriptionItems, shallowEqualKeys$1) || !previousState;\n  return different || force ? result : undefined;\n};\n\n//      \nvar formSubscriptionItems = [\"active\", \"dirty\", \"dirtyFields\", \"dirtyFieldsSinceLastSubmit\", \"dirtySinceLastSubmit\", \"error\", \"errors\", \"hasSubmitErrors\", \"hasValidationErrors\", \"initialValues\", \"invalid\", \"modified\", \"modifiedSinceLastSubmit\", \"pristine\", \"submitting\", \"submitError\", \"submitErrors\", \"submitFailed\", \"submitSucceeded\", \"touched\", \"valid\", \"validating\", \"values\", \"visited\"];\n\n//      \nvar shallowEqualKeys = [\"touched\", \"visited\"];\n/**\n * Filters items in a FormState based on a FormSubscription\n */\n\nfunction filterFormState(state, previousState, subscription, force) {\n  var result = {};\n  var different = subscriptionFilter(result, state, previousState, subscription, formSubscriptionItems, shallowEqualKeys) || !previousState;\n  return different || force ? result : undefined;\n}\n\n//      \n\nvar memoize = function memoize(fn) {\n  var lastArgs;\n  var lastResult;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (!lastArgs || args.length !== lastArgs.length || args.some(function (arg, index) {\n      return !shallowEqual(lastArgs[index], arg);\n    })) {\n      lastArgs = args;\n      lastResult = fn.apply(void 0, args);\n    }\n\n    return lastResult;\n  };\n};\n\nvar isPromise = (function (obj) {\n  return !!obj && (typeof obj === \"object\" || typeof obj === \"function\") && typeof obj.then === \"function\";\n});\n\nvar version = \"4.20.8\";\n\nvar configOptions = [\"debug\", \"initialValues\", \"keepDirtyOnReinitialize\", \"mutators\", \"onSubmit\", \"validate\", \"validateOnBlur\"];\n\nvar tripleEquals = function tripleEquals(a, b) {\n  return a === b;\n};\n\nvar hasAnyError = function hasAnyError(errors) {\n  return Object.keys(errors).some(function (key) {\n    var value = errors[key];\n\n    if (value && typeof value === \"object\" && !(value instanceof Error)) {\n      return hasAnyError(value);\n    }\n\n    return typeof value !== \"undefined\";\n  });\n};\n\nfunction convertToExternalFormState(_ref) {\n  var active = _ref.active,\n      dirtySinceLastSubmit = _ref.dirtySinceLastSubmit,\n      modifiedSinceLastSubmit = _ref.modifiedSinceLastSubmit,\n      error = _ref.error,\n      errors = _ref.errors,\n      initialValues = _ref.initialValues,\n      pristine = _ref.pristine,\n      submitting = _ref.submitting,\n      submitFailed = _ref.submitFailed,\n      submitSucceeded = _ref.submitSucceeded,\n      submitError = _ref.submitError,\n      submitErrors = _ref.submitErrors,\n      valid = _ref.valid,\n      validating = _ref.validating,\n      values = _ref.values;\n  return {\n    active: active,\n    dirty: !pristine,\n    dirtySinceLastSubmit: dirtySinceLastSubmit,\n    modifiedSinceLastSubmit: modifiedSinceLastSubmit,\n    error: error,\n    errors: errors,\n    hasSubmitErrors: !!(submitError || submitErrors && hasAnyError(submitErrors)),\n    hasValidationErrors: !!(error || hasAnyError(errors)),\n    invalid: !valid,\n    initialValues: initialValues,\n    pristine: pristine,\n    submitting: submitting,\n    submitFailed: submitFailed,\n    submitSucceeded: submitSucceeded,\n    submitError: submitError,\n    submitErrors: submitErrors,\n    valid: valid,\n    validating: validating > 0,\n    values: values\n  };\n}\n\nfunction notifySubscriber(subscriber, subscription, state, lastState, filter, force) {\n  var notification = filter(state, lastState, subscription, force);\n\n  if (notification) {\n    subscriber(notification);\n    return true;\n  }\n\n  return false;\n}\n\nfunction notify(_ref2, state, lastState, filter, force) {\n  var entries = _ref2.entries;\n  Object.keys(entries).forEach(function (key) {\n    var entry = entries[Number(key)]; // istanbul ignore next\n\n    if (entry) {\n      var subscription = entry.subscription,\n          subscriber = entry.subscriber,\n          notified = entry.notified;\n\n      if (notifySubscriber(subscriber, subscription, state, lastState, filter, force || !notified)) {\n        entry.notified = true;\n      }\n    }\n  });\n}\n\nfunction createForm(config) {\n  if (!config) {\n    throw new Error(\"No config specified\");\n  }\n\n  var debug = config.debug,\n      destroyOnUnregister = config.destroyOnUnregister,\n      keepDirtyOnReinitialize = config.keepDirtyOnReinitialize,\n      initialValues = config.initialValues,\n      mutators = config.mutators,\n      onSubmit = config.onSubmit,\n      validate = config.validate,\n      validateOnBlur = config.validateOnBlur;\n\n  if (!onSubmit) {\n    throw new Error(\"No onSubmit function specified\");\n  }\n\n  var state = {\n    subscribers: {\n      index: 0,\n      entries: {}\n    },\n    fieldSubscribers: {},\n    fields: {},\n    formState: {\n      asyncErrors: {},\n      dirtySinceLastSubmit: false,\n      modifiedSinceLastSubmit: false,\n      errors: {},\n      initialValues: initialValues && _extends({}, initialValues),\n      invalid: false,\n      pristine: true,\n      submitting: false,\n      submitFailed: false,\n      submitSucceeded: false,\n      resetWhileSubmitting: false,\n      valid: true,\n      validating: 0,\n      values: initialValues ? _extends({}, initialValues) : {}\n    },\n    lastFormState: undefined\n  };\n  var inBatch = 0;\n  var validationPaused = false;\n  var validationBlocked = false;\n  var preventNotificationWhileValidationPaused = false;\n  var nextAsyncValidationKey = 0;\n  var asyncValidationPromises = {};\n\n  var clearAsyncValidationPromise = function clearAsyncValidationPromise(key) {\n    return function (result) {\n      delete asyncValidationPromises[key];\n      return result;\n    };\n  };\n\n  var changeValue = function changeValue(state, name, mutate) {\n    var before = getIn(state.formState.values, name);\n    var after = mutate(before);\n    state.formState.values = setIn(state.formState.values, name, after) || {};\n  };\n\n  var renameField = function renameField(state, from, to) {\n    if (state.fields[from]) {\n      var _extends2, _extends3;\n\n      state.fields = _extends({}, state.fields, (_extends2 = {}, _extends2[to] = _extends({}, state.fields[from], {\n        name: to,\n        // rebind event handlers\n        blur: function blur() {\n          return api.blur(to);\n        },\n        change: function change(value) {\n          return api.change(to, value);\n        },\n        focus: function focus() {\n          return api.focus(to);\n        },\n        lastFieldState: undefined\n      }), _extends2));\n      delete state.fields[from];\n      state.fieldSubscribers = _extends({}, state.fieldSubscribers, (_extends3 = {}, _extends3[to] = state.fieldSubscribers[from], _extends3));\n      delete state.fieldSubscribers[from];\n      var value = getIn(state.formState.values, from);\n      state.formState.values = setIn(state.formState.values, from, undefined) || {};\n      state.formState.values = setIn(state.formState.values, to, value);\n      delete state.lastFormState;\n    }\n  }; // bind state to mutators\n\n\n  var getMutatorApi = function getMutatorApi(key) {\n    return function () {\n      // istanbul ignore next\n      if (mutators) {\n        // ^^ causes branch coverage warning, but needed to appease the Flow gods\n        var mutatableState = {\n          formState: state.formState,\n          fields: state.fields,\n          fieldSubscribers: state.fieldSubscribers,\n          lastFormState: state.lastFormState\n        };\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var returnValue = mutators[key](args, mutatableState, {\n          changeValue: changeValue,\n          getIn: getIn,\n          renameField: renameField,\n          resetFieldState: api.resetFieldState,\n          setIn: setIn,\n          shallowEqual: shallowEqual\n        });\n        state.formState = mutatableState.formState;\n        state.fields = mutatableState.fields;\n        state.fieldSubscribers = mutatableState.fieldSubscribers;\n        state.lastFormState = mutatableState.lastFormState;\n        runValidation(undefined, function () {\n          notifyFieldListeners();\n          notifyFormListeners();\n        });\n        return returnValue;\n      }\n    };\n  };\n\n  var mutatorsApi = mutators ? Object.keys(mutators).reduce(function (result, key) {\n    result[key] = getMutatorApi(key);\n    return result;\n  }, {}) : {};\n\n  var runRecordLevelValidation = function runRecordLevelValidation(setErrors) {\n    var promises = [];\n\n    if (validate) {\n      var errorsOrPromise = validate(_extends({}, state.formState.values)); // clone to avoid writing\n\n      if (isPromise(errorsOrPromise)) {\n        promises.push(errorsOrPromise.then(function (errors) {\n          return setErrors(errors, true);\n        }));\n      } else {\n        setErrors(errorsOrPromise, false);\n      }\n    }\n\n    return promises;\n  };\n\n  var getValidators = function getValidators(field) {\n    return Object.keys(field.validators).reduce(function (result, index) {\n      var validator = field.validators[Number(index)]();\n\n      if (validator) {\n        result.push(validator);\n      }\n\n      return result;\n    }, []);\n  };\n\n  var runFieldLevelValidation = function runFieldLevelValidation(field, setError) {\n    var promises = [];\n    var validators = getValidators(field);\n\n    if (validators.length) {\n      var error;\n      validators.forEach(function (validator) {\n        var errorOrPromise = validator(getIn(state.formState.values, field.name), state.formState.values, validator.length === 0 || validator.length === 3 ? publishFieldState(state.formState, state.fields[field.name]) : undefined);\n\n        if (errorOrPromise && isPromise(errorOrPromise)) {\n          field.validating = true;\n          var promise = errorOrPromise.then(function (error) {\n            if (state.fields[field.name]) {\n              state.fields[field.name].validating = false;\n              setError(error);\n            }\n          }); // errors must be resolved, not rejected\n\n          promises.push(promise);\n        } else if (!error) {\n          // first registered validator wins\n          error = errorOrPromise;\n        }\n      });\n      setError(error);\n    }\n\n    return promises;\n  };\n\n  var runValidation = function runValidation(fieldChanged, callback) {\n    if (validationPaused) {\n      validationBlocked = true;\n      callback();\n      return;\n    }\n\n    var fields = state.fields,\n        formState = state.formState;\n\n    var safeFields = _extends({}, fields);\n\n    var fieldKeys = Object.keys(safeFields);\n\n    if (!validate && !fieldKeys.some(function (key) {\n      return getValidators(safeFields[key]).length;\n    })) {\n      callback();\n      return; // no validation rules\n    } // pare down field keys to actually validate\n\n\n    var limitedFieldLevelValidation = false;\n\n    if (fieldChanged) {\n      var changedField = safeFields[fieldChanged];\n\n      if (changedField) {\n        var validateFields = changedField.validateFields;\n\n        if (validateFields) {\n          limitedFieldLevelValidation = true;\n          fieldKeys = validateFields.length ? validateFields.concat(fieldChanged) : [fieldChanged];\n        }\n      }\n    }\n\n    var recordLevelErrors = {};\n    var asyncRecordLevelErrors = {};\n    var fieldLevelErrors = {};\n    var promises = [].concat(runRecordLevelValidation(function (errors, wasAsync) {\n      if (wasAsync) {\n        asyncRecordLevelErrors = errors || {};\n      } else {\n        recordLevelErrors = errors || {};\n      }\n    }), fieldKeys.reduce(function (result, name) {\n      return result.concat(runFieldLevelValidation(fields[name], function (error) {\n        fieldLevelErrors[name] = error;\n      }));\n    }, []));\n    var hasAsyncValidations = promises.length > 0;\n    var asyncValidationPromiseKey = ++nextAsyncValidationKey;\n    var promise = Promise.all(promises).then(clearAsyncValidationPromise(asyncValidationPromiseKey)); // backwards-compat: add promise to submit-blocking promises iff there are any promises to await\n\n    if (hasAsyncValidations) {\n      asyncValidationPromises[asyncValidationPromiseKey] = promise;\n    }\n\n    var processErrors = function processErrors(afterAsync) {\n      var merged = _extends({}, limitedFieldLevelValidation ? formState.errors : {}, recordLevelErrors, afterAsync ? asyncRecordLevelErrors // new async errors\n      : formState.asyncErrors);\n\n      var forEachError = function forEachError(fn) {\n        fieldKeys.forEach(function (name) {\n          if (fields[name]) {\n            // make sure field is still registered\n            // field-level errors take precedent over record-level errors\n            var recordLevelError = getIn(recordLevelErrors, name);\n            var errorFromParent = getIn(merged, name);\n            var hasFieldLevelValidation = getValidators(safeFields[name]).length;\n            var fieldLevelError = fieldLevelErrors[name];\n            fn(name, hasFieldLevelValidation && fieldLevelError || validate && recordLevelError || (!recordLevelError && !limitedFieldLevelValidation ? errorFromParent : undefined));\n          }\n        });\n      };\n\n      forEachError(function (name, error) {\n        merged = setIn(merged, name, error) || {};\n      });\n      forEachError(function (name, error) {\n        if (error && error[ARRAY_ERROR]) {\n          var existing = getIn(merged, name);\n          var copy = [].concat(existing);\n          copy[ARRAY_ERROR] = error[ARRAY_ERROR];\n          merged = setIn(merged, name, copy);\n        }\n      });\n\n      if (!shallowEqual(formState.errors, merged)) {\n        formState.errors = merged;\n      }\n\n      if (afterAsync) {\n        formState.asyncErrors = asyncRecordLevelErrors;\n      }\n\n      formState.error = recordLevelErrors[FORM_ERROR];\n    };\n\n    if (hasAsyncValidations) {\n      // async validations are running, ensure validating is true before notifying\n      state.formState.validating++;\n      callback();\n    } // process sync errors\n\n\n    processErrors(false); // sync errors have been set. notify listeners while we wait for others\n\n    callback();\n\n    if (hasAsyncValidations) {\n      var afterPromise = function afterPromise() {\n        state.formState.validating--;\n        callback();\n      };\n\n      promise.then(function () {\n        if (nextAsyncValidationKey > asyncValidationPromiseKey) {\n          // if this async validator has been superseded by another, ignore its results\n          return;\n        }\n\n        processErrors(true);\n      }).then(afterPromise, afterPromise);\n    }\n  };\n\n  var notifyFieldListeners = function notifyFieldListeners(name) {\n    if (inBatch) {\n      return;\n    }\n\n    var fields = state.fields,\n        fieldSubscribers = state.fieldSubscribers,\n        formState = state.formState;\n\n    var safeFields = _extends({}, fields);\n\n    var notifyField = function notifyField(name) {\n      var field = safeFields[name];\n      var fieldState = publishFieldState(formState, field);\n      var lastFieldState = field.lastFieldState;\n      field.lastFieldState = fieldState;\n      var fieldSubscriber = fieldSubscribers[name];\n\n      if (fieldSubscriber) {\n        notify(fieldSubscriber, fieldState, lastFieldState, filterFieldState, lastFieldState === undefined);\n      }\n    };\n\n    if (name) {\n      notifyField(name);\n    } else {\n      Object.keys(safeFields).forEach(notifyField);\n    }\n  };\n\n  var markAllFieldsTouched = function markAllFieldsTouched() {\n    Object.keys(state.fields).forEach(function (key) {\n      state.fields[key].touched = true;\n    });\n  };\n\n  var hasSyncErrors = function hasSyncErrors() {\n    return !!(state.formState.error || hasAnyError(state.formState.errors));\n  };\n\n  var calculateNextFormState = function calculateNextFormState() {\n    var fields = state.fields,\n        formState = state.formState,\n        lastFormState = state.lastFormState;\n\n    var safeFields = _extends({}, fields);\n\n    var safeFieldKeys = Object.keys(safeFields); // calculate dirty/pristine\n\n    var foundDirty = false;\n    var dirtyFields = safeFieldKeys.reduce(function (result, key) {\n      var dirty = !safeFields[key].isEqual(getIn(formState.values, key), getIn(formState.initialValues || {}, key));\n\n      if (dirty) {\n        foundDirty = true;\n        result[key] = true;\n      }\n\n      return result;\n    }, {});\n    var dirtyFieldsSinceLastSubmit = safeFieldKeys.reduce(function (result, key) {\n      // istanbul ignore next\n      var nonNullLastSubmittedValues = formState.lastSubmittedValues || {}; // || {} is for flow, but causes branch coverage complaint\n\n      if (!safeFields[key].isEqual(getIn(formState.values, key), getIn(nonNullLastSubmittedValues, key))) {\n        result[key] = true;\n      }\n\n      return result;\n    }, {});\n    formState.pristine = !foundDirty;\n    formState.dirtySinceLastSubmit = !!(formState.lastSubmittedValues && Object.values(dirtyFieldsSinceLastSubmit).some(function (value) {\n      return value;\n    }));\n    formState.modifiedSinceLastSubmit = !!(formState.lastSubmittedValues && // Object.values would treat values as mixed (facebook/flow#2221)\n    Object.keys(safeFields).some(function (value) {\n      return safeFields[value].modifiedSinceLastSubmit;\n    }));\n    formState.valid = !formState.error && !formState.submitError && !hasAnyError(formState.errors) && !(formState.submitErrors && hasAnyError(formState.submitErrors));\n    var nextFormState = convertToExternalFormState(formState);\n\n    var _safeFieldKeys$reduce = safeFieldKeys.reduce(function (result, key) {\n      result.modified[key] = safeFields[key].modified;\n      result.touched[key] = safeFields[key].touched;\n      result.visited[key] = safeFields[key].visited;\n      return result;\n    }, {\n      modified: {},\n      touched: {},\n      visited: {}\n    }),\n        modified = _safeFieldKeys$reduce.modified,\n        touched = _safeFieldKeys$reduce.touched,\n        visited = _safeFieldKeys$reduce.visited;\n\n    nextFormState.dirtyFields = lastFormState && shallowEqual(lastFormState.dirtyFields, dirtyFields) ? lastFormState.dirtyFields : dirtyFields;\n    nextFormState.dirtyFieldsSinceLastSubmit = lastFormState && shallowEqual(lastFormState.dirtyFieldsSinceLastSubmit, dirtyFieldsSinceLastSubmit) ? lastFormState.dirtyFieldsSinceLastSubmit : dirtyFieldsSinceLastSubmit;\n    nextFormState.modified = lastFormState && shallowEqual(lastFormState.modified, modified) ? lastFormState.modified : modified;\n    nextFormState.touched = lastFormState && shallowEqual(lastFormState.touched, touched) ? lastFormState.touched : touched;\n    nextFormState.visited = lastFormState && shallowEqual(lastFormState.visited, visited) ? lastFormState.visited : visited;\n    return lastFormState && shallowEqual(lastFormState, nextFormState) ? lastFormState : nextFormState;\n  };\n\n  var callDebug = function callDebug() {\n    return debug && \"development\" !== \"production\" && debug(calculateNextFormState(), Object.keys(state.fields).reduce(function (result, key) {\n      result[key] = state.fields[key];\n      return result;\n    }, {}));\n  };\n\n  var notifying = false;\n  var scheduleNotification = false;\n\n  var notifyFormListeners = function notifyFormListeners() {\n    if (notifying) {\n      scheduleNotification = true;\n    } else {\n      notifying = true;\n      callDebug();\n\n      if (!inBatch && !(validationPaused && preventNotificationWhileValidationPaused)) {\n        var lastFormState = state.lastFormState;\n        var nextFormState = calculateNextFormState();\n\n        if (nextFormState !== lastFormState) {\n          state.lastFormState = nextFormState;\n          notify(state.subscribers, nextFormState, lastFormState, filterFormState);\n        }\n      }\n\n      notifying = false;\n\n      if (scheduleNotification) {\n        scheduleNotification = false;\n        notifyFormListeners();\n      }\n    }\n  };\n\n  var beforeSubmit = function beforeSubmit() {\n    return Object.keys(state.fields).some(function (name) {\n      return state.fields[name].beforeSubmit && state.fields[name].beforeSubmit() === false;\n    });\n  };\n\n  var afterSubmit = function afterSubmit() {\n    return Object.keys(state.fields).forEach(function (name) {\n      return state.fields[name].afterSubmit && state.fields[name].afterSubmit();\n    });\n  };\n\n  var resetModifiedAfterSubmit = function resetModifiedAfterSubmit() {\n    return Object.keys(state.fields).forEach(function (key) {\n      return state.fields[key].modifiedSinceLastSubmit = false;\n    });\n  }; // generate initial errors\n\n\n  runValidation(undefined, function () {\n    notifyFormListeners();\n  });\n  var api = {\n    batch: function batch(fn) {\n      inBatch++;\n      fn();\n      inBatch--;\n      notifyFieldListeners();\n      notifyFormListeners();\n    },\n    blur: function blur(name) {\n      var fields = state.fields,\n          formState = state.formState;\n      var previous = fields[name];\n\n      if (previous) {\n        // can only blur registered fields\n        delete formState.active;\n        fields[name] = _extends({}, previous, {\n          active: false,\n          touched: true\n        });\n\n        if (validateOnBlur) {\n          runValidation(name, function () {\n            notifyFieldListeners();\n            notifyFormListeners();\n          });\n        } else {\n          notifyFieldListeners();\n          notifyFormListeners();\n        }\n      }\n    },\n    change: function change(name, value) {\n      var fields = state.fields,\n          formState = state.formState;\n\n      if (getIn(formState.values, name) !== value) {\n        changeValue(state, name, function () {\n          return value;\n        });\n        var previous = fields[name];\n\n        if (previous) {\n          // only track modified for registered fields\n          fields[name] = _extends({}, previous, {\n            modified: true,\n            modifiedSinceLastSubmit: !!formState.lastSubmittedValues\n          });\n        }\n\n        if (validateOnBlur) {\n          notifyFieldListeners();\n          notifyFormListeners();\n        } else {\n          runValidation(name, function () {\n            notifyFieldListeners();\n            notifyFormListeners();\n          });\n        }\n      }\n    },\n\n    get destroyOnUnregister() {\n      return !!destroyOnUnregister;\n    },\n\n    set destroyOnUnregister(value) {\n      destroyOnUnregister = value;\n    },\n\n    focus: function focus(name) {\n      var field = state.fields[name];\n\n      if (field && !field.active) {\n        state.formState.active = name;\n        field.active = true;\n        field.visited = true;\n        notifyFieldListeners();\n        notifyFormListeners();\n      }\n    },\n    mutators: mutatorsApi,\n    getFieldState: function getFieldState(name) {\n      var field = state.fields[name];\n      return field && field.lastFieldState;\n    },\n    getRegisteredFields: function getRegisteredFields() {\n      return Object.keys(state.fields);\n    },\n    getState: function getState() {\n      return calculateNextFormState();\n    },\n    initialize: function initialize(data) {\n      var fields = state.fields,\n          formState = state.formState;\n\n      var safeFields = _extends({}, fields);\n\n      var values = typeof data === \"function\" ? data(formState.values) : data;\n\n      if (!keepDirtyOnReinitialize) {\n        formState.values = values;\n      }\n      /**\n       * Hello, inquisitive code reader! Thanks for taking the time to dig in!\n       *\n       * The following code is the way it is to allow for non-registered deep\n       * field values to be set via initialize()\n       */\n      // save dirty values\n\n\n      var savedDirtyValues = keepDirtyOnReinitialize ? Object.keys(safeFields).reduce(function (result, key) {\n        var field = safeFields[key];\n        var pristine = field.isEqual(getIn(formState.values, key), getIn(formState.initialValues || {}, key));\n\n        if (!pristine) {\n          result[key] = getIn(formState.values, key);\n        }\n\n        return result;\n      }, {}) : {}; // update initalValues and values\n\n      formState.initialValues = values;\n      formState.values = values; // restore the dirty values\n\n      Object.keys(savedDirtyValues).forEach(function (key) {\n        formState.values = setIn(formState.values, key, savedDirtyValues[key]) || {};\n      });\n      runValidation(undefined, function () {\n        notifyFieldListeners();\n        notifyFormListeners();\n      });\n    },\n    isValidationPaused: function isValidationPaused() {\n      return validationPaused;\n    },\n    pauseValidation: function pauseValidation(preventNotification) {\n      if (preventNotification === void 0) {\n        preventNotification = true;\n      }\n\n      validationPaused = true;\n      preventNotificationWhileValidationPaused = preventNotification;\n    },\n    registerField: function registerField(name, subscriber, subscription, fieldConfig) {\n      if (subscription === void 0) {\n        subscription = {};\n      }\n\n      if (!state.fieldSubscribers[name]) {\n        state.fieldSubscribers[name] = {\n          index: 0,\n          entries: {}\n        };\n      }\n\n      var index = state.fieldSubscribers[name].index++; // save field subscriber callback\n\n      state.fieldSubscribers[name].entries[index] = {\n        subscriber: memoize(subscriber),\n        subscription: subscription,\n        notified: false\n      }; // create initial field state if not exists\n\n      var field = state.fields[name] || {\n        active: false,\n        afterSubmit: fieldConfig && fieldConfig.afterSubmit,\n        beforeSubmit: fieldConfig && fieldConfig.beforeSubmit,\n        data: fieldConfig && fieldConfig.data || {},\n        isEqual: fieldConfig && fieldConfig.isEqual || tripleEquals,\n        lastFieldState: undefined,\n        modified: false,\n        modifiedSinceLastSubmit: false,\n        name: name,\n        touched: false,\n        valid: true,\n        validateFields: fieldConfig && fieldConfig.validateFields,\n        validators: {},\n        validating: false,\n        visited: false\n      }; // Mutators can create a field in order to keep the field states\n      // We must update this field when registerField is called afterwards\n\n      field.blur = field.blur || function () {\n        return api.blur(name);\n      };\n\n      field.change = field.change || function (value) {\n        return api.change(name, value);\n      };\n\n      field.focus = field.focus || function () {\n        return api.focus(name);\n      };\n\n      state.fields[name] = field;\n      var haveValidator = false;\n      var silent = fieldConfig && fieldConfig.silent;\n\n      var notify = function notify() {\n        if (silent) {\n          notifyFieldListeners(name);\n        } else {\n          notifyFormListeners();\n          notifyFieldListeners();\n        }\n      };\n\n      if (fieldConfig) {\n        haveValidator = !!(fieldConfig.getValidator && fieldConfig.getValidator());\n\n        if (fieldConfig.getValidator) {\n          state.fields[name].validators[index] = fieldConfig.getValidator;\n        }\n\n        var noValueInFormState = getIn(state.formState.values, name) === undefined;\n\n        if (fieldConfig.initialValue !== undefined && (noValueInFormState || getIn(state.formState.values, name) === getIn(state.formState.initialValues, name)) // only initialize if we don't yet have any value for this field\n        ) {\n          state.formState.initialValues = setIn(state.formState.initialValues || {}, name, fieldConfig.initialValue);\n          state.formState.values = setIn(state.formState.values, name, fieldConfig.initialValue);\n          runValidation(undefined, notify);\n        } // only use defaultValue if we don't yet have any value for this field\n\n\n        if (fieldConfig.defaultValue !== undefined && fieldConfig.initialValue === undefined && getIn(state.formState.initialValues, name) === undefined && noValueInFormState) {\n          state.formState.values = setIn(state.formState.values, name, fieldConfig.defaultValue);\n        }\n      }\n\n      if (haveValidator) {\n        runValidation(undefined, notify);\n      } else {\n        notify();\n      }\n\n      return function () {\n        var validatorRemoved = false; // istanbul ignore next\n\n        if (state.fields[name]) {\n          // state.fields[name] may have been removed by a mutator\n          validatorRemoved = !!(state.fields[name].validators[index] && state.fields[name].validators[index]());\n          delete state.fields[name].validators[index];\n        }\n\n        var hasFieldSubscribers = !!state.fieldSubscribers[name];\n\n        if (hasFieldSubscribers) {\n          // state.fieldSubscribers[name] may have been removed by a mutator\n          delete state.fieldSubscribers[name].entries[index];\n        }\n\n        var lastOne = hasFieldSubscribers && !Object.keys(state.fieldSubscribers[name].entries).length;\n\n        if (lastOne) {\n          delete state.fieldSubscribers[name];\n          delete state.fields[name];\n\n          if (validatorRemoved) {\n            state.formState.errors = setIn(state.formState.errors, name, undefined) || {};\n          }\n\n          if (destroyOnUnregister) {\n            state.formState.values = setIn(state.formState.values, name, undefined, true) || {};\n          }\n        }\n\n        if (!silent) {\n          if (validatorRemoved) {\n            runValidation(undefined, function () {\n              notifyFormListeners();\n              notifyFieldListeners();\n            });\n          } else if (lastOne) {\n            // values or errors may have changed\n            notifyFormListeners();\n          }\n        }\n      };\n    },\n    reset: function reset(initialValues) {\n      if (initialValues === void 0) {\n        initialValues = state.formState.initialValues;\n      }\n\n      if (state.formState.submitting) {\n        state.formState.resetWhileSubmitting = true;\n      }\n\n      state.formState.submitFailed = false;\n      state.formState.submitSucceeded = false;\n      delete state.formState.submitError;\n      delete state.formState.submitErrors;\n      delete state.formState.lastSubmittedValues;\n      api.initialize(initialValues || {});\n    },\n\n    /**\n     * Resets all field flags (e.g. touched, visited, etc.) to their initial state\n     */\n    resetFieldState: function resetFieldState(name) {\n      state.fields[name] = _extends({}, state.fields[name], {\n        active: false,\n        lastFieldState: undefined,\n        modified: false,\n        touched: false,\n        valid: true,\n        validating: false,\n        visited: false\n      });\n      runValidation(undefined, function () {\n        notifyFieldListeners();\n        notifyFormListeners();\n      });\n    },\n\n    /**\n     * Returns the form to a clean slate; that is:\n     * - Clear all values\n     * - Resets all fields to their initial state\n     */\n    restart: function restart(initialValues) {\n      if (initialValues === void 0) {\n        initialValues = state.formState.initialValues;\n      }\n\n      api.batch(function () {\n        for (var name in state.fields) {\n          api.resetFieldState(name);\n          state.fields[name] = _extends({}, state.fields[name], {\n            active: false,\n            lastFieldState: undefined,\n            modified: false,\n            modifiedSinceLastSubmit: false,\n            touched: false,\n            valid: true,\n            validating: false,\n            visited: false\n          });\n        }\n\n        api.reset(initialValues);\n      });\n    },\n    resumeValidation: function resumeValidation() {\n      validationPaused = false;\n      preventNotificationWhileValidationPaused = false;\n\n      if (validationBlocked) {\n        // validation was attempted while it was paused, so run it now\n        runValidation(undefined, function () {\n          notifyFieldListeners();\n          notifyFormListeners();\n        });\n      }\n\n      validationBlocked = false;\n    },\n    setConfig: function setConfig(name, value) {\n      switch (name) {\n        case \"debug\":\n          debug = value;\n          break;\n\n        case \"destroyOnUnregister\":\n          destroyOnUnregister = value;\n          break;\n\n        case \"initialValues\":\n          api.initialize(value);\n          break;\n\n        case \"keepDirtyOnReinitialize\":\n          keepDirtyOnReinitialize = value;\n          break;\n\n        case \"mutators\":\n          mutators = value;\n\n          if (value) {\n            Object.keys(mutatorsApi).forEach(function (key) {\n              if (!(key in value)) {\n                delete mutatorsApi[key];\n              }\n            });\n            Object.keys(value).forEach(function (key) {\n              mutatorsApi[key] = getMutatorApi(key);\n            });\n          } else {\n            Object.keys(mutatorsApi).forEach(function (key) {\n              delete mutatorsApi[key];\n            });\n          }\n\n          break;\n\n        case \"onSubmit\":\n          onSubmit = value;\n          break;\n\n        case \"validate\":\n          validate = value;\n          runValidation(undefined, function () {\n            notifyFieldListeners();\n            notifyFormListeners();\n          });\n          break;\n\n        case \"validateOnBlur\":\n          validateOnBlur = value;\n          break;\n\n        default:\n          throw new Error(\"Unrecognised option \" + name);\n      }\n    },\n    submit: function submit() {\n      var formState = state.formState;\n\n      if (formState.submitting) {\n        return;\n      }\n\n      delete formState.submitErrors;\n      delete formState.submitError;\n      formState.lastSubmittedValues = _extends({}, formState.values);\n\n      if (hasSyncErrors()) {\n        markAllFieldsTouched();\n        resetModifiedAfterSubmit();\n        state.formState.submitFailed = true;\n        notifyFormListeners();\n        notifyFieldListeners();\n        return; // no submit for you!!\n      }\n\n      var asyncValidationPromisesKeys = Object.keys(asyncValidationPromises);\n\n      if (asyncValidationPromisesKeys.length) {\n        // still waiting on async validation to complete...\n        Promise.all(asyncValidationPromisesKeys.map(function (key) {\n          return asyncValidationPromises[Number(key)];\n        })).then(api.submit, console.error);\n        return;\n      }\n\n      var submitIsBlocked = beforeSubmit();\n\n      if (submitIsBlocked) {\n        return;\n      }\n\n      var resolvePromise;\n      var completeCalled = false;\n\n      var complete = function complete(errors) {\n        formState.submitting = false;\n        var resetWhileSubmitting = formState.resetWhileSubmitting;\n\n        if (resetWhileSubmitting) {\n          formState.resetWhileSubmitting = false;\n        }\n\n        if (errors && hasAnyError(errors)) {\n          formState.submitFailed = true;\n          formState.submitSucceeded = false;\n          formState.submitErrors = errors;\n          formState.submitError = errors[FORM_ERROR];\n          markAllFieldsTouched();\n        } else {\n          if (!resetWhileSubmitting) {\n            formState.submitFailed = false;\n            formState.submitSucceeded = true;\n          }\n\n          afterSubmit();\n        }\n\n        notifyFormListeners();\n        notifyFieldListeners();\n        completeCalled = true;\n\n        if (resolvePromise) {\n          resolvePromise(errors);\n        }\n\n        return errors;\n      };\n\n      formState.submitting = true;\n      formState.submitFailed = false;\n      formState.submitSucceeded = false;\n      formState.lastSubmittedValues = _extends({}, formState.values);\n      resetModifiedAfterSubmit(); // onSubmit is either sync, callback or async with a Promise\n\n      var result = onSubmit(formState.values, api, complete);\n\n      if (!completeCalled) {\n        if (result && isPromise(result)) {\n          // onSubmit is async with a Promise\n          notifyFormListeners(); // let everyone know we are submitting\n\n          notifyFieldListeners(); // notify fields also\n\n          return result.then(complete, function (error) {\n            complete();\n            throw error;\n          });\n        } else if (onSubmit.length >= 3) {\n          // must be async, so we should return a Promise\n          notifyFormListeners(); // let everyone know we are submitting\n\n          notifyFieldListeners(); // notify fields also\n\n          return new Promise(function (resolve) {\n            resolvePromise = resolve;\n          });\n        } else {\n          // onSubmit is sync\n          complete(result);\n        }\n      }\n    },\n    subscribe: function subscribe(subscriber, subscription) {\n      if (!subscriber) {\n        throw new Error(\"No callback given.\");\n      }\n\n      if (!subscription) {\n        throw new Error(\"No subscription provided. What values do you want to listen to?\");\n      }\n\n      var memoized = memoize(subscriber);\n      var subscribers = state.subscribers;\n      var index = subscribers.index++;\n      subscribers.entries[index] = {\n        subscriber: memoized,\n        subscription: subscription,\n        notified: false\n      };\n      var nextFormState = calculateNextFormState();\n      notifySubscriber(memoized, subscription, nextFormState, nextFormState, filterFormState, true);\n      return function () {\n        delete subscribers.entries[index];\n      };\n    }\n  };\n  return api;\n}\n\nexport { ARRAY_ERROR, FORM_ERROR, configOptions, createForm, fieldSubscriptionItems, formSubscriptionItems, getIn, setIn, version };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as React from 'react';\nimport React__default from 'react';\nimport { formSubscriptionItems, createForm, version as version$1, fieldSubscriptionItems } from 'final-form';\n\nvar _excluded$3 = [\"render\", \"children\", \"component\"];\n// shared logic between components that use either render prop,\n// children render function, or component prop\nfunction renderComponent(props, lazyProps, name) {\n  var render = props.render,\n      children = props.children,\n      component = props.component,\n      rest = _objectWithoutPropertiesLoose(props, _excluded$3);\n\n  if (component) {\n    return /*#__PURE__*/React.createElement(component, Object.assign(lazyProps, rest, {\n      children: children,\n      render: render\n    }));\n  }\n\n  if (render) {\n    return render(children === undefined ? Object.assign(lazyProps, rest) : // inject children back in\n    Object.assign(lazyProps, rest, {\n      children: children\n    }));\n  }\n\n  if (typeof children !== \"function\") {\n    throw new Error(\"Must specify either a render prop, a render function as children, or a component prop to \" + name);\n  }\n\n  return children(Object.assign(lazyProps, rest));\n}\n\nfunction useWhenValueChanges(value, callback, isEqual) {\n  if (isEqual === void 0) {\n    isEqual = function isEqual(a, b) {\n      return a === b;\n    };\n  }\n\n  var previous = React__default.useRef(value);\n  React__default.useEffect(function () {\n    if (!isEqual(value, previous.current)) {\n      callback();\n      previous.current = value;\n    }\n  });\n}\n\n/**\n * A simple hook to create a constant value that lives for\n * the lifetime of the component.\n *\n * Plagiarized from https://github.com/Andarist/use-constant\n *\n * Do NOT reuse this code unless you know what you're doing.\n * Use Andarist's hook; it's more fault tolerant to things like\n * falsy values.\n *\n * @param {Function} init - A function to generate the value\n */\n\nfunction useConstant(init) {\n  var ref = React__default.useRef();\n\n  if (!ref.current) {\n    ref.current = init();\n  }\n\n  return ref.current;\n}\n\nvar shallowEqual = function shallowEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== \"object\" || !a || typeof b !== \"object\" || !b) {\n    return false;\n  }\n\n  var keysA = Object.keys(a);\n  var keysB = Object.keys(b);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(b);\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key) || a[key] !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar isSyntheticEvent = function isSyntheticEvent(candidate) {\n  return !!(candidate && typeof candidate.stopPropagation === \"function\");\n};\n\nvar ReactFinalFormContext = /*#__PURE__*/React.createContext();\n\nfunction useLatest(value) {\n  var ref = React__default.useRef(value);\n  React__default.useEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n}\n\nvar version = \"6.5.8\";\n\nvar addLazyState = function addLazyState(dest, state, keys) {\n  keys.forEach(function (key) {\n    Object.defineProperty(dest, key, {\n      get: function get() {\n        return state[key];\n      },\n      enumerable: true\n    });\n  });\n};\n\nvar addLazyFormState = function addLazyFormState(dest, state) {\n  return addLazyState(dest, state, [\"active\", \"dirty\", \"dirtyFields\", \"dirtySinceLastSubmit\", \"dirtyFieldsSinceLastSubmit\", \"error\", \"errors\", \"hasSubmitErrors\", \"hasValidationErrors\", \"initialValues\", \"invalid\", \"modified\", \"modifiedSinceLastSubmit\", \"pristine\", \"submitError\", \"submitErrors\", \"submitFailed\", \"submitSucceeded\", \"submitting\", \"touched\", \"valid\", \"validating\", \"values\", \"visited\"]);\n};\nvar addLazyFieldMetaState = function addLazyFieldMetaState(dest, state) {\n  return addLazyState(dest, state, [\"active\", \"data\", \"dirty\", \"dirtySinceLastSubmit\", \"error\", \"initial\", \"invalid\", \"length\", \"modified\", \"modifiedSinceLastSubmit\", \"pristine\", \"submitError\", \"submitFailed\", \"submitSucceeded\", \"submitting\", \"touched\", \"valid\", \"validating\", \"visited\"]);\n};\n\nvar _excluded$2 = [\"debug\", \"decorators\", \"destroyOnUnregister\", \"form\", \"initialValues\", \"initialValuesEqual\", \"keepDirtyOnReinitialize\", \"mutators\", \"onSubmit\", \"subscription\", \"validate\", \"validateOnBlur\"];\nvar versions = {\n  \"final-form\": version$1,\n  \"react-final-form\": version\n};\nvar all$1 = formSubscriptionItems.reduce(function (result, key) {\n  result[key] = true;\n  return result;\n}, {});\n\nfunction ReactFinalForm(_ref) {\n  var debug = _ref.debug,\n      _ref$decorators = _ref.decorators,\n      decorators = _ref$decorators === void 0 ? [] : _ref$decorators,\n      destroyOnUnregister = _ref.destroyOnUnregister,\n      alternateFormApi = _ref.form,\n      initialValues = _ref.initialValues,\n      initialValuesEqual = _ref.initialValuesEqual,\n      keepDirtyOnReinitialize = _ref.keepDirtyOnReinitialize,\n      mutators = _ref.mutators,\n      onSubmit = _ref.onSubmit,\n      _ref$subscription = _ref.subscription,\n      subscription = _ref$subscription === void 0 ? all$1 : _ref$subscription,\n      validate = _ref.validate,\n      validateOnBlur = _ref.validateOnBlur,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  var config = {\n    debug: debug,\n    destroyOnUnregister: destroyOnUnregister,\n    initialValues: initialValues,\n    keepDirtyOnReinitialize: keepDirtyOnReinitialize,\n    mutators: mutators,\n    onSubmit: onSubmit,\n    validate: validate,\n    validateOnBlur: validateOnBlur\n  };\n  var form = useConstant(function () {\n    var f = alternateFormApi || createForm(config); // pause validation until children register all fields on first render (unpaused in useEffect() below)\n\n    f.pauseValidation();\n    return f;\n  }); // synchronously register and unregister to query form state for our subscription on first render\n\n  var _React$useState = React.useState(function () {\n    var initialState = {};\n    form.subscribe(function (state) {\n      initialState = state;\n    }, subscription)();\n    return initialState;\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1]; // save a copy of state that can break through the closure\n  // on the shallowEqual() line below.\n\n\n  var stateRef = useLatest(state);\n  React.useEffect(function () {\n    // We have rendered, so all fields are now registered, so we can unpause validation\n    form.isValidationPaused() && form.resumeValidation();\n    var unsubscriptions = [form.subscribe(function (s) {\n      if (!shallowEqual(s, stateRef.current)) {\n        setState(s);\n      }\n    }, subscription)].concat(decorators ? decorators.map(function (decorator) {\n      return (// this noop ternary is to appease the flow gods\n        // istanbul ignore next\n        decorator(form)\n      );\n    }) : []);\n    return function () {\n      form.pauseValidation(); // pause validation so we don't revalidate on every field deregistration\n\n      unsubscriptions.reverse().forEach(function (unsubscribe) {\n        return unsubscribe();\n      }); // don't need to resume validation here; either unmounting, or will re-run this hook with new deps\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, decorators); // warn about decorator changes\n  // istanbul ignore next\n\n  if (process.env.NODE_ENV !== \"production\") {\n    // You're never supposed to use hooks inside a conditional, but in this\n    // case we can be certain that you're not going to be changing your\n    // NODE_ENV between renders, so this is safe.\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useWhenValueChanges(decorators, function () {\n      console.error(\"Form decorators should not change from one render to the next as new values will be ignored\");\n    }, shallowEqual);\n  } // allow updatable config\n\n\n  useWhenValueChanges(debug, function () {\n    form.setConfig(\"debug\", debug);\n  });\n  useWhenValueChanges(destroyOnUnregister, function () {\n    form.destroyOnUnregister = !!destroyOnUnregister;\n  });\n  useWhenValueChanges(keepDirtyOnReinitialize, function () {\n    form.setConfig(\"keepDirtyOnReinitialize\", keepDirtyOnReinitialize);\n  });\n  useWhenValueChanges(initialValues, function () {\n    form.setConfig(\"initialValues\", initialValues);\n  }, initialValuesEqual || shallowEqual);\n  useWhenValueChanges(mutators, function () {\n    form.setConfig(\"mutators\", mutators);\n  });\n  useWhenValueChanges(onSubmit, function () {\n    form.setConfig(\"onSubmit\", onSubmit);\n  });\n  useWhenValueChanges(validate, function () {\n    form.setConfig(\"validate\", validate);\n  });\n  useWhenValueChanges(validateOnBlur, function () {\n    form.setConfig(\"validateOnBlur\", validateOnBlur);\n  });\n\n  var handleSubmit = function handleSubmit(event) {\n    if (event) {\n      // sometimes not true, e.g. React Native\n      if (typeof event.preventDefault === \"function\") {\n        event.preventDefault();\n      }\n\n      if (typeof event.stopPropagation === \"function\") {\n        // prevent any outer forms from receiving the event too\n        event.stopPropagation();\n      }\n    }\n\n    return form.submit();\n  };\n\n  var renderProps = {\n    form: _extends({}, form, {\n      reset: function reset(eventOrValues) {\n        if (isSyntheticEvent(eventOrValues)) {\n          // it's a React SyntheticEvent, call reset with no arguments\n          form.reset();\n        } else {\n          form.reset(eventOrValues);\n        }\n      }\n    }),\n    handleSubmit: handleSubmit\n  };\n  addLazyFormState(renderProps, state);\n  return /*#__PURE__*/React.createElement(ReactFinalFormContext.Provider, {\n    value: form\n  }, renderComponent(_extends({}, rest, {\n    __versions: versions\n  }), renderProps, \"ReactFinalForm\"));\n}\n\nfunction useForm(componentName) {\n  var form = React.useContext(ReactFinalFormContext);\n\n  if (!form) {\n    throw new Error((componentName || \"useForm\") + \" must be used inside of a <Form> component\");\n  }\n\n  return form;\n}\n\nfunction useFormState(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      onChange = _ref.onChange,\n      _ref$subscription = _ref.subscription,\n      subscription = _ref$subscription === void 0 ? all$1 : _ref$subscription;\n\n  var form = useForm(\"useFormState\");\n  var firstRender = React.useRef(true);\n  var onChangeRef = React.useRef(onChange);\n  onChangeRef.current = onChange; // synchronously register and unregister to query field state for our subscription on first render\n\n  var _React$useState = React.useState(function () {\n    var initialState = {};\n    form.subscribe(function (state) {\n      initialState = state;\n    }, subscription)();\n\n    if (onChange) {\n      onChange(initialState);\n    }\n\n    return initialState;\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  React.useEffect(function () {\n    return form.subscribe(function (newState) {\n      if (firstRender.current) {\n        firstRender.current = false;\n      } else {\n        setState(newState);\n\n        if (onChangeRef.current) {\n          onChangeRef.current(newState);\n        }\n      }\n    }, subscription);\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  var lazyState = {};\n  addLazyFormState(lazyState, state);\n  return lazyState;\n}\n\nvar _excluded$1 = [\"onChange\", \"subscription\"];\n\nfunction FormSpy(_ref) {\n  var onChange = _ref.onChange,\n      subscription = _ref.subscription,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n  var reactFinalForm = useForm(\"FormSpy\");\n  var state = useFormState({\n    onChange: onChange,\n    subscription: subscription\n  });\n\n  if (onChange) {\n    return null;\n  }\n\n  var renderProps = {\n    form: _extends({}, reactFinalForm, {\n      reset: function reset(eventOrValues) {\n        if (isSyntheticEvent(eventOrValues)) {\n          // it's a React SyntheticEvent, call reset with no arguments\n          reactFinalForm.reset();\n        } else {\n          reactFinalForm.reset(eventOrValues);\n        }\n      }\n    })\n  };\n  return renderComponent(_extends({}, rest, renderProps), state, \"FormSpy\");\n}\n\nvar isReactNative = typeof window !== \"undefined\" && window.navigator && window.navigator.product && window.navigator.product === \"ReactNative\";\n\nvar getSelectedValues = function getSelectedValues(options) {\n  var result = [];\n\n  if (options) {\n    for (var index = 0; index < options.length; index++) {\n      var option = options[index];\n\n      if (option.selected) {\n        result.push(option.value);\n      }\n    }\n  }\n\n  return result;\n};\n\nvar getValue = function getValue(event, currentValue, valueProp, isReactNative) {\n  if (!isReactNative && event.nativeEvent && event.nativeEvent.text !== undefined) {\n    return event.nativeEvent.text;\n  }\n\n  if (isReactNative && event.nativeEvent) {\n    return event.nativeEvent.text;\n  }\n\n  var detypedEvent = event;\n  var _detypedEvent$target = detypedEvent.target,\n      type = _detypedEvent$target.type,\n      value = _detypedEvent$target.value,\n      checked = _detypedEvent$target.checked;\n\n  switch (type) {\n    case \"checkbox\":\n      if (valueProp !== undefined) {\n        // we are maintaining an array, not just a boolean\n        if (checked) {\n          // add value to current array value\n          return Array.isArray(currentValue) ? currentValue.concat(valueProp) : [valueProp];\n        } else {\n          // remove value from current array value\n          if (!Array.isArray(currentValue)) {\n            return currentValue;\n          }\n\n          var index = currentValue.indexOf(valueProp);\n\n          if (index < 0) {\n            return currentValue;\n          } else {\n            return currentValue.slice(0, index).concat(currentValue.slice(index + 1));\n          }\n        }\n      } else {\n        // it's just a boolean\n        return !!checked;\n      }\n\n    case \"select-multiple\":\n      return getSelectedValues(event.target.options);\n\n    default:\n      return value;\n  }\n};\n\n/**\n * Creates a callback, even with closures, that will be\n * instance === for the lifetime of the component, always\n * calling the most recent version of the function and its\n * closures.\n */\n\nfunction useConstantCallback(callback) {\n  var ref = React.useRef(callback);\n  React.useEffect(function () {\n    ref.current = callback;\n  });\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return ref.current.apply(null, args);\n  }, []);\n}\n\nvar all = fieldSubscriptionItems.reduce(function (result, key) {\n  result[key] = true;\n  return result;\n}, {});\n\nvar defaultFormat = function defaultFormat(value, name) {\n  return value === undefined ? \"\" : value;\n};\n\nvar defaultParse = function defaultParse(value, name) {\n  return value === \"\" ? undefined : value;\n};\n\nvar defaultIsEqual = function defaultIsEqual(a, b) {\n  return a === b;\n};\n\nfunction useField(name, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      afterSubmit = _config.afterSubmit,\n      allowNull = _config.allowNull,\n      component = _config.component,\n      data = _config.data,\n      defaultValue = _config.defaultValue,\n      _config$format = _config.format,\n      format = _config$format === void 0 ? defaultFormat : _config$format,\n      formatOnBlur = _config.formatOnBlur,\n      initialValue = _config.initialValue,\n      multiple = _config.multiple,\n      _config$parse = _config.parse,\n      parse = _config$parse === void 0 ? defaultParse : _config$parse,\n      _config$subscription = _config.subscription,\n      subscription = _config$subscription === void 0 ? all : _config$subscription,\n      type = _config.type,\n      validateFields = _config.validateFields,\n      _value = _config.value;\n  var form = useForm(\"useField\");\n  var configRef = useLatest(config);\n\n  var register = function register(callback, silent) {\n    return (// avoid using `state` const in any closures created inside `register`\n      // because they would refer `state` from current execution context\n      // whereas actual `state` would defined in the subsequent `useField` hook\n      // execution\n      // (that would be caused by `setState` call performed in `register` callback)\n      form.registerField(name, callback, subscription, {\n        afterSubmit: afterSubmit,\n        beforeSubmit: function beforeSubmit() {\n          var _configRef$current = configRef.current,\n              beforeSubmit = _configRef$current.beforeSubmit,\n              formatOnBlur = _configRef$current.formatOnBlur,\n              _configRef$current$fo = _configRef$current.format,\n              format = _configRef$current$fo === void 0 ? defaultFormat : _configRef$current$fo;\n\n          if (formatOnBlur) {\n            var _ref = form.getFieldState(name),\n                value = _ref.value;\n\n            var formatted = format(value, name);\n\n            if (formatted !== value) {\n              form.change(name, formatted);\n            }\n          }\n\n          return beforeSubmit && beforeSubmit();\n        },\n        data: data,\n        defaultValue: defaultValue,\n        getValidator: function getValidator() {\n          return configRef.current.validate;\n        },\n        initialValue: initialValue,\n        isEqual: function isEqual(a, b) {\n          return (configRef.current.isEqual || defaultIsEqual)(a, b);\n        },\n        silent: silent,\n        validateFields: validateFields\n      })\n    );\n  };\n\n  var firstRender = React.useRef(true); // synchronously register and unregister to query field state for our subscription on first render\n\n  var _React$useState = React.useState(function () {\n    var initialState = {}; // temporarily disable destroyOnUnregister\n\n    // temporarily disable destroyOnUnregister\n    var destroyOnUnregister = form.destroyOnUnregister;\n    form.destroyOnUnregister = false;\n    register(function (state) {\n      initialState = state;\n    }, true)(); // return destroyOnUnregister to its original value\n\n    // return destroyOnUnregister to its original value\n    form.destroyOnUnregister = destroyOnUnregister;\n    return initialState;\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  React.useEffect(function () {\n    return register(function (state) {\n      if (firstRender.current) {\n        firstRender.current = false;\n      } else {\n        setState(state);\n      }\n    }, false);\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [name, data, defaultValue, // If we want to allow inline fat-arrow field-level validation functions, we\n  // cannot reregister field every time validate function !==.\n  // validate,\n  initialValue // The validateFields array is often passed as validateFields={[]}, creating\n  // a !== new array every time. If it needs to be changed, a rerender/reregister\n  // can be forced by changing the key prop\n  // validateFields\n  ]);\n  var meta = {};\n  addLazyFieldMetaState(meta, state);\n  var input = {\n    name: name,\n\n    get value() {\n      var value = state.value;\n\n      if (formatOnBlur) {\n        if (component === \"input\") {\n          value = defaultFormat(value);\n        }\n      } else {\n        value = format(value, name);\n      }\n\n      if (value === null && !allowNull) {\n        value = \"\";\n      }\n\n      if (type === \"checkbox\" || type === \"radio\") {\n        return _value;\n      } else if (component === \"select\" && multiple) {\n        return value || [];\n      }\n\n      return value;\n    },\n\n    get checked() {\n      var value = state.value;\n\n      if (type === \"checkbox\") {\n        value = format(value, name);\n\n        if (_value === undefined) {\n          return !!value;\n        } else {\n          return !!(Array.isArray(value) && ~value.indexOf(_value));\n        }\n      } else if (type === \"radio\") {\n        return format(value, name) === _value;\n      }\n\n      return undefined;\n    },\n\n    onBlur: useConstantCallback(function (event) {\n      state.blur();\n\n      if (formatOnBlur) {\n        /**\n         * Here we must fetch the value directly from Final Form because we cannot\n         * trust that our `state` closure has the most recent value. This is a problem\n         * if-and-only-if the library consumer has called `onChange()` immediately\n         * before calling `onBlur()`, but before the field has had a chance to receive\n         * the value update from Final Form.\n         */\n        var fieldState = form.getFieldState(state.name);\n        state.change(format(fieldState.value, state.name));\n      }\n    }),\n    onChange: useConstantCallback(function (event) {\n      // istanbul ignore next\n      if (process.env.NODE_ENV !== \"production\" && event && event.target) {\n        var targetType = event.target.type;\n        var unknown = ~[\"checkbox\", \"radio\", \"select-multiple\"].indexOf(targetType) && !type && component !== \"select\";\n\n        var _value2 = targetType === \"select-multiple\" ? state.value : _value;\n\n        if (unknown) {\n          console.error(\"You must pass `type=\\\"\" + (targetType === \"select-multiple\" ? \"select\" : targetType) + \"\\\"` prop to your Field(\" + name + \") component.\\n\" + (\"Without it we don't know how to unpack your `value` prop - \" + (Array.isArray(_value2) ? \"[\" + _value2 + \"]\" : \"\\\"\" + _value2 + \"\\\"\") + \".\"));\n        }\n      }\n\n      var value = event && event.target ? getValue(event, state.value, _value, isReactNative) : event;\n      state.change(parse(value, name));\n    }),\n    onFocus: useConstantCallback(function (event) {\n      return state.focus();\n    })\n  };\n\n  if (multiple) {\n    input.multiple = multiple;\n  }\n\n  if (type !== undefined) {\n    input.type = type;\n  }\n\n  var renderProps = {\n    input: input,\n    meta: meta\n  }; // assign to force Flow check\n\n  return renderProps;\n}\n\nvar _excluded = [\"afterSubmit\", \"allowNull\", \"beforeSubmit\", \"children\", \"component\", \"data\", \"defaultValue\", \"format\", \"formatOnBlur\", \"initialValue\", \"isEqual\", \"multiple\", \"name\", \"parse\", \"subscription\", \"type\", \"validate\", \"validateFields\", \"value\"];\nvar Field = /*#__PURE__*/React.forwardRef(function Field(_ref, ref) {\n  var afterSubmit = _ref.afterSubmit,\n      allowNull = _ref.allowNull,\n      beforeSubmit = _ref.beforeSubmit,\n      children = _ref.children,\n      component = _ref.component,\n      data = _ref.data,\n      defaultValue = _ref.defaultValue,\n      format = _ref.format,\n      formatOnBlur = _ref.formatOnBlur,\n      initialValue = _ref.initialValue,\n      isEqual = _ref.isEqual,\n      multiple = _ref.multiple,\n      name = _ref.name,\n      parse = _ref.parse,\n      subscription = _ref.subscription,\n      type = _ref.type,\n      validate = _ref.validate,\n      validateFields = _ref.validateFields,\n      value = _ref.value,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var field = useField(name, {\n    afterSubmit: afterSubmit,\n    allowNull: allowNull,\n    beforeSubmit: beforeSubmit,\n    children: children,\n    component: component,\n    data: data,\n    defaultValue: defaultValue,\n    format: format,\n    formatOnBlur: formatOnBlur,\n    initialValue: initialValue,\n    isEqual: isEqual,\n    multiple: multiple,\n    parse: parse,\n    subscription: subscription,\n    type: type,\n    validate: validate,\n    validateFields: validateFields,\n    value: value\n  });\n\n  if (typeof children === \"function\") {\n    return children(_extends({}, field, rest));\n  }\n\n  if (typeof component === \"string\") {\n    // ignore meta, combine input with any other props\n    return /*#__PURE__*/React.createElement(component, _extends({}, field.input, {\n      children: children,\n      ref: ref\n    }, rest));\n  }\n\n  if (!name) {\n    throw new Error(\"prop name cannot be undefined in <Field> component\");\n  }\n\n  return renderComponent(_extends({\n    children: children,\n    component: component,\n    ref: ref\n  }, rest), field, \"Field(\" + name + \")\");\n});\n\nfunction withTypes() {\n  return {\n    Form: ReactFinalForm,\n    FormSpy: FormSpy\n  };\n}\n\nexport { Field, ReactFinalForm as Form, FormSpy, useField, useForm, useFormState, version, withTypes };\n","export const ACTIVITY_TYPES = {\n  ACCEPT: 'Accept',\n  ADD: 'Add',\n  ANNOUNCE: 'Announce',\n  ARRIVE: 'Arrive',\n  BLOCK: 'Block',\n  CREATE: 'Create',\n  DELETE: 'Delete',\n  DISLIKE: 'Dislike',\n  FLAG: 'Flag',\n  FOLLOW: 'Follow',\n  IGNORE: 'Ignore',\n  INVITE: 'Invite',\n  JOIN: 'Join',\n  LEAVE: 'Leave',\n  LIKE: 'Like',\n  LISTEN: 'Listen',\n  MOVE: 'Move',\n  OFFER: 'Offer',\n  QUESTION: 'Question',\n  REJECT: 'Reject',\n  READ: 'Read',\n  REMOVE: 'Remove',\n  TENTATIVE_REJECT: 'TentativeReject',\n  TENTATIVE_ACCEPT: 'TentativeAccept',\n  TRAVAL: 'Travel',\n  UNDO: 'Undo',\n  UPDATE: 'Update',\n  VIEW: 'View'\n};\n\nexport const ACTOR_TYPES = {\n  APPLICATION: 'Application',\n  GROUP: 'Group',\n  ORGANIZATION: 'Organization',\n  PERSON: 'Person',\n  SERVICE: 'Service'\n};\n\nexport const OBJECT_TYPES = {\n  ARTICLE: 'Article',\n  AUDIO: 'Audio',\n  DOCUMENT: 'Document',\n  EVENT: 'Event',\n  IMAGE: 'Image',\n  NOTE: 'Note',\n  PAGE: 'Page',\n  PLACE: 'Place',\n  PROFILE: 'Profile',\n  RELATIONSHIP: 'Relationship',\n  TOMBSTONE: 'Tombstone',\n  VIDEO: 'Video'\n};\n\nexport const PUBLIC_URI = 'https://www.w3.org/ns/activitystreams#Public';\n","import { useCallback, useMemo } from 'react';\nimport { useGetIdentity, fetchUtils } from 'react-admin';\nimport { buildBlankNodesQuery } from '@semapps/semantic-data-provider';\n\nconst useOutbox = () => {\n  const { identity } = useGetIdentity();\n\n  const outboxUrl = useMemo(() => {\n    if (identity?.webIdData) {\n      return identity?.webIdData?.outbox;\n    }\n  }, [identity]);\n\n  const sparqlEndpoint = useMemo(() => {\n    if (identity?.webIdData) {\n      return identity?.webIdData?.endpoints?.['void:sparqlEndpoint'] || identity?.id + '/sparql';\n    }\n  }, [identity]);\n\n  // Post an activity to the logged user's outbox and return its URI\n  const post = useCallback(\n    async activity => {\n      const token = localStorage.getItem('token');\n      const { headers } = await fetchUtils.fetchJson(outboxUrl, {\n        method: 'POST',\n        body: JSON.stringify({\n          '@context': 'https://www.w3.org/ns/activitystreams',\n          ...activity\n        }),\n        headers: new Headers({\n          'Content-Type': 'application/ld+json',\n          Authorization: `Bearer ${token}`\n        })\n      });\n      return headers.get('Location');\n    },\n    [outboxUrl]\n  );\n\n  const fetch = useCallback(async () => {\n    if (!sparqlEndpoint || !outboxUrl) return;\n\n    const token = localStorage.getItem('token');\n    const blankNodesQuery = buildBlankNodesQuery(['as:object']);\n\n    const query = `\n      PREFIX as: <https://www.w3.org/ns/activitystreams#>\n      CONSTRUCT {\n        ?s1 ?p1 ?o1 .\n        ${blankNodesQuery.construct}\n      }\n      WHERE {\n        <${outboxUrl}> as:items ?s1 .\n        ?s1 ?p1 ?o1 .\n        ${blankNodesQuery.where}\n      }\n    `;\n\n    const { json } = await fetchUtils.fetchJson(sparqlEndpoint, {\n      method: 'POST',\n      body: query,\n      headers: new Headers({\n        Accept: 'application/ld+json',\n        Authorization: token ? `Bearer ${token}` : undefined\n      })\n    });\n\n    if (json['@graph']) {\n      return json['@graph'];\n    } else {\n      return null;\n    }\n  }, [sparqlEndpoint, outboxUrl]);\n\n  return { post, fetch, url: outboxUrl, owner: identity?.id };\n};\n\nexport default useOutbox;\n","import { mergeAttributes } from '@tiptap/core';\nimport Mention from '@tiptap/extension-mention';\n\n// Fix a bug in the current version of the mention extension\n// (The { id, label } object is located inside the id property)\n// See https://github.com/ueberdosis/tiptap/pull/1322\nconst CustomMention = Mention.extend({\n  renderHTML({ node, HTMLAttributes }) {\n    return ['span', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), `@${node.attrs.id.label}`];\n  },\n  addAttributes() {\n    return {\n      label: {\n        default: null,\n        parseHTML: element => {\n          return {\n            label: element.getAttribute('data-mention-label')\n          };\n        },\n        renderHTML: attributes => {\n          if (!attributes.id.label) {\n            return {};\n          }\n          return {\n            'data-mention-label': attributes.id.label\n          };\n        }\n      },\n      id: {\n        default: null,\n        parseHTML: element => {\n          return {\n            id: element.getAttribute('data-mention-id')\n          };\n        },\n        renderHTML: attributes => {\n          if (!attributes.id.id) {\n            return {};\n          }\n          return {\n            'data-mention-id': attributes.id.id\n          };\n        }\n      }\n    };\n  }\n});\n\nexport default CustomMention;\n","import React, { useState, useCallback } from 'react';\nimport { useGetIdentity, useNotify, useRecordContext } from 'react-admin';\nimport { RichTextInput, DefaultEditorOptions } from 'ra-input-rich-text';\nimport Placeholder from '@tiptap/extension-placeholder';\nimport { Form } from 'react-final-form';\nimport { Button, Box, Avatar } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport SendIcon from '@mui/icons-material/Send';\nimport { useDataModel } from '@semapps/semantic-data-provider';\nimport { AuthDialog } from '@semapps/auth-provider';\nimport { OBJECT_TYPES, PUBLIC_URI } from '../../constants';\nimport useOutbox from '../../hooks/useOutbox';\nimport CustomMention from './CustomMention';\n\nconst useStyles = makeStyles(theme => ({\n  form: {\n    marginTop: -12 // Negative margin to keep the form close to the label\n  },\n  container: {\n    paddingLeft: 80,\n    position: 'relative'\n  },\n  avatar: {\n    position: 'absolute',\n    top: 16,\n    left: 0,\n    bottom: 0,\n    width: 64,\n    height: 64\n  },\n  editorContent: {\n    '& > div': {\n      backgroundColor: 'rgba(0, 0, 0, 0.09)',\n      padding: '2px 12px',\n      borderWidth: '0px !important',\n      borderRadius: 0,\n      borderBottom: '1px solid #FFF',\n      minHeight: 60,\n      outline: 'unset !important'\n    },\n    '& > div > p': {\n      marginTop: 12,\n      marginBottom: 12,\n      fontFamily: theme.typography.body1.fontFamily,\n      marginBlockStart: '0.5em',\n      marginBlockEnd: '0.5em'\n    },\n    '& > div > p.is-editor-empty:first-child::before': {\n      color: 'grey',\n      content: 'attr(data-placeholder)',\n      float: 'left',\n      height: 0,\n      pointerEvents: 'none'\n    },\n    marginBottom: -19 // To hide helper text block\n  },\n  button: {\n    marginBottom: 15\n  }\n}));\n\nconst PostCommentForm = ({ context, placeholder, helperText, mentions, userResource, addItem, removeItem }) => {\n  const record = useRecordContext();\n  const { identity } = useGetIdentity();\n  const userDataModel = useDataModel(userResource);\n  const classes = useStyles();\n  const notify = useNotify();\n  const outbox = useOutbox();\n  const [expanded, setExpanded] = useState(false);\n  const [openAuth, setOpenAuth] = useState(false);\n\n  const onSubmit = useCallback(\n    async (values, { reset }) => {\n      const document = new DOMParser().parseFromString(values.comment, 'text/html');\n      const mentions = Array.from(document.body.getElementsByClassName('mention'));\n      let mentionedUsersUris = [];\n\n      mentions.forEach(node => {\n        const userUri = node.attributes['data-mention-id'].value;\n        const userLabel = node.attributes['data-mention-label'].value;\n        const link = document.createElement('a');\n        link.setAttribute(\n          'href',\n          new URL(window.location.href).origin + '/' + userResource + '/' + encodeURIComponent(userUri) + '/show'\n        );\n        link.textContent = '@' + userLabel;\n        node.parentNode.replaceChild(link, node);\n        mentionedUsersUris.push(userUri);\n      });\n\n      if (document.body.innerHTML === 'undefined') {\n        notify('Votre commentaire est vide', {type: 'error'});\n      } else {\n        const tempId = Date.now();\n\n        const note = {\n          type: OBJECT_TYPES.NOTE,\n          attributedTo: outbox.owner,\n          content: document.body.innerHTML,\n          inReplyTo: record[context],\n          published: new Date().toISOString()\n        };\n\n        try {\n          addItem({ id: tempId, ...note });\n          reset();\n          setExpanded(false);\n          await outbox.post({ ...note, to: [...mentionedUsersUris, PUBLIC_URI] });\n          notify('Commentaire post avec succs', {type: 'success'});\n        } catch (e) {\n          removeItem(tempId);\n          notify(e.message, {type: 'error'});\n        }\n      }\n    },\n    [outbox, notify, setExpanded, addItem, removeItem]\n  );\n\n  const openAuthIfDisconnected = useCallback(() => {\n    if (!identity.id) {\n      setOpenAuth(true);\n    }\n  }, [identity, setOpenAuth]);\n\n  // Don't init the editor options until mentions and identity are loaded, as they can only be initialized once\n  if ((mentions && !mentions.items) || !identity) return null;\n\n  return (\n    <>\n      <Form\n        onSubmit={onSubmit}\n        subscription={{ submitting: true, pristine: true }}\n        render={({ handleSubmit, submitting, pristine }) => {\n          // Hack to clear comment input when form is reset\n          // TODO When we update to React-Admin 4, check if the new RichTextInput solves this bug\n          if (pristine) {\n            const commentElement = document.getElementById('comment');\n            if (commentElement && commentElement.textContent !== '') commentElement.innerHTML = '';\n          }\n          return (\n            <form onSubmit={handleSubmit} className={classes.form}>\n              <Box className={classes.container} onClick={openAuthIfDisconnected}>\n                <Avatar\n                  src={\n                    identity?.webIdData?.[userDataModel?.fieldsMapping?.image] ||\n                    identity?.profileData?.[userDataModel?.fieldsMapping?.image]\n                  }\n                  className={classes.avatar}\n                />\n                <RichTextInput\n                  source=\"comment\"\n                  label=\"\"\n                  toolbar={null}\n                  fullWidth\n                  classes={{ editorContent: classes.editorContent }}\n                  editorOptions={{\n                    ...DefaultEditorOptions,\n                    onFocus() {\n                      setExpanded(true);\n                    },\n                    extensions: [\n                      ...DefaultEditorOptions.extensions,\n                      placeholder ? Placeholder.configure({ placeholder }) : null,\n                      mentions\n                        ? CustomMention.configure({\n                            HTMLAttributes: {\n                              class: 'mention'\n                            },\n                            suggestion: mentions\n                          })\n                        : null\n                    ],\n                    // Disable editor if user is not connected\n                    editable: !!identity.id\n                  }}\n                  helperText={helperText}\n                />\n                {expanded && (\n                  <Button\n                    type=\"submit\"\n                    size=\"small\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    endIcon={<SendIcon />}\n                    disabled={submitting}\n                    className={classes.button}\n                  >\n                    Envoyer\n                  </Button>\n                )}\n              </Box>\n            </form>\n          );\n        }}\n      />\n      <AuthDialog\n        open={openAuth}\n        onClose={() => setOpenAuth(false)}\n        message=\"Pour poster un commentaire, vous devez tre connect.\"\n      />\n    </>\n  );\n};\n\nexport default PostCommentForm;\n","import React from 'react';\nimport { TextField, RichTextField, DateField } from 'react-admin';\nimport { Box, Typography, CircularProgress } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport { useDataModel } from '@semapps/semantic-data-provider';\nimport { AvatarWithLabelField, ReferenceField } from '@semapps/field-components';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingLeft: 80,\n    marginTop: 8,\n    minHeight: 80,\n    position: 'relative'\n  },\n  avatar: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    width: 64,\n    height: 64\n  },\n  text: {\n    paddingTop: 2,\n    paddingBottom: 8\n  },\n  label: {\n    fontWeight: 'bold'\n  },\n  content: {\n    '& p': {\n      marginBlockStart: '0.5em',\n      marginBlockEnd: '0.5em'\n    }\n  },\n  loading: {\n    zIndex: 1000,\n    backgroundColor: 'white',\n    opacity: 0.5,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n    marginTop: 5\n  }\n}));\n\nconst CommentsList = ({ comments, userResource, loading }) => {\n  const classes = useStyles();\n  const userDataModel = useDataModel(userResource);\n  return (\n    <Box position=\"relative\">\n      {comments &&\n        comments\n          .sort((a, b) => new Date(b.published) - new Date(a.published))\n          .map(comment => (\n            <Box className={classes.container}>\n              <Box className={classes.avatar}>\n                <ReferenceField record={comment} reference={userResource} source=\"attributedTo\" linkType=\"show\">\n                  <AvatarWithLabelField image={userDataModel?.fieldsMapping?.image} />\n                </ReferenceField>\n              </Box>\n              <Box className={classes.text}>\n                <Typography variant=\"body2\">\n                  <ReferenceField record={comment} reference={userResource} source=\"attributedTo\" linkType=\"show\">\n                    <TextField variant=\"body2\" source={userDataModel?.fieldsMapping?.title} className={classes.label} />\n                  </ReferenceField>\n                  &nbsp;&nbsp;\n                  <DateField record={comment} variant=\"body2\" source=\"published\" showTime />\n                </Typography>\n                <RichTextField record={comment} variant=\"body1\" source=\"content\" className={classes.content} />\n              </Box>\n            </Box>\n          ))}\n      {loading && (\n        <Box minHeight={200}>\n          <Box alignItems=\"center\" className={classes.loading}>\n            <CircularProgress size={60} thickness={6} />\n          </Box>\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nexport default CommentsList;\n","import { useCallback, useMemo, useState, useEffect } from 'react';\nimport { useGetIdentity, fetchUtils } from 'react-admin';\n\nconst useCollection = predicateOrUrl => {\n  const { identity } = useGetIdentity();\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(false);\n\n  const collectionUrl = useMemo(() => {\n    if (predicateOrUrl) {\n      if (predicateOrUrl.startsWith('http')) {\n        return predicateOrUrl;\n      } else if (identity?.webIdData) {\n        return identity?.webIdData?.[predicateOrUrl];\n      }\n    }\n  }, [identity, predicateOrUrl]);\n\n  const fetch = useCallback(async () => {\n    if (!collectionUrl) return;\n\n    setLoading(true);\n    const token = localStorage.getItem('token');\n    const headers = new Headers({\n      Accept: 'application/ld+json',\n      Authorization: token ? `Bearer ${token}` : undefined\n    });\n\n    fetchUtils\n      .fetchJson(collectionUrl, { headers })\n      .then(({ json }) => {\n        if (json && json.items) {\n          setItems(json.items);\n        } else if (json && json.orderedItems) {\n          setItems(json.orderedItems);\n        } else {\n          setItems([]);\n        }\n        setError(false);\n        setLoaded(true);\n        setLoading(false);\n      })\n      .catch(() => {\n        setError(true);\n        setLoaded(true);\n        setLoading(false);\n      });\n  }, [setItems, setLoaded, setLoading, setError, collectionUrl]);\n\n  useEffect(() => {\n    if (!loading && !loaded && !error) {\n      fetch();\n    }\n  }, [fetch, loading, loaded, error]);\n\n  const addItem = useCallback(\n    item => {\n      setItems(oldItems => [...oldItems, item]);\n    },\n    [setItems]\n  );\n\n  const removeItem = useCallback(\n    itemId => {\n      setItems(oldItems => oldItems.filter(item => (typeof item === 'string' ? item !== itemId : item.id !== itemId)));\n    },\n    [setItems]\n  );\n\n  return { items, loading, loaded, error, refetch: fetch, addItem, removeItem, url: collectionUrl };\n};\n\nexport default useCollection;\n","import React from 'react';\nimport { useRecordContext } from 'react-admin';\nimport PostCommentForm from './PostCommentForm';\nimport CommentsList from './CommentsList';\nimport useCollection from '../../hooks/useCollection';\n\nconst CommentsField = ({ source, context, helperText, placeholder, userResource, mentions }) => {\n  const record = useRecordContext();\n  const { items: comments, loading, addItem, removeItem } = useCollection(record.replies);\n  if (!userResource) throw new Error('No userResource defined for CommentsField');\n  return (\n    <>\n      <PostCommentForm\n        context={context}\n        helperText={helperText}\n        userResource={userResource}\n        placeholder={placeholder}\n        mentions={mentions}\n        addItem={addItem}\n        removeItem={removeItem}\n      />\n      <CommentsList comments={comments} loading={loading} userResource={userResource} />\n    </>\n  );\n};\n\nCommentsField.defaultProps = {\n  label: 'Commentaires',\n  placeholder: 'Commencez  taper votre commentaire...',\n  source: 'id', // Ensure the field is always displayed\n  context: 'id'\n};\n\nexport default CommentsField;\n","import React from 'react';\nimport { useGetOne, LinearProgress } from 'react-admin';\nimport { ReferenceArrayField } from '@semapps/field-components';\n\nconst CollectionList = ({ collectionUrl, resource, children, ...rest }) => {\n  if (React.Children.count(children) !== 1) {\n    throw new Error('<CollectionList> only accepts a single child');\n  }\n\n  // TODO use a simple fetch call, as the resource is not good and it is useless\n  const { data: collection, isLoading } = useGetOne(resource, collectionUrl, { enabled: !!collectionUrl });\n\n  if (isLoading) {\n    return (\n      <div style={{ marginTop: 8 }}>\n        <LinearProgress />\n      </div>\n    );\n  } else if (!collection) {\n    return null;\n  }\n\n  return (\n    <ReferenceArrayField reference={resource} record={collection} source=\"items\" {...rest}>\n      {children}\n    </ReferenceArrayField>\n  );\n};\n\nexport default CollectionList;\n","import React from 'react';\nimport CollectionList from './CollectionList';\n\nconst ReferenceCollectionField = ({ source, record, reference, children, ...rest }) => {\n  if (React.Children.count(children) !== 1) {\n    throw new Error('<ReferenceCollectionField> only accepts a single child');\n  }\n\n  if (!record || !record[source]) return null;\n\n  return (\n    <CollectionList resource={reference} collectionUrl={record[source]} {...rest}>\n      {children}\n    </CollectionList>\n  );\n};\n\nexport default ReferenceCollectionField;\n","import { useCallback, useMemo } from 'react';\nimport { useGetIdentity, fetchUtils } from 'react-admin';\nimport { buildBlankNodesQuery } from '@semapps/semantic-data-provider';\n\nconst useInbox = () => {\n  const { identity } = useGetIdentity();\n\n  const inboxUrl = useMemo(() => {\n    if (identity?.webIdData) {\n      return identity?.webIdData?.inbox;\n    }\n  }, [identity]);\n\n  const sparqlEndpoint = useMemo(() => {\n    if (identity?.webIdData) {\n      return identity?.webIdData?.endpoints?.['void:sparqlEndpoint'] || identity?.id + '/sparql';\n    }\n  }, [identity]);\n\n  const fetch = useCallback(\n    async ({ filters }) => {\n      console.log('inboxUrl', inboxUrl, sparqlEndpoint);\n\n      if (!sparqlEndpoint || !inboxUrl) return;\n\n      const token = localStorage.getItem('token');\n      const blankNodesQuery = buildBlankNodesQuery(['as:object']);\n\n      let filtersWhereQuery = '';\n      if (filters) {\n        Object.keys(filters).forEach(predicate => {\n          if (filters[predicate]) {\n            const object = filters[predicate].startsWith('http') ? `<${filters[predicate]}>` : filters[predicate];\n            filtersWhereQuery += `?s1 ${predicate} ${object} .`;\n          }\n        });\n      }\n\n      const query = `\n        PREFIX as: <https://www.w3.org/ns/activitystreams#>\n        CONSTRUCT {\n          ?s1 ?p1 ?o1 .\n          ${blankNodesQuery.construct}\n        }\n        WHERE {\n          <${inboxUrl}> as:items ?s1 .\n          ?s1 ?p1 ?o1 .\n          FILTER( (isIRI(?s1)) ) .\n          ${filtersWhereQuery}\n          ${blankNodesQuery.where}\n        }\n      `;\n\n      const { json } = await fetchUtils.fetchJson(sparqlEndpoint, {\n        method: 'POST',\n        body: query,\n        headers: new Headers({\n          Accept: 'application/ld+json',\n          Authorization: token ? `Bearer ${token}` : undefined\n        })\n      });\n\n      if (json['@graph']) {\n        return json['@graph'];\n      } else {\n        return null;\n      }\n    },\n    [sparqlEndpoint, inboxUrl]\n  );\n\n  return { fetch, url: inboxUrl, owner: identity?.id };\n};\n\nexport default useInbox;\n","import { useCallback } from 'react';\nimport { fetchUtils } from 'react-admin';\n\nconst useWebfinger = () => {\n  // Post an activity to the logged user's outbox and return its URI\n  const fetch = useCallback(async id => {\n    // eslint-disable-next-line\n    const [_, username, host] = id.split('@');\n    if (host) {\n      const protocol = host.includes(':') ? 'http' : 'https'; // If the host has a port, we are most likely on localhost\n      const webfingerUrl = `${protocol}://${host}/.well-known/webfinger?resource=acct:${username}@${host}`;\n\n      try {\n        const { json } = await fetchUtils.fetchJson(webfingerUrl);\n\n        const link = json.links.find(l => l.type === 'application/activity+json');\n\n        return link ? link.href : null;\n      } catch (e) {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }, []);\n\n  return { fetch };\n};\n\nexport default useWebfinger;\n","import React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport makeStyles from '@mui/styles/makeStyles';\n\nconst useStyles = makeStyles(theme => ({\n  items: {\n    background: '#fff',\n    borderRadius: '0.5rem',\n    boxShadow: '0 0 0 1px rgba(0, 0, 0, 0.05), 0px 10px 20px rgba(0, 0, 0, 0.1)',\n    color: 'rgba(0, 0, 0, 0.8)',\n    fontSize: '0.9rem',\n    overflow: 'hidden',\n    padding: '0.2rem',\n    position: 'relative'\n  },\n  item: {\n    background: 'transparent',\n    border: '1px solid transparent',\n    borderRadius: '0.4rem',\n    display: 'block',\n    margin: 0,\n    padding: '0.2rem 0.4rem',\n    textAlign: 'left',\n    width: '100%',\n    '&.selected': {\n      borderColor: '#000'\n    }\n  }\n}));\n\nexport default forwardRef((props, ref) => {\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const classes = useStyles();\n\n  const selectItem = index => {\n    const item = props.items[index];\n\n    if (item) {\n      props.command({ id: item });\n    }\n  };\n\n  const upHandler = () => {\n    setSelectedIndex((selectedIndex + props.items.length - 1) % props.items.length);\n  };\n\n  const downHandler = () => {\n    setSelectedIndex((selectedIndex + 1) % props.items.length);\n  };\n\n  const enterHandler = () => {\n    selectItem(selectedIndex);\n  };\n\n  useEffect(() => setSelectedIndex(0), [props.items]);\n\n  useImperativeHandle(ref, () => ({\n    onKeyDown: ({ event }) => {\n      if (event.key === 'ArrowUp') {\n        upHandler();\n        return true;\n      }\n\n      if (event.key === 'ArrowDown') {\n        downHandler();\n        return true;\n      }\n\n      if (event.key === 'Enter') {\n        enterHandler();\n        return true;\n      }\n\n      return false;\n    }\n  }));\n\n  return (\n    <div className={classes.items}>\n      {props.items.length ? (\n        props.items.map((item, index) => (\n          <button\n            className={classes.item + (index === selectedIndex ? ' selected' : '')}\n            key={index}\n            onClick={() => selectItem(index)}\n          >\n            {item.label}\n          </button>\n        ))\n      ) : (\n        <div className={classes.item}>Aucun rsultat</div>\n      )}\n    </div>\n  );\n});\n","import { ReactRenderer } from '@tiptap/react';\nimport tippy from 'tippy.js';\nimport MentionsList from './MentionsList';\n\nconst renderMentions = () => {\n  let component;\n  let popup;\n\n  return {\n    onStart: props => {\n      component = new ReactRenderer(MentionsList, {\n        props,\n        editor: props.editor\n      });\n\n      popup = tippy('body', {\n        getReferenceClientRect: props.clientRect,\n        appendTo: () => document.body,\n        content: component.element,\n        showOnCreate: true,\n        interactive: true,\n        trigger: 'manual',\n        placement: 'bottom-start'\n      });\n    },\n\n    onUpdate(props) {\n      component.updateProps(props);\n\n      popup[0].setProps({\n        getReferenceClientRect: props.clientRect\n      });\n    },\n\n    onKeyDown(props) {\n      if (props.event.key === 'Escape') {\n        popup[0].hide();\n\n        return true;\n      }\n\n      return component.ref?.onKeyDown(props);\n    },\n\n    onExit() {\n      popup[0].destroy();\n      component.destroy();\n    }\n  };\n};\n\nexport default renderMentions;\n","import { useMemo } from 'react';\nimport { useGetList } from 'react-admin';\nimport renderMentions from './renderMentions';\nimport { useDataModel } from '@semapps/semantic-data-provider';\n\nconst useMentions = userResource => {\n  const userDataModel = useDataModel(userResource);\n\n  // The \"enabled\" option doesn't work with useQueryWithStore\n  const { data } = useGetList(\n    {\n      resource: userResource,\n      payload: {\n        filter: {\n          _predicates: [userDataModel?.fieldsMapping?.title],\n          blankNodes: []\n        }\n      }\n    },\n    {\n      enabled: !!userDataModel?.fieldsMapping?.title\n    }\n  );\n\n  const availableMentions = useMemo(() => {\n    if (data) {\n      return data.map(item => ({ id: item.id, label: item[userDataModel?.fieldsMapping?.title] }));\n    }\n  }, [data]);\n\n  const items = useMemo(() => {\n    if (availableMentions) {\n      return ({ query }) => {\n        return availableMentions.filter(({ label }) => label.toLowerCase().startsWith(query.toLowerCase())).slice(0, 5);\n      };\n    }\n  }, [availableMentions]);\n\n  return {\n    items,\n    render: renderMentions\n  };\n};\n\nexport default useMentions;\n"],"names":["r","e","t","f","n","Array","isArray","length","clsx","arguments","ColorType","TiptapEditorContext","createContext","undefined","TiptapEditorProvider","_a","children","value","React","Provider","useTiptapEditor","useState","ready","setReady","editor","useContext","useEffect","onReady","isEditable","on","off","FormatButtons","props","translate","useTranslate","values","setValues","boldLabel","_","italicLabel","underlineLabel","strikeLabel","codeLabel","handleUpdate","FormatValues","reduce","acc","isActive","push","ToggleButtonGroup","__assign","disabled","onChange","event","newFormats","forEach","format","shouldBeDeactivated","includes","shouldBeActivated","FormatActions","ToggleButton","aria-label","title","FormatBold","fontSize","FormatItalic","FormatUnderlined","FormatStrikethrough","Code","bold","chain","focus","toggleBold","run","italic","toggleItalic","underline","toggleUnderline","strike","toggleStrike","code","toggleCode","ListButtons","bulletListLabel","numberListLabel","setValue","ListValues","exclusive","newFormat","ListActions","FormatListBulleted","FormatListNumbered","bulletList","toggleBulletList","orderedList","toggleOrderedList","AlignmentButtons","leftLabel","rightLabel","centerLabel","justifyLabel","currentValue","AlignmentValues","textAlign","AlignmentActions","FormatAlignLeft","FormatAlignCenter","FormatAlignRight","FormatAlignJustify","left","setTextAlign","center","right","justify","LinkButtons","currentTextSelection","state","doc","textBetween","selection","from","to","setSelection","handleSelectionChange","useEditorSelection","label","onClick","can","setLink","href","url","window","prompt","extendMarkRange","selected","InsertLink","QuoteButtons","setIsActive","toggleBlockquote","FormatQuote","ClearButtons","unsetAllMarks","FormatClear","LevelSelect","anchorElement","_b","setAnchorElement","size","_c","options","selectedOption","setSelectedOption","currentOption","option","level","Root","List","component","dense","disablePadding","className","classes","list","ListItem","button","aria-haspopup","aria-controls","currentTarget","sizeSmall","sizeLarge","ListItemText","primary","defaultLabel","ArrowDropDownIcon","Menu","anchorEl","open","Boolean","id","onClose","map","index","MenuItem","key","selectedItem","setParagraph","setHeading","handleMenuItemClick","PREFIX","concat","styled","theme","borderRadius","shape","border","alpha","palette","action","active","paddingTop","paddingBottom","& .MuiTypography-root","typography","pxToRem","ImageButtons","addImage","useCallback","setImage","src","ImageIcon","ColorButtons","showColorChoiceDialog","setShowColorChoiceDialog","FONT","colorType","setColorType","colorLabel","highlightLabel","displayColorChoiceDialog","Box","sx","position","OutsideListener","FormatColorTextIcon","BACKGROUND","FontDownloadIcon","ColorChoiceDialog","close","useTheme","colors","grey","red","orange","yellow","green","blue","purple","Card","top","p","background","default","display","flexDirection","gap","zIndex","shade","line","color","row","width","height","cursor","backgroundColor","setColor","toggleHighlight","selectColor","wrapperRef","useRef","useOutsideListener","ref","handleClickOutside","current","contains","target","document","addEventListener","removeEventListener","RichTextInputToolbar","rest","__rest","root","flexWrap","alignItems","& > *","marginRight","spacing","marginBottom","& > *:last-child","RichTextInput","defaultValue","_d","_e","editorOptions","DefaultEditorOptions","fullWidth","helperText","_f","readOnly","source","toolbar","resource","useResourceContext","useInput","_g","field","isRequired","fieldState","isSubmitted","formState","useEditor","editable","content","editorProps","attributes","error","invalid","isTouched","commands","setContent","preserveWhitespace","setTextSelection","setOptions","handleEditorUpdate","isEmpty","onBlur","html","getHTML","Labeled","RichTextInputContent","EditorContent","aria-labelledby","editorContent","FormHelperText","InputHelperText","touched","message","extensions","StarterKit","Underline","Link","TextAlign","configure","types","Image","inline","TextStyle","Color","Highlight","multicolor","name","overridesResolver","styles","& .ProseMirror","borderColor","mode","borderStyle","borderWidth","padding","&[contenteditable=\"false\"], &[contenteditable=\"false\"]:hover, &[contenteditable=\"false\"]:focus","disabledBackground","&:hover","hover","&:focus","& p","margin","&:last-child","_extends","Object","assign","bind","i","prototype","hasOwnProperty","call","apply","this","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","charCodeOfDot","charCodeAt","reEscapeChar","rePropName","RegExp","keysCache","keysRegex","toPath","Error","string","result","endsWith","split","filter","replace","match","expression","quote","subString","trim","getIn","complexKey","path","isNaN","_toPropertyKey","arg","input","hint","prim","Symbol","toPrimitive","res","TypeError","String","Number","_toPrimitive","setIn","destroyArrays","setInRecursor","_extends2","_ref","_result2","_result","numKeys","numericKey","_result3","_array","array","splice","ARRAY_ERROR","publishFieldState","errors","initialValues","lastSubmittedValues","submitErrors","submitFailed","submitSucceeded","submitting","blur","change","data","modified","modifiedSinceLastSubmit","validating","visited","submitError","initial","pristine","isEqual","valid","dirty","dirtySinceLastSubmit","fieldSubscriptionItems","shallowEqual","a","b","keysA","keysB","bHasOwnProperty","idx","subscriptionFilter","dest","previous","subscription","shallowEqualKeys","different","shallowEqualKeys$1","filterFieldState","previousState","force","formSubscriptionItems","filterFormState","memoize","fn","lastArgs","lastResult","_len","args","_key","some","isPromise","obj","then","tripleEquals","hasAnyError","notifySubscriber","subscriber","lastState","notification","notify","_ref2","entries","entry","notified","createForm","config","debug","destroyOnUnregister","keepDirtyOnReinitialize","mutators","onSubmit","validate","validateOnBlur","subscribers","fieldSubscribers","fields","asyncErrors","resetWhileSubmitting","lastFormState","inBatch","validationPaused","validationBlocked","preventNotificationWhileValidationPaused","nextAsyncValidationKey","asyncValidationPromises","changeValue","mutate","after","renameField","_extends3","api","lastFieldState","getMutatorApi","mutatableState","returnValue","resetFieldState","runValidation","notifyFieldListeners","notifyFormListeners","mutatorsApi","getValidators","validators","validator","fieldChanged","callback","safeFields","fieldKeys","limitedFieldLevelValidation","changedField","validateFields","recordLevelErrors","asyncRecordLevelErrors","fieldLevelErrors","promises","setErrors","errorsOrPromise","runRecordLevelValidation","wasAsync","setError","errorOrPromise","promise","runFieldLevelValidation","hasAsyncValidations","asyncValidationPromiseKey","Promise","all","processErrors","afterAsync","merged","forEachError","recordLevelError","errorFromParent","hasFieldLevelValidation","fieldLevelError","existing","copy","afterPromise","notifyField","fieldSubscriber","markAllFieldsTouched","calculateNextFormState","safeFieldKeys","foundDirty","dirtyFields","dirtyFieldsSinceLastSubmit","nonNullLastSubmittedValues","nextFormState","hasSubmitErrors","hasValidationErrors","convertToExternalFormState","_safeFieldKeys$reduce","notifying","scheduleNotification","resetModifiedAfterSubmit","batch","getFieldState","getRegisteredFields","getState","initialize","savedDirtyValues","isValidationPaused","pauseValidation","preventNotification","registerField","fieldConfig","afterSubmit","beforeSubmit","haveValidator","silent","getValidator","noValueInFormState","initialValue","validatorRemoved","hasFieldSubscribers","lastOne","reset","restart","resumeValidation","setConfig","submit","asyncValidationPromisesKeys","console","resolvePromise","completeCalled","complete","resolve","subscribe","memoized","_excluded$3","useWhenValueChanges","React__default","ReactFinalFormContext","addLazyFormState","defineProperty","get","enumerable","addLazyState","_excluded$2","versions","final-form","react-final-form","all$1","ReactFinalForm","init","_ref$decorators","decorators","alternateFormApi","form","initialValuesEqual","_ref$subscription","_React$useState","initialState","setState","stateRef","useLatest","unsubscriptions","s","decorator","reverse","unsubscribe","renderProps","eventOrValues","candidate","stopPropagation","handleSubmit","preventDefault","createElement","lazyProps","render","renderComponent","__versions","ACTIVITY_TYPES","ACCEPT","ADD","ANNOUNCE","ARRIVE","BLOCK","CREATE","DELETE","DISLIKE","FLAG","FOLLOW","IGNORE","INVITE","JOIN","LEAVE","LIKE","LISTEN","MOVE","OFFER","QUESTION","REJECT","READ","REMOVE","TENTATIVE_REJECT","TENTATIVE_ACCEPT","TRAVAL","UNDO","UPDATE","VIEW","ACTOR_TYPES","APPLICATION","GROUP","ORGANIZATION","PERSON","SERVICE","OBJECT_TYPES","ARTICLE","AUDIO","DOCUMENT","EVENT","IMAGE","NOTE","PAGE","PLACE","PROFILE","RELATIONSHIP","TOMBSTONE","VIDEO","PUBLIC_URI","useOutbox","identity","useGetIdentity","outboxUrl","useMemo","_identity$webIdData","webIdData","outbox","sparqlEndpoint","_identity$webIdData2","_identity$webIdData2$","endpoints","post","_asyncToGenerator","_regeneratorRuntime","mark","activity","token","_yield$fetchUtils$fet","headers","wrap","_context","prev","next","localStorage","getItem","fetchUtils","fetchJson","method","body","JSON","stringify","_objectSpread","@context","Headers","Content-Type","Authorization","sent","abrupt","stop","_callee","_x","fetch","_callee2","blankNodesQuery","query","_yield$fetchUtils$fet2","json","_context2","buildBlankNodesQuery","construct","where","Accept","owner","CustomMention","Mention","extend","renderHTML","node","HTMLAttributes","mergeAttributes","attrs","addAttributes","parseHTML","element","getAttribute","data-mention-label","data-mention-id","useStyles","makeStyles","marginTop","container","paddingLeft","avatar","bottom","& > div","borderBottom","minHeight","outline","& > div > p","fontFamily","body1","marginBlockStart","marginBlockEnd","& > div > p.is-editor-empty:first-child::before","float","pointerEvents","PostCommentForm","context","placeholder","mentions","userResource","addItem","removeItem","record","useRecordContext","userDataModel","useDataModel","useNotify","_useState2","_slicedToArray","expanded","setExpanded","_useState4","openAuth","setOpenAuth","_ref3","mentionedUsersUris","tempId","note","DOMParser","parseFromString","comment","getElementsByClassName","userUri","userLabel","link","setAttribute","URL","location","origin","encodeURIComponent","textContent","parentNode","replaceChild","innerHTML","type","Date","now","attributedTo","inReplyTo","published","toISOString","t0","_x2","openAuthIfDisconnected","items","Fragment","Form","_ref4","_userDataModel$fields","_identity$profileData","_userDataModel$fields2","commentElement","getElementById","Avatar","fieldsMapping","image","profileData","onFocus","_toConsumableArray","Placeholder","class","suggestion","Button","variant","endIcon","SendIcon","AuthDialog","text","fontWeight","loading","opacity","justifyContent","CommentsList","comments","sort","ReferenceField","reference","linkType","AvatarWithLabelField","Typography","TextField","DateField","showTime","RichTextField","CircularProgress","thickness","useCollection","predicateOrUrl","setItems","setLoading","_useState6","loaded","setLoaded","_useState8","collectionUrl","startsWith","orderedItems","item","oldItems","itemId","refetch","CommentsField","_useCollection","replies","defaultProps","CollectionList","_objectWithoutProperties","_excluded","Children","count","_useGetOne","useGetOne","enabled","collection","isLoading","style","LinearProgress","ReferenceArrayField","ReferenceCollectionField","useInbox","inboxUrl","inbox","filters","filtersWhereQuery","log","predicate","object","useWebfinger","_id$split","_id$split2","username","host","protocol","webfingerUrl","links","find","l","boxShadow","overflow","&.selected","MentionsList","forwardRef","selectedIndex","setSelectedIndex","selectItem","command","useImperativeHandle","onKeyDown","renderMentions","popup","onStart","ReactRenderer","tippy","getReferenceClientRect","clientRect","appendTo","showOnCreate","interactive","trigger","placement","onUpdate","updateProps","setProps","_component$ref","hide","onExit","destroy","useMentions","useGetList","payload","_predicates","blankNodes","availableMentions","_userDataModel$fields3","toLowerCase","slice"],"mappings":"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"}