{"version":3,"file":"index.cjs.js","sources":["../src/OptionRenderer.js","../src/MultiLinesInput.js","../src/MultiServerAutocompleteArrayInput.js","../src/MultiServerAutocompleteInput.js","../src/ReferenceArrayInput.js","../src/ReferenceInput.js"],"sourcesContent":["import React from 'react';\n\nconst OptionRenderer = ({ record, optionText, dataServers, keyword, ...rest }) => {\n  const server = dataServers && Object.values(dataServers).find(server => record.id.startsWith(server.baseUrl));\n  if (rest.create && (!record || !server)) return \"Cr√©er \"+keyword ;\n  return (\n    <span>\n      {record[optionText]}\n      {server && (\n        <em className=\"serverName\" style={{ color: 'grey' }}>\n          &nbsp;({server.name})\n        </em>\n      )}\n    </span>\n  );\n};\n\nexport default OptionRenderer;\n","import React from 'react';\nimport { TextInput } from 'react-admin';\n\nconst MultiLinesInput = props => (\n  <TextInput\n    multiline\n    minRows={2}\n    format={value => (value ? (Array.isArray(value) ? value.join('\\n') : value) : '')}\n    parse={value => value.split(/\\r?\\n/)}\n    {...props}\n  />\n);\n\nexport default MultiLinesInput;\n","import React, { useCallback, useState } from 'react';\nimport { AutocompleteArrayInput } from 'react-admin';\nimport { useDataServers } from '@semapps/semantic-data-provider';\nimport OptionRenderer from './OptionRenderer';\n\nconst MultiServerAutocompleteArrayInput = ({ optionText, ...rest }) => {\n  const dataServers = useDataServers();\n  const [keyword, setKeyword] = useState(\"\");\n  const matchSuggestion = useCallback(\n    (filterValue, choice) => {\n      setKeyword(filterValue)\n      return ( choice[optionText].toLowerCase().match(filterValue.toLowerCase()) )\n    }, [optionText]\n  );\n  return (\n    <AutocompleteArrayInput\n      matchSuggestion={matchSuggestion}\n      optionText={<OptionRenderer \n        optionText={optionText} \n        dataServers={dataServers} \n        keyword={keyword}\n        {...rest}\n        />}\n      {...rest}\n    />\n  );\n};\n\nexport default MultiServerAutocompleteArrayInput;\n","import React, { useCallback } from 'react';\nimport { AutocompleteInput } from 'react-admin';\nimport { useDataServers } from '@semapps/semantic-data-provider';\n\nconst MultiServerAutocompleteInput = ({ optionText, ...rest }) => {\n  const dataServers = useDataServers();\n  // We cannot use OptionRenderer like MultiServerAutocompleteArrayInput because there is a bug with AutocompleteInput\n  const optionTextWithServerName = useCallback(\n    record => {\n      if (record && dataServers) {\n        const server = Object.values(dataServers).find(server => record.id.startsWith(server.baseUrl));\n        return record[optionText] + (server ? ` (${server.name})` : '');\n      }\n    },\n    [optionText, dataServers]\n  );\n  return <AutocompleteInput optionText={optionTextWithServerName} {...rest} />;\n};\n\nexport default MultiServerAutocompleteInput;\n","import React from 'react';\nimport { ReferenceArrayInput as RaReferenceArrayInput, useResourceContext } from 'react-admin';\n\nconst ReferenceArrayInput = props => {\n  const resource = useResourceContext({});\n  return (\n    <RaReferenceArrayInput\n      {...props}\n      resource={resource}\n      format={value => {\n        // If there is no value, return immediately\n        if (!value) return value;\n        // if the linked field value is not an array, turns it into an array.\n        // Necessary as JSON-LD are sometimes arrays, sometimes not (when there is one value)\n        // and the ReferenceArrayInput component only accept arrays\n        if (!Array.isArray(value)) value = [value];\n        // If a format prop was defined, apply it to the array\n        if (props.format) value = props.format(value);\n        // If the values are objects with @id field, turn it to a simple string\n        return value.map(v => (typeof v === 'object' ? v.id || v['@id'] : v));\n      }}\n    />\n  );\n};\n\nexport default ReferenceArrayInput;\n","import React from 'react';\nimport { ReferenceInput as RaReferenceInput, useResourceContext } from 'react-admin';\n\nconst ReferenceInput = props => {\n  const resource = useResourceContext({});\n  return (\n    <RaReferenceInput\n      {...props}\n      resource={resource}\n      format={value => {\n        // If there is no value, return immediately\n        if (!value) return value;\n        // If a format prop was defined, apply it\n        if (props.format) value = props.format(value);\n        // If the value is an object with an @id field, return the uri\n        return typeof value === 'object' ? value.id || value['@id'] : value;\n      }}\n    />\n  );\n};\n\nexport default ReferenceInput;\n"],"names":["OptionRenderer","_ref","record","optionText","dataServers","keyword","rest","_objectWithoutProperties","_excluded","server","Object","values","find","id","startsWith","baseUrl","create","React","createElement","className","style","color","name","props","TextInput","_extends","multiline","minRows","format","value","Array","isArray","join","parse","split","useDataServers","_useState2","_slicedToArray","useState","setKeyword","matchSuggestion","useCallback","filterValue","choice","toLowerCase","match","AutocompleteArrayInput","optionTextWithServerName","AutocompleteInput","resource","useResourceContext","RaReferenceArrayInput","map","v","_typeof","RaReferenceInput"],"mappings":"sjEAEMA,EAAiB,SAA2DC,GAAA,IAAxDC,IAAAA,OAAQC,IAAAA,WAAYC,IAAAA,YAAaC,IAAAA,QAAYC,EAAWC,EAAAN,EAAAO,GAC1EC,EAASL,GAAeM,OAAOC,OAAOP,GAAaQ,MAAK,SAAAH,GAAM,OAAIP,EAAOW,GAAGC,WAAWL,EAAOM,YACpG,OAAIT,EAAKU,QAAYd,GAAWO,EAE9BQ,oCACGf,EAAOC,GACPM,GACCQ,UAAAC,cAAA,KAAA,CAAIC,UAAU,aAAaC,MAAO,CAAEC,MAAO,SAA3C,KACUZ,EAAOa,KADjB,MAL0C,SAASjB,6DCDnC,SAAAkB,GAAK,OAC3BN,wBAACO,EAADA,UAAAC,EAAA,CACEC,WADF,EAEEC,QAAS,EACTC,OAAQ,SAAAC,GAAK,OAAKA,EAASC,MAAMC,QAAQF,GAASA,EAAMG,KAAK,MAAQH,EAAS,IAC9EI,MAAO,SAAAJ,GAAK,OAAIA,EAAMK,MAAM,WACxBX,+CCJkC,SAA6BtB,GAAA,IAA1BE,IAAAA,WAAeG,EAAWC,EAAAN,EAAAO,GAC/DJ,EAAc+B,EAAAA,iBACpBC,EAAAC,EAA8BC,EAAQA,SAAC,IAAvC,GAAOjC,EAAP+B,EAAA,GAAgBG,EAAhBH,EAAA,GACMI,EAAkBC,EAAAA,aACtB,SAACC,EAAaC,GAEZ,OADAJ,EAAWG,GACFC,EAAOxC,GAAYyC,cAAcC,MAAMH,EAAYE,iBAC3D,CAACzC,IAEN,OACEc,wBAAC6B,EAADA,uBAAArB,EAAA,CACEe,gBAAiBA,EACjBrC,WAAYc,wBAACjB,EAADyB,EAAA,CACVtB,WAAYA,EACZC,YAAaA,EACbC,QAASA,GACLC,KAEFA,0CCnB2B,SAA6BL,GAAA,IAA1BE,IAAAA,WAAeG,EAAWC,EAAAN,EAAAO,GAC1DJ,EAAc+B,EAAAA,iBAEdY,EAA2BN,eAC/B,SAAAvC,GACE,GAAIA,GAAUE,EAAa,CACzB,IAAMK,EAASC,OAAOC,OAAOP,GAAaQ,MAAK,SAAAH,GAAM,OAAIP,EAAOW,GAAGC,WAAWL,EAAOM,YACrF,OAAOb,EAAOC,IAAeM,EAAcA,KAAAA,OAAAA,EAAOa,KAAU,KAAA,OAGhE,CAACnB,EAAYC,IAEf,OAAOa,wBAAC+B,EAADA,kBAAAvB,EAAA,CAAmBtB,WAAY4C,GAA8BzC,iCCb1C,SAAAiB,GAC1B,IAAM0B,EAAWC,qBAAmB,IACpC,OACEjC,EAAAA,QAAAC,cAACiC,EAAAA,oBAAD1B,EAAA,GACMF,EADN,CAEE0B,SAAUA,EACVrB,OAAQ,SAAAC,GAEN,OAAKA,GAIAC,MAAMC,QAAQF,KAAQA,EAAQ,CAACA,IAEhCN,EAAMK,SAAQC,EAAQN,EAAMK,OAAOC,IAEhCA,EAAMuB,KAAI,SAAAC,GAAC,MAAkB,WAAbC,EAAOD,GAAiBA,EAAExC,IAAMwC,EAAE,OAASA,MAR/CxB,8BCRJ,SAAAN,GACrB,IAAM0B,EAAWC,qBAAmB,IACpC,OACEjC,EAAAA,QAAAC,cAACqC,EAAAA,eAAD9B,EAAA,GACMF,EADN,CAEE0B,SAAUA,EACVrB,OAAQ,SAAAC,GAEN,OAAKA,GAEDN,EAAMK,SAAQC,EAAQN,EAAMK,OAAOC,IAEf,WAAjByB,EAAOzB,GAAqBA,EAAMhB,IAAMgB,EAAM,OAASA,GAJ3CA"}