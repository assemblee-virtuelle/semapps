"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),e=require("markdown-to-jsx"),r=require("react-mde"),n=require("react-admin"),o=require("@material-ui/core");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=a(t),i=a(e),c=a(r);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r,n,o,a,u){try{var i=t[a](u),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function u(t){s(a,n,o,u,i,"next",t)}function i(t){s(a,n,o,u,i,"throw",t)}u(void 0)}))}}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function h(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],u=!0,i=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);u=!0);}catch(t){i=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g=Array.isArray,_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},m="object"==typeof _&&_&&_.Object===Object&&_,O="object"==typeof self&&self&&self.Object===Object&&self,j=m||O||Function("return this")(),w=j.Symbol,P=Object.prototype,x=P.hasOwnProperty,S=P.toString,E=w?w.toStringTag:void 0;var k=function(t){var e=x.call(t,E),r=t[E];try{t[E]=void 0;var n=!0}catch(t){}var o=S.call(t);return n&&(e?t[E]=r:delete t[E]),o},C=Object.prototype.toString;var T=function(t){return C.call(t)},z=w?w.toStringTag:void 0;var A=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?k(t):T(t)};var F=function(t){return null!=t&&"object"==typeof t};var $=function(t){return"symbol"==typeof t||F(t)&&"[object Symbol]"==A(t)},I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,L=/^\w*$/;var q=function(t,e){if(g(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!$(t))||(L.test(t)||!I.test(t)||null!=e&&t in Object(e))};var M=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var R,D=function(t){if(!M(t))return!1;var e=A(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},U=j["__core-js_shared__"],H=(R=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"";var N=function(t){return!!H&&H in t},W=Function.prototype.toString;var G=function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""},B=/^\[object .+?Constructor\]$/,J=Function.prototype,K=Object.prototype,Q=J.toString,V=K.hasOwnProperty,X=RegExp("^"+Q.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Y=function(t){return!(!M(t)||N(t))&&(D(t)?X:B).test(G(t))};var Z=function(t,e){return null==t?void 0:t[e]};var tt=function(t,e){var r=Z(t,e);return Y(r)?r:void 0},et=tt(Object,"create");var rt=function(){this.__data__=et?et(null):{},this.size=0};var nt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ot=Object.prototype.hasOwnProperty;var at=function(t){var e=this.__data__;if(et){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return ot.call(e,t)?e[t]:void 0},ut=Object.prototype.hasOwnProperty;var it=function(t){var e=this.__data__;return et?void 0!==e[t]:ut.call(e,t)};var ct=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=et&&void 0===e?"__lodash_hash_undefined__":e,this};function lt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lt.prototype.clear=rt,lt.prototype.delete=nt,lt.prototype.get=at,lt.prototype.has=it,lt.prototype.set=ct;var ft=lt;var st=function(){this.__data__=[],this.size=0};var pt=function(t,e){return t===e||t!=t&&e!=e};var vt=function(t,e){for(var r=t.length;r--;)if(pt(t[r][0],e))return r;return-1},dt=Array.prototype.splice;var ht=function(t){var e=this.__data__,r=vt(e,t);return!(r<0)&&(r==e.length-1?e.pop():dt.call(e,r,1),--this.size,!0)};var yt=function(t){var e=this.__data__,r=vt(e,t);return r<0?void 0:e[r][1]};var bt=function(t){return vt(this.__data__,t)>-1};var gt=function(t,e){var r=this.__data__,n=vt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function _t(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_t.prototype.clear=st,_t.prototype.delete=ht,_t.prototype.get=yt,_t.prototype.has=bt,_t.prototype.set=gt;var mt=_t,Ot=tt(j,"Map");var jt=function(){this.size=0,this.__data__={hash:new ft,map:new(Ot||mt),string:new ft}};var wt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Pt=function(t,e){var r=t.__data__;return wt(e)?r["string"==typeof e?"string":"hash"]:r.map};var xt=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e};var St=function(t){return Pt(this,t).get(t)};var Et=function(t){return Pt(this,t).has(t)};var kt=function(t,e){var r=Pt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ct.prototype.clear=jt,Ct.prototype.delete=xt,Ct.prototype.get=St,Ct.prototype.has=Et,Ct.prototype.set=kt;var Tt=Ct;function zt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var u=t.apply(this,n);return r.cache=a.set(o,u)||a,u};return r.cache=new(zt.Cache||Tt),r}zt.Cache=Tt;var At=zt;var Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$t=/\\(\\)?/g,It=function(t){var e=At(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ft,(function(t,r,n,o){e.push(n?o.replace($t,"$1"):r||t)})),e}));var Lt=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},qt=w?w.prototype:void 0,Mt=qt?qt.toString:void 0;var Rt=function t(e){if("string"==typeof e)return e;if(g(e))return Lt(e,t)+"";if($(e))return Mt?Mt.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r};var Dt=function(t){return null==t?"":Rt(t)};var Ut=function(t,e){return g(t)?t:q(t,e)?[t]:It(Dt(t))};var Ht=function(t){if("string"==typeof t||$(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Nt=function(t,e){for(var r=0,n=(e=Ut(e,t)).length;null!=t&&r<n;)t=t[Ht(e[r++])];return r&&r==n?t:void 0};var Wt=function(t,e,r){var n=null==t?void 0:Nt(t,e);return void 0===n?r:n},Gt=["source","record","LabelComponent","overrides"],Bt=function(t){var e=t.source,r=t.record,n=t.LabelComponent,o=t.overrides,a=void 0===o?{}:o,c=h(t,Gt);return r&&Wt(r,e)?u.default.createElement(i.default,{options:f({createElement:function(t,e,r){return e.label?u.default.createElement(u.default.Fragment,null,u.default.createElement(n,null,e.label),u.default.createElement(t,e,r)):u.default.createElement(t,e,r)},overrides:f({h1:n},a)},c)},Wt(r,e)):null};Bt.defaultProps={LabelComponent:"h2",addLabel:!0};var Jt=o.makeStyles((function(t){return{validationError:{"& .MuiFormLabel-root":{color:t.palette.error.main},"& .mde-text":{outline:"-webkit-focus-ring-color auto 1px",outlineOffset:0,outlineColor:t.palette.error.main,outlineStyle:"auto",outlineWidth:1}}}}));exports.MarkdownField=Bt,exports.MarkdownInput=function(e){var r=Jt(),a=e.validate,l=t.useMemo((function(){return!!a&&!![].concat(a).find((function(t){return t.toString()===n.required().toString()}))}),[a]),f=y(t.useState("write"),2),s=f[0],v=f[1],h=n.useInput(e),b=h.input,g=b.value,_=b.onChange,m=h.meta,O=m.error,j=m.touched;return u.default.createElement(o.FormControl,{fullWidth:!0,className:"ra-input-mde ".concat(O?r.validationError:"")},u.default.createElement(n.Labeled,d({},e,{isRequired:l}),u.default.createElement(c.default,d({value:g,onChange:function(t){return _(t)},onTabChange:function(t){return v(t)},generateMarkdownPreview:function(){var t=p(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.default.createElement(i.default,null,e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),selectedTab:s},e))),u.default.createElement(o.FormHelperText,{error:!!O,margin:"dense",variant:"outlined"},u.default.createElement(n.InputHelperText,{error:O,helperText:e.helperText,touched:O||j})))},exports.useLoadLinks=function(t,e){var r=n.useDataProvider(),o=n.useTranslate();return function(){var n=p(regeneratorRuntime.mark((function n(a){var u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=9;break}return n.next=3,r.getList(t,{pagination:{page:1,perPage:5},filter:{q:a}});case 3:if(!((u=n.sent).total>0)){n.next=8;break}return n.abrupt("return",u.data.map((function(r){return{preview:r[e],value:"[".concat(r[e],"](/").concat(t,"/").concat(encodeURIComponent(r.id),"/show)")}})));case 8:return n.abrupt("return",[{preview:o("ra.navigation.no_results"),value:"["+a}]);case 9:return n.abrupt("return",[{preview:o("ra.action.search"),value:"["+a}]);case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()};
//# sourceMappingURL=index.cjs.js.map
