"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7260],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return k}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},s=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,d=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),s=p(a),k=r,h=s["".concat(d,".").concat(k)]||s[k]||m[k]||l;return a?n.createElement(h,i(i({ref:t},u),{},{components:a})):n.createElement(h,i({ref:t},u))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=s;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},9010:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return d},default:function(){return k},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return m}});var n=a(3117),r=a(102),l=(a(7294),a(3905)),i=["components"],o={title:"WebAclResourceService"},d=void 0,p={unversionedId:"middleware/webacl/resource",id:"middleware/webacl/resource",title:"WebAclResourceService",description:"This service is automatically created by the WebAclService with the key webacl.ressource.",source:"@site/docs/middleware/webacl/resource.md",sourceDirName:"middleware/webacl",slug:"/middleware/webacl/resource",permalink:"/semapps/docs/middleware/webacl/resource",draft:!1,editUrl:"https://github.com/assemblee-virtuelle/semapps/edit/master/website/docs/middleware/webacl/resource.md",tags:[],version:"current",frontMatter:{title:"WebAclResourceService"},sidebar:"middleware",previous:{title:"WebACL",permalink:"/semapps/docs/middleware/webacl/"},next:{title:"WebAclGroupService",permalink:"/semapps/docs/middleware/webacl/group"}},u={},m=[{value:"Actions",id:"actions",level:2},{value:"<code>addRights</code>",id:"addrights",level:3},{value:"Parameters",id:"parameters",level:5},{value:"Return",id:"return",level:5},{value:"<code>awaitReadRights</code>",id:"awaitreadrights",level:3},{value:"Parameters",id:"parameters-1",level:5},{value:"Return",id:"return-1",level:5},{value:"<code>deleteAllRights</code>",id:"deleteallrights",level:3},{value:"Parameters",id:"parameters-2",level:5},{value:"Return",id:"return-2",level:5},{value:"<code>getRights</code>",id:"getrights",level:3},{value:"Parameters",id:"parameters-3",level:5},{value:"Return",id:"return-3",level:5},{value:"<code>hasRights</code>",id:"hasrights",level:3},{value:"Parameters",id:"parameters-4",level:5},{value:"Return",id:"return-4",level:5},{value:"<code>refreshContainersRights</code>",id:"refreshcontainersrights",level:3},{value:"Return",id:"return-5",level:5},{value:"<code>removeRights</code>",id:"removerights",level:3},{value:"Parameters",id:"parameters-5",level:5},{value:"Return",id:"return-6",level:5},{value:"<code>setRights</code>",id:"setrights",level:3},{value:"Parameters",id:"parameters-6",level:5},{value:"Return",id:"return-7",level:5},{value:"Events",id:"events",level:2},{value:"<code>webacl.resource.created</code>",id:"webaclresourcecreated",level:3},{value:"Parameters",id:"parameters-7",level:5},{value:"<code>webacl.resource.updated</code>",id:"webaclresourceupdated",level:3},{value:"Parameters",id:"parameters-8",level:5},{value:"<code>webacl.resource.deleted</code>",id:"webaclresourcedeleted",level:3},{value:"Parameters",id:"parameters-9",level:5},{value:"API routes",id:"api-routes",level:2}],s={toc:m};function k(e){var t=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"This service is automatically created by the ",(0,l.kt)("a",{parentName:"p",href:"index"},"WebAclService")," with the key ",(0,l.kt)("inlineCode",{parentName:"p"},"webacl.ressource"),"."),(0,l.kt)("h2",{id:"actions"},"Actions"),(0,l.kt)("p",null,"The following service actions are available:"),(0,l.kt)("h3",{id:"addrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"addRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Add some permissions to a resource"),(0,l.kt)("li",{parentName:"ul"},"Only available if the user has Control access to the resource."),(0,l.kt)("li",{parentName:"ul"},"Does not take into account the ",(0,l.kt)("inlineCode",{parentName:"li"},"acl:mode")," nor ",(0,l.kt)("inlineCode",{parentName:"li"},"acl:default")," triples that are sent.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"The only important part is the beginning of the node ",(0,l.kt)("inlineCode",{parentName:"li"},":Read")," or ",(0,l.kt)("inlineCode",{parentName:"li"},'"@id":"#Read"')," in JSON-LD."),(0,l.kt)("li",{parentName:"ul"},"Likewise, the ",(0,l.kt)("inlineCode",{parentName:"li"},"acl:accessTo")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"acl:default")," triples are not taken into account either."),(0,l.kt)("li",{parentName:"ul"},"The presence of the keyword ",(0,l.kt)("inlineCode",{parentName:"li"},"Default")," at the beginning of the node is what decides if we are adding a resource or a default container permission."))),(0,l.kt)("li",{parentName:"ul"},"Be careful, the ",(0,l.kt)("inlineCode",{parentName:"li"},"@base")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"@prefix")," in turtle is important, it needs to match the resource URL you are modifying with this action.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Please note that the URI of the ",(0,l.kt)("inlineCode",{parentName:"p"},"@base")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"@prefix")," should not include a trailing slash / . Except for the root container !\nHence, all resources should be modified with a ",(0,l.kt)("inlineCode",{parentName:"p"},'"@base": "http://server.com/_acl/path/of/resource"')," in JSON-LD or ",(0,l.kt)("inlineCode",{parentName:"p"},"@prefix : <http://server.com/_acl/path/of/resource#>.")," in turtle.\nBut the root container has to be accessed as follow : ",(0,l.kt)("inlineCode",{parentName:"p"},'"@base": "http://server.com/_acl/"')," or ",(0,l.kt)("inlineCode",{parentName:"p"},"@prefix : <http://server.com/_acl/#>."))),(0,l.kt)("p",null,"Here's the format for the ",(0,l.kt)("inlineCode",{parentName:"p"},"additionalRights")," parameter:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"{\n  anon: {\n    read: boolean,\n    write: boolean,\n    append: boolean,\n    control: boolean,\n  },\n  anyUser: {\n    read: boolean,\n    write: boolean,\n    append: boolean,\n    control: boolean,\n  },\n  user: {\n    uri: '<URI of user>'\n    read: boolean\n    write: boolean\n    append: boolean\n    control: boolean\n  },\n  group: {\n    uri: '<URI of group>'\n    read: boolean\n    write: boolean\n    append: boolean\n    control: boolean\n  },\n  // This is only possible on a container.\n  default : {\n    anon : { ... same as above },\n    anyUser : { ... same as above },\n    user : { ... same as above },\n    group : { ... same as above },\n  }\n}\n")),(0,l.kt)("p",null,"The Moleculer action can only process one user and/or group at a time. Repeat the call if you need to add permissions for several users or groups.\nNote that this limitation is not present in the ",(0,l.kt)("inlineCode",{parentName:"p"},"PATCH")," HTTP method, but only if you call directly the Moleculer action."),(0,l.kt)("h5",{id:"parameters"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource to add rights to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webId")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"'anon'"),(0,l.kt)("td",{parentName:"tr",align:null},"WebID of the logged user")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"additionalRights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Object with the rights to be added (see above)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"addedRights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Array")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Used by the API endpoint. Should not be used directly.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"newRights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Used by the API endpoint. Should not be used directly.")))),(0,l.kt)("h5",{id:"return"},"Return"),(0,l.kt)("p",null,"Null"),(0,l.kt)("h3",{id:"awaitreadrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"awaitReadRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Wait until the given user has the right to read the given resource")),(0,l.kt)("h5",{id:"parameters-1"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webId")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the user")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"timeout")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Number")),(0,l.kt)("td",{parentName:"tr",align:null},"10000"),(0,l.kt)("td",{parentName:"tr",align:null},"Time to wait (in ms) between each check")))),(0,l.kt)("h5",{id:"return-1"},"Return"),(0,l.kt)("p",null,"Null"),(0,l.kt)("h3",{id:"deleteallrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"deleteAllRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Remove all rights on a given resource.")),(0,l.kt)("h5",{id:"parameters-2"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource to add rights to")))),(0,l.kt)("h5",{id:"return-2"},"Return"),(0,l.kt)("p",null,"Null"),(0,l.kt)("h3",{id:"getrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"getRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If the user has Control permission on the resource, return all the permissions on that resource."),(0,l.kt)("li",{parentName:"ul"},"If the user doesn't have Control permission, return only the permissions related to the specific user that is doing the request."),(0,l.kt)("li",{parentName:"ul"},"Return the permissions grouped by the Authorization node they belong to.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Each resource can have up to 4 Authorization nodes : ",(0,l.kt)("inlineCode",{parentName:"li"},"#Read")," ",(0,l.kt)("inlineCode",{parentName:"li"},"#Write")," ",(0,l.kt)("inlineCode",{parentName:"li"},"#Append")," ",(0,l.kt)("inlineCode",{parentName:"li"},"#Control"),"."),(0,l.kt)("li",{parentName:"ul"},"Each one contains the Agents, AgentClass, and/or AgentGroup that have the permission on the resource."))),(0,l.kt)("li",{parentName:"ul"},"Containers that define default permissions can have 4 additional Authorizations : ",(0,l.kt)("inlineCode",{parentName:"li"},"#DefaultRead")," ",(0,l.kt)("inlineCode",{parentName:"li"},"#DefaultWrite")," ",(0,l.kt)("inlineCode",{parentName:"li"},"#DefaultAppend")," ",(0,l.kt)("inlineCode",{parentName:"li"},"#DefaultControl")," that list the default permissions for that container.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Only a user that has ",(0,l.kt)("inlineCode",{parentName:"li"},"Control")," access to a container, can see the ",(0,l.kt)("inlineCode",{parentName:"li"},"#Default")," Authorization nodes of that container."))),(0,l.kt)("li",{parentName:"ul"},"If their exist some additional permissions on the resource/container, inherited from a parent container, they will be displayed at the end of the file, with fully-qualified URIs.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Likewise, you can distinguish between the default permissions that concern the container you queried the ACL for, and the default permissions that are inherited.")))),(0,l.kt)("h5",{id:"parameters-3"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource to check rights")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"accept")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"text/turtle")),(0,l.kt)("td",{parentName:"tr",align:null},"Type of content we want to receive. ",(0,l.kt)("inlineCode",{parentName:"td"},"application/ld+json")," or ",(0,l.kt)("inlineCode",{parentName:"td"},"text/turtle"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webId")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"'anon'"),(0,l.kt)("td",{parentName:"tr",align:null},"WebID of the logged user")))),(0,l.kt)("h5",{id:"return-3"},"Return"),(0,l.kt)("p",null,"Turtle or JSON-LD. See above."),(0,l.kt)("h3",{id:"hasrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"hasRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Checks if a user (or the logged-in user) has some rights on a resource.")),(0,l.kt)("h5",{id:"parameters-4"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource to check rights")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"rights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"{ read: true, append: true, write: true, delete: true }")),(0,l.kt)("td",{parentName:"tr",align:null},"Object with the rights you want to check")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webId")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"'anon'"),(0,l.kt)("td",{parentName:"tr",align:null},"WebID of the logged user")))),(0,l.kt)("h5",{id:"return-4"},"Return"),(0,l.kt)("p",null,"An object containing the permissions you asked for:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"{\n  read: boolean,\n  write: boolean,\n  append: boolean,\n  control: boolean\n}\n")),(0,l.kt)("h3",{id:"refreshcontainersrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"refreshContainersRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Remove all rights from the containers and add those defined in the containers ",(0,l.kt)("inlineCode",{parentName:"li"},"permissions")," option")),(0,l.kt)("h5",{id:"return-5"},"Return"),(0,l.kt)("p",null,"Null"),(0,l.kt)("h3",{id:"removerights"},(0,l.kt)("inlineCode",{parentName:"h3"},"removeRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"This action can only be called by other Moleculer services."),(0,l.kt)("li",{parentName:"ul"},"If you remove a right which doesn't exist, no error will be thrown.")),(0,l.kt)("h5",{id:"parameters-5"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"rights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"Object with the rights to remove (see above)")))),(0,l.kt)("h5",{id:"return-6"},"Return"),(0,l.kt)("p",null,"Null"),(0,l.kt)("h3",{id:"setrights"},(0,l.kt)("inlineCode",{parentName:"h3"},"setRights")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Change all the permissions of a resource so that they become like in the document that is sent by the user."),(0,l.kt)("li",{parentName:"ul"},"Only available if the user has Control access to the resource."),(0,l.kt)("li",{parentName:"ul"},"The former permissions that are not present in the document will be removed."),(0,l.kt)("li",{parentName:"ul"},"Regarding the format of the HTTP payload, the same rules as ",(0,l.kt)("inlineCode",{parentName:"li"},"addRights")," apply."),(0,l.kt)("li",{parentName:"ul"},"This action can hardly be called directly as a Moleculer action.")),(0,l.kt)("h5",{id:"parameters-6"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"resourceUri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource to add rights to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webId")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"'anon'"),(0,l.kt)("td",{parentName:"tr",align:null},"WebID of the logged user")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"newRights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Array")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Used by the API endpoint. Should not be used directly.")))),(0,l.kt)("h5",{id:"return-7"},"Return"),(0,l.kt)("p",null,"Null"),(0,l.kt)("h2",{id:"events"},"Events"),(0,l.kt)("h3",{id:"webaclresourcecreated"},(0,l.kt)("inlineCode",{parentName:"h3"},"webacl.resource.created")),(0,l.kt)("p",null,"Sent when the ACL for a new resource or container are created."),(0,l.kt)("h5",{id:"parameters-7"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"uri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource on which rights were created")))),(0,l.kt)("h3",{id:"webaclresourceupdated"},(0,l.kt)("inlineCode",{parentName:"h3"},"webacl.resource.updated")),(0,l.kt)("p",null,"Sent when the ACL for a resource or container are updated."),(0,l.kt)("h5",{id:"parameters-8"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"uri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource on which rights were updated")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"isContainer")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Boolean")),(0,l.kt)("td",{parentName:"tr",align:null},"True if the resource is a container")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"defaultRightsUpdated")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Boolean")),(0,l.kt)("td",{parentName:"tr",align:null},"True if the resource is a container and some of the default rights of the container were updated")))),(0,l.kt)("h3",{id:"webaclresourcedeleted"},(0,l.kt)("inlineCode",{parentName:"h3"},"webacl.resource.deleted")),(0,l.kt)("p",null,"Sent when the ACL for a resource or container are deleted."),(0,l.kt)("h5",{id:"parameters-9"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"uri")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String")),(0,l.kt)("td",{parentName:"tr",align:null},"URI of the resource on which rights were deleted")))),(0,l.kt)("h2",{id:"api-routes"},"API routes"),(0,l.kt)("p",null,"These routes are automatically added to the ",(0,l.kt)("inlineCode",{parentName:"p"},"ApiGateway")," service."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Route"),(0,l.kt)("th",{parentName:"tr",align:null},"Action called"),(0,l.kt)("th",{parentName:"tr",align:null},"Body"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"GET /_acl/path/of/container/or/resource")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webacl.resource.getRights")),(0,l.kt)("td",{parentName:"tr",align:null},"Null")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"GET /_rights/path/of/container/or/resource")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webacl.resource.hasRights")),(0,l.kt)("td",{parentName:"tr",align:null},"Null")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST /_rights/path/of/container/or/resource")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webacl.resource.hasRights")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'{ "rights": { "read": true, ... } }'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"PATCH /_acl/path/of/container/or/resource")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webacl.resource.addRights")),(0,l.kt)("td",{parentName:"tr",align:null},"Turtle or JSON-LD authorizations")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"PUT /_acl/path/of/container/or/resource")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"webacl.resource.setRights")),(0,l.kt)("td",{parentName:"tr",align:null},"Turtle or JSON-LD authorizations")))))}k.isMDXComponent=!0}}]);