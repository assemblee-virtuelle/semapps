"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8149],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),f=u(n),m=o,d=f["".concat(c,".").concat(m)]||f[m]||l[m]||i;return n?r.createElement(d,a(a({ref:t},p),{},{components:n})):r.createElement(d,a({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},9301:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return l}});var r=n(3117),o=n(102),i=(n(7294),n(3905)),a=["components"],s={title:"Migrating datasets"},c=void 0,u={unversionedId:"triplestore/migrating-datasets",id:"triplestore/migrating-datasets",title:"Migrating datasets",description:"If you have existing Fuseki datasets without the SemApps-specific configuration and wish to use the WebACL or mirror",source:"@site/docs/triplestore/migrating-datasets.md",sourceDirName:"triplestore",slug:"/triplestore/migrating-datasets",permalink:"/docs/triplestore/migrating-datasets",draft:!1,editUrl:"https://github.com/assemblee-virtuelle/semapps/edit/master/website/docs/triplestore/migrating-datasets.md",tags:[],version:"current",frontMatter:{title:"Migrating datasets"},sidebar:"triplestore",previous:{title:"Introduction",permalink:"/docs/triplestore/"},next:{title:"Compacting datasets",permalink:"/docs/triplestore/compacting-datasets"}},p={},l=[],f={toc:l};function m(e){var t=e.components,n=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"If you have existing Fuseki datasets without the SemApps-specific configuration and wish to use the WebACL or mirror\nservice, you will have to migrate them."),(0,i.kt)("p",null,"First stop your Docker containers (",(0,i.kt)("inlineCode",{parentName:"p"},"docker-compose down"),"), then run the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'docker run -v "$(pwd)"/data/fuseki:/fuseki --entrypoint /docker-migration-entrypoint.sh semapps/jena-fuseki-webacl\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Warning"),": The volume path can be different on your setup. It has to be the exact same as the ",(0,i.kt)("inlineCode",{parentName:"p"},"volumes")," line of the\n",(0,i.kt)("inlineCode",{parentName:"p"},"fuseki")," service present in your docker-compose file.")),(0,i.kt)("p",null,"You can check that everything went well with the migration by starting the shell environment of the Fuseki service\n(",(0,i.kt)("inlineCode",{parentName:"p"},"docker-compose exec fuseki bash"),"), and doing ",(0,i.kt)("inlineCode",{parentName:"p"},"cat /fuseki/configuration/migration.log"),"."),(0,i.kt)("p",null,"If you see some errors in this file, or if your dataset configuration files were not standard and you had modified them,\nthen you need to do the migration manually. You can find the previous version of your configuration files with the\nextension ",(0,i.kt)("inlineCode",{parentName:"p"},".bak"),". To see the format of the dataset configuration you want to achieve manually, please refer to the\ntemplates ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/assemblee-virtuelle/semapps/tree/next/src/jena/fuseki-docker/migration/templates"},"here"),"."))}m.isMDXComponent=!0}}]);